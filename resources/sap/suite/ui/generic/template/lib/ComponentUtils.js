sap.ui.define(["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";var C={};function g(c,o){var h;var H=null;var a;var b;var I=false;var d=[];var e=[];function f(i){var d1;var e1=c.getModel();if(i){if(e1){d1=e1.getProperty(i);}}else{var f1=c.getBindingContext();if(f1){d1=f1.getObject();}}return!!(d1&&d1.__metadata&&d1.__metadata.created);}function j(){return c.getModel("_templPriv");}function k(){return j().getProperty("/generic/viewLevel");}function l(){return o.preprocessorsData;}function m(){return o.oParameterModel;}function n(){var i=c.getModel("i18n").getResourceBundle();return{dataLoadFailedTitle:i.getText("ST_ERROR"),dataLoadFailedText:i.getText("ST_GENERIC_ERROR_LOAD_DATA_TEXT")};}function A(i,d1,e1){if(typeof e1!=="function"){throw new Error("Event handler must be a function");}e.push({template:i,event:d1,handler:e1});}function D(d1,e1,f1){for(var i=e.length;i--;){if(e[i].handler===f1&&e[i].event===e1&&e[i].template===d1){e.splice(i,1);}}}function F(d1,e1,f1){for(var i=0;i<e.length;i++){if(e[i].event===e1&&e[i].template===d1){e[i].handler(f1);}}}function p(i){return i.getMetadata().getName();}function r(){return o.oApplication.isComponentActive(c);}function P(i,d1){var e1=o.oNavigationObserver.getProcessFinished(true);e1.then(function(){if(r()){if(d1){z(true);}F(p(o.oController),"PageDataLoaded",{context:i});}});}function s(){h.then(function(i){if(i){P(i);}});}function S(){o.oHeaderLoadingObserver.startProcess();if(!b){var i=new Promise(function(d1){b=d1;});o.oApplication.getBusyHelper().setBusy(i);}}function t(){I=true;if(!H){h=new Promise(function(i){H=i;});}if(!c.getComponentContainer().getElementBinding().isSuspended()){S();}}function E(){if(b){b();b=null;}o.oHeaderLoadingObserver.stopProcess();}function u(i){var d1=i.getSource().getBoundContext();if(d1){return d1;}if(c.getComponentContainer().getElementBinding().isSuspended()){d1=null;}else{d1=C;}U();E();return d1;}function N(){var i=n();var d1=c.getAppComponent().getNavigationController();d1.navigateToMessagePage({title:i.dataLoadFailedTitle,text:i.dataLoadFailedText,description:"",viewLevel:k()});}function v(){I=false;if(!a){return;}if(a===C){N();}else if(!c.getComponentContainer().getElementBinding().isSuspended()){if(H){H(a);}(o.methods.updateBindingContext||q.noop)();}else{return;}H=null;a=null;}function w(i){E();if(I){a=u(i);}v();}function x(i){a=u(i);v();o.oHeaderLoadingObserver.stopProcess();}function R(i){var d1={};var e1=l();if(e1.rootContextExpand&&e1.rootContextExpand.length){d1.expand=e1.rootContextExpand.join(",");}o.oHeaderLoadingObserver.startProcess();if(o.methods.beforeRebind){o.methods.beforeRebind();}h=new Promise(function(f1){a=null;H=f1;c.getComponentContainer().bindElement({path:i,events:{dataRequested:t,dataReceived:w,change:x},parameters:d1,batchGroupId:"Changes",changeSetId:"Changes"});});if(o.methods.afterRebind){o.methods.afterRebind();}}function U(){var i=c.getComponentContainer();i.unbindElement();a=null;}function y(){var d1=Q();var e1=(d1.length===d.length);for(var i=0;i<d1.length&&e1;i++){e1=d1[i]===d[i];}d=d1;return!e1;}function z(d1){var e1=o.reuseComponentProxies;for(var i=0;i<e1.length;i++){e1[i].pathUnchangedCallBack(d1);}}function G(i,d1){var e1=y();if(!i){if(o.routingSpec&&o.routingSpec.noOData){P(null,e1);}return;}var f1=c.getComponentContainer();if(!f1){return;}if(f(i)){U();f1.setBindingContext(f1.getModel().getContext(i));Promise.all([o.oViewRenderedPromise,o.viewRegisterd]).then(z.bind(null,true));}else{var g1=f1.getElementBinding();if(g1){if(g1.getPath()===i){if(g1.isSuspended()){g1.resume();v();}if(I){S();}o.oApplication.getBusyHelper().getUnbusy().then(z.bind(null,e1&&o.routingSpec.noOData));if(!d1){s();}return;}else if(!d1){U();}}var h1=c.getModel("ui");h1.setProperty("/enabled",false);h1.setProperty("/editable",false);R(i);s();}}function J(){var i,d1;i=c.getComponentContainer();if(!i){return;}d1=i.getElementBinding();if(d1){d1.refresh();}}function K(){var i=c.getComponentContainer();var d1=i.getBindingContext();var e1=d1&&d1.getPath();var f1=e1&&f(e1);if(f1){i.setBindingContext();return;}var g1=i.getElementBinding();if(g1&&!g1.isSuspended()){if(o.oTemplateContract.oValidationMessageBinding.getLength()){U();}else{g1.suspend();}E();}}function L(i){o.oApplication.setBackNavigation(i);}function M(i){var d1=k();return o.oApplication.registerContext(i,d1);}function O(){return o.oApplication.getBreadCrumbInfo(c.getEntitySet());}function Q(){return o.oApplication.getCurrentKeys(k());}function T(){return o.oApplication.getCommunicationModel(c);}function V(i){return o.oApplication.getCommunicationObject(c,i);}function W(i,d1,e1,f1){o.oApplication.navigateRoute(i,d1,o,e1,f1);}function X(){var i=c.getEntitySet();var d1=o.oTemplateContract.mEntityTree[i];return d1.headerTitle;}function Y(){var i=c.getEntitySet();var d1=o.oTemplateContract.mEntityTree[i];return d1.isDraft;}function Z(){if(Y()){var i=o.oApplication.getHierarchySectionsFromCurrentHash();return"/"+i[0];}}function $(){return!(o.routingSpec&&o.routingSpec.noOData);}function _(){return h;}function a1(){return o.oTemplateContract.oPaginatorInfo[k()-1];}function b1(i,d1){var e1=k();if(!d1){e1--;}o.oTemplateContract.oPaginatorInfo[e1]=i;}function c1(i,d1){var e1=d1.getId();var f1=e1.split("::");var g1=f1[f1.length-2];var h1=j();h1.setProperty("/generic/embeddedComponents/"+g1+"/isInVisibleArea",i);}return{setEditableNDC:function(i){o.oApplication.setEditableNDC(i);},getEditableNDC:function(){return o.oApplication.getEditableNDC();},getBusyHelper:function(){return o.oApplication.getBusyHelper();},isNonDraftCreate:f,attach:function(i,d1,e1){A(p(i),d1,e1);},detach:function(i,d1,e1){D(p(i),d1,e1);},fire:function(i,d1,e1){F(p(i),d1,e1);},isListReportTemplate:function(){return sap.suite.ui.generic.template.js.AnnotationHelper.isListReportTemplate(o.routeConfig);},getPreprocessorsData:l,getParameterModelForTemplating:m,bindComponent:G,refreshBinding:J,suspendBinding:K,setBackNavigation:L,getTemplatePrivateModel:j,registerContext:M,getViewLevel:k,getBreadCrumbInfo:O,getCurrentKeys:Q,getDraftRootPath:Z,getCommunicationModel:T,getCommunicationObject:V,navigateRoute:W,getTitleFromTreeNode:X,isDraftEnabled:Y,isODataBased:$,isComponentActive:r,navigateToDataLoadedFailedPage:N,getHeaderDataAvailablePromise:_,getPaginatorInfo:a1,setPaginatorInfo:b1,onVisibilityChangeOfReuseComponent:c1};}return B.extend("sap.suite.ui.generic.template.lib.ComponentUtils",{constructor:function(c,o){q.extend(this,g(c,o));}});});
