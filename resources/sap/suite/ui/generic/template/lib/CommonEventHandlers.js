sap.ui.define(["jquery.sap.global","sap/ui/base/Object","sap/ui/core/format/DateFormat","sap/m/Select","sap/m/MessageBox","sap/m/MessageToast","sap/m/Table","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/comp/smartfilterbar/SmartFilterBar","sap/ui/model/odata/type/Time","sap/suite/ui/generic/template/lib/testableHelper","sap/ui/table/TreeTable","sap/ui/model/json/JSONModel","sap/ui/core/mvc/ViewType","sap/suite/ui/generic/template/lib/modelHelper"],function(q,B,D,S,M,a,T,F,b,c,d,t,e,J,V,m){"use strict";function g(p,C){var s="";var i=[];var j;return function(o){var l=C;var n=p;var r;for(var h in i){if(i[h].path===p){r=i[h];break;}}if(!r){var u=o.getModel("entitySet").getMetaModel();var v=u.getObject(u.getMetaContext(o.sPath).sPath);var P=u.getObject(u.getMetaContext(o.sPath+"/"+p).sPath);if(P){var w=" ";for(var k=0;P.extensions&&k<P.extensions.length;k++){if(P.extensions[k].namespace==="http://www.sap.com/Protocols/SAPData"){switch(P.extensions[k].name){case"display-format":w=P.extensions[k].value;break;case"label":if(!l){l=P.extensions[k].value;}break;case"text":var x=P.extensions[k].value;var y=p.split("/");y[y.length-1]=x;n=y.join("/");break;default:break;}}}if(l===""||l===undefined){l=p;}j=sap.suite.ui.generic.template.js.AnnotationHelper.getTextArrangement(v,P);r={path:p,data:{type:P.type,displayFormat:w,label:l,textPath:n,textArrangement:j}};i.push(r);}}l=r.data.label;var z=o.getProperty(p);var A;if(r.data.textPath&&r.data.textPath!==""){A=o.getProperty(r.data.textPath);}switch(r.data.type){case"Edm.DateTime":if(r.data.displayFormat==="Date"){var E=D.getDateInstance({style:"medium"});var G=new Date(0).getTimezoneOffset()*60*1000;if(z&&z!==""&&z.getTime){z=E.format(new Date(z.getTime()+G));}}break;case"Edm.Time":if(z&&z!==""){var H=new d();z=H.formatValue(z,"string");}break;case"Edm.Boolean":if(z===true){z="{i18n>YES}";}else if(z===false){z="{i18n>NO}";}break;default:break;}if(!A||r.data.textPath===p){s=z?z:"";}else{switch(r.data.textArrangement){case"idAndDescription":s=z+" ("+A+")";break;case"idOnly":s=z;break;case"descriptionOnly":s=A;break;default:s=A+" ("+z+")";break;}}return{key:s?s:p,text:l?l+": "+s:s};};}function f(C,o,s,h){function E(i){var j={};for(var k in i){var x=i[k];if(typeof x==="string"){j[k]=x;}else if(typeof x==="object"){if(x.value){j[k]=E(x).value;}else{j[k]=x;}}}return j;}function H(i){if(i instanceof sap.ui.generic.app.navigation.service.NavError){if(i.getErrorCode()==="NavigationHandler.isIntentSupported.notSupported"){sap.m.MessageBox.show(h.getText("ST_NAV_ERROR_NOT_AUTHORIZED_DESC"),{title:h.getText("ST_GENERIC_ERROR_TITLE")});}else{sap.m.MessageBox.show(i.getErrorCode(),{title:h.getText("ST_GENERIC_ERROR_TITLE")});}}}function l(){var i=C.getView().getBindingContext();return s.oApplication.getDraftSiblingPromise(i);}function n(j){var k=j;var x=-1;var y1=h.getOwnerControl(j);if(y1.getTable){y1=y1.getTable();}var z1=h.isAnalyticalTable(y1);var A1=o.getViewLevel();var B1;if(!z1){var C1=h.getTableBindingInfo(y1);var D1=C1&&C1.binding;var E1=null;if(D1){if(y1 instanceof e){var F1=(D1.getLength()>0)?D1.getLength():0;if(F1>0){E1=[];for(var G1=0;G1<F1;G1++){E1.push(D1.getContextByIndex(G1));}}}else if(h.isUiTable(y1)){E1=D1.getContexts();}else if(y1 instanceof T){E1=D1.getCurrentContexts();}}var H1=null;var I1=h.getSelectedContexts(y1);var J1=null;if(I1&&I1.length>0){J1=I1[0].getPath();}else if(k){J1=k.getBindingContext()?k.getBindingContext().sPath:null;}if(D1&&D1.getContexts&&J1){for(var i=0;i<E1.length;i++){H1=E1[i];if(H1.getPath()===J1){x=i;break;}}}if(y1&&x!==-1&&E1.length>0){var K1;if(y1 instanceof T){K1=y1.getGrowingThreshold();}else if(h.isUiTable(y1)){K1=y1.getThreshold();}var L1=A1>0?h.getTableBindingInfo(y1).path:null;var M1=function(N1){return{context:N1,navigationData:{navigationProperty:L1}};};B1=E1&&{listBinding:D1,growingThreshold:K1,selectedRelativeIndex:x,objectPageNavigationContexts:E1,navigitionInfoProvider:M1};}}o.setPaginatorInfo(B1,true);}function p(j,k){var x=C.getView().getModel().getMetaModel();var y1=k;var z1=x.getODataEntitySet(j,false);var A1=x.getODataEntityType(z1.entityType,false);var B1=A1.key.propertyRef;var i;var C1=s.oDraftController.getDraftContext();if(C1.isDraftEnabled(j)){B1=B1.concat(C1.getSemanticKey(j));B1.push({name:"IsActiveEntity"},{name:"HasDraftEntity"},{name:"HasActiveEntity"});}if(y1.parameters.select&&y1.parameters.select.length>0){var D1=y1.parameters.select.split(",");for(i=0;i<B1.length;i++){if(q.inArray(B1[i].name,D1)===-1){y1.parameters.select+=","+B1[i].name;D1=y1.parameters.select.split(",");}}}return y1;}function r(i,j){var k=i.getSource().getUrl();i.preventDefault();h.processDataLossConfirmationIfNonDraft(function(){sap.m.URLHelper.redirect(k,false);},q.noop,j);}function u(i,j){i.preventDefault();var k=i.getSource().getHref();h.processDataLossConfirmationIfNonDraft(function(){window.location.hash=k;},q.noop,j);}function v(j){var k=[];return h.getDialogFragment("sap.suite.ui.generic.template.ListReport.view.fragments.DeleteConfirmation",{onCancel:function(i){var x=i.getSource().getParent();x.close();},onDelete:function(x){var y1=x.getSource().getParent();var z1=y1.getModel("delete");var A1=z1.getProperty("/items");var B1=[];var C1=[];var D1=[];k=[];for(var i=0;i<A1.length;i++){if(!A1[i].draftStatus.locked&&A1[i].deletable){if(!A1[i].draftStatus.draft){if(A1[i].draftStatus.draftActive){D1.push(A1[i].context.sPath);}else if(A1.length===z1.getProperty("/unsavedChangesItemsCount")||!A1[i].draftStatus.unsavedChanges||z1.getProperty("/checkboxSelected")){B1.push(A1[i].context.sPath);}}else{C1.push(A1[i].context.sPath);k.push(A1[i].context.sPath);}}}C1=C1.concat(B1).concat(D1);s.oCRUDManager.deleteEntities(C1).then(function(E1){var F1=0;var G1=[];for(var i=0;i<E1.length;i++){G1.push("/"+E1[i].split('/')[1]);if(k.indexOf(G1[i])!==-1){F1=F1+1;}}var H1=j.getTable();H1.getModel("_templPriv").setProperty("/listReport/deleteEnabled",false);var I1=C1.length-D1.length-(E1.length-F1);if((E1.length-F1)>0){var J1="";if(I1>0){J1+=(I1>1)?h.getText("ST_GENERIC_DELETE_SUCCESS_PLURAL_WITH_COUNT",[I1]):h.getText("ST_GENERIC_DELETE_SUCCESS_WITH_COUNT",[I1]);J1+="\n";J1+=(E1.length>1)?h.getText("ST_GENERIC_DELETE_ERROR_PLURAL_WITH_COUNT",[E1.length]):h.getText("ST_GENERIC_DELETE_ERROR_WITH_COUNT",[E1.length]);}else{J1=(E1.length>1)?h.getText("ST_GENERIC_DELETE_ERROR_PLURAL"):h.getText("ST_GENERIC_DELETE_ERROR");}M.error(J1);}else{var K1="";K1=(I1>1)?h.getText("ST_GENERIC_DELETE_SUCCESS_PLURAL"):h.getText("ST_GENERIC_OBJECT_DELETED");s.oApplication.showMessageToast(K1);}h.refreshSmartTable(j);},function(E1){M.error(h.getText("ST_GENERIC_DELETE_ERROR_PLURAL",[C1.length]),{styleClass:h.getContentDensityClass()});});y1.close();}},"delete");}function w(i,j){return new Promise(function(k,x){j.read(i+"/SiblingEntity",{success:function(y1){var z1="/"+j.getKey(y1);k(z1);},error:function(y1){var z1="Error";k(z1);}});});}function y(j){var k=C.getView().getModel();var x=k.getMetaModel();var y1=x.getODataEntitySet(C.getOwnerComponent().getEntitySet());var z1=y1["Org.OData.Capabilities.V1.DeleteRestrictions"];var A1=(z1&&z1.Deletable&&z1.Deletable.Path)?z1.Deletable.Path:"";var B1={items:undefined,itemsCount:j.length,text:{title:undefined,shortText:undefined,unsavedChanges:undefined,longText:undefined,undeletableText:undefined},lockedItemsCount:0,unsavedChangesItemsCount:0,undeletableCount:0,checkboxSelected:true};var C1=[];var D1=[];var E1,F1,G1,H1,I1;var J1=[];for(var i=0;i<j.length;i++){E1=k.getObject(j[i].getPath());if(!E1.IsActiveEntity){if(E1.HasActiveEntity){J1.push(w(j[i].getPath(),k));}}}var K1=0;return new Promise(function(L1,M1){Promise.all(J1).then(function(N1){for(var i=0;i<j.length;i++){E1=k.getObject(j[i].getPath());F1={};G1={};H1=true;I1={};if(!E1.IsActiveEntity){F1.draft=true;if(E1.HasActiveEntity){G1.draft=false;G1.draftActive=true;if(N1[K1]!="Error"){I1["oModel"]=j[0].getModel();I1["sPath"]=N1[K1++];}}}else if(E1.HasDraftEntity){var O1=k.getProperty("DraftAdministrativeData/CreatedByUserDescription",j[i]);if(!O1){O1=k.getProperty("DraftAdministrativeData/InProcessByUser",j[i]);}if(O1){F1.locked=true;F1.user=O1;B1.lockedItemsCount++;}else{F1.unsavedChanges=true;F1.user=k.getProperty("DraftAdministrativeData/LastChangedByUser",j[i]);B1.unsavedChangesItemsCount++;}}if(A1&&A1!==""){if(k.getProperty(A1,j[i])===false){H1=false;B1.undeletableCount++;}}C1.push({context:j[i],draftStatus:F1,deletable:H1});if(!E1.IsActiveEntity&&E1.HasActiveEntity){D1.push({context:I1,draftStatus:G1,deletable:H1});}}if(D1.length>0){C1=C1.concat(D1);}B1.items=C1;if(B1.lockedItemsCount===B1.itemsCount){B1.text.title=h.getText("ST_GENERIC_ERROR_TITLE");}else{B1.text.title=(B1.itemsCount>1)?h.getText("ST_GENERIC_DELETE_TITLE_WITH_COUNT",[B1.itemsCount]):h.getText("ST_GENERIC_DELETE_TITLE");}B1.text.unsavedChanges=h.getText("ST_GENERIC_UNSAVED_CHANGES_CHECKBOX");if(B1.itemsCount>1){if(B1.lockedItemsCount===B1.itemsCount){B1.text.shortText=h.getText("ST_GENERIC_DELETE_LOCKED_PLURAL");}else if(B1.unsavedChangesItemsCount===B1.itemsCount){B1.text.shortText=h.getText("ST_GENERIC_DELETE_UNSAVED_CHANGES_PLURAL");}else if(B1.lockedItemsCount>0){var P1=B1.itemsCount-B1.lockedItemsCount;B1.text.shortText=(B1.lockedItemsCount>1)?h.getText("ST_GENERIC_CURRENTLY_LOCKED_PLURAL",[B1.lockedItemsCount,B1.itemsCount]):h.getText("ST_GENERIC_CURRENTLY_LOCKED",[B1.itemsCount]);B1.text.shortText+="\n";if(P1===B1.unsavedChangesItemsCount){B1.text.shortText+=(P1>1)?h.getText("ST_GENERIC_DELETE_REMAINING_UNSAVED_CHANGES_PLURAL"):h.getText("ST_GENERIC_DELETE_REMAINING_UNSAVED_CHANGES");}else{B1.text.shortText+=(P1>1)?h.getText("ST_GENERIC_DELETE_REMAINING_PLURAL",[P1]):h.getText("ST_GENERIC_DELETE_REMAINING");}}else{B1.text.shortText=h.getText("ST_GENERIC_DELETE_SELECTED_PLURAL");}if(B1.undeletableCount>0){B1.text.undeletableText=h.getText("ST_GENERIC_DELETE_UNDELETABLE",[B1.undeletableCount,B1.itemsCount]);}}else{if(B1.lockedItemsCount>0){B1.text.shortText=h.getText("ST_GENERIC_DELETE_LOCKED",[" ",B1.items[0].draftStatus.user]);}else if(B1.unsavedChangesItemsCount>0){B1.text.shortText=h.getText("ST_GENERIC_DELETE_UNSAVED_CHANGES",[" ",B1.items[0].draftStatus.user]);}else{B1.text.shortText=h.getText("ST_GENERIC_DELETE_SELECTED");}}L1({"mJSONData":B1});});});}function z(i,j,k,x){var y1=h.getNavigationHandler();var z1={};var A1={};for(var B1 in i.parameters){if(q.isEmptyObject(i.parameters[B1])){z1[B1]=i.parameters[B1];}else{A1[B1]=i.parameters[B1];}}A1=E(A1);y1.mixAttributesAndSelectionVariant({},x).getParameterNames().forEach(function(B1){delete z1[B1];});var C1=k&&k.getObject();var D1=j&&j.getObject?j.getObject():j&&j[0];var E1=q.extend({},z1,C1,D1,A1);return y1.mixAttributesAndSelectionVariant(E1,x);}function N(i,j,k,x){var y1=h.getNavigationHandler();var z1;if(k){z1=k.getUiState().getSelectionVariant();if(typeof z1!=="string"){z1=JSON.stringify(z1);}}var A1=z(i,j,C.getView().getBindingContext(),z1);var B1={semanticObject:i.semanticObject,action:i.action};C.adaptNavigationParameterExtension(A1,B1);y1.navigate(i.semanticObject,i.action,A1.toJSONString(),null,H);}function A(i){var j=h.getNavigationHandler();var k={semanticObject:i.semanticObject,action:i.action};var x=j.mixAttributesAndSelectionVariant(i.semanticAttributes);C.adaptNavigationParameterExtension(x,k);j.navigate(i.semanticObject,i.action,x.toJSONString(),null,H);}function G(i,k){var x=i.byId("icon");var y1=x&&x.getSrc();if(y1===""){y1=undefined;}var z1=i.byId("title");var A1=z1&&z1.getText();if(A1===""){A1=undefined;}var B1=i.byId("description");var C1=B1&&B1.getText();if(C1===""){C1=undefined;}for(var j=0;j<k.length;j++){var D1=k[j];var E1=sap.suite.ui.generic.template.js.AnnotationHelper.getStableIdPartFromFacet(D1)+"::contactTitleAreaIcon";var F1=i.byId(E1);var G1=sap.suite.ui.generic.template.js.AnnotationHelper.getStableIdPartFromFacet(D1)+"::contactTitleAreaTitle";var H1=i.byId(G1);var I1=sap.suite.ui.generic.template.js.AnnotationHelper.getStableIdPartFromFacet(D1)+"::contactTitleAreaDescription";var J1=i.byId(I1);var K1=F1&&F1.getSrc();if(K1===""){K1=undefined;}var L1=H1&&H1.getText();if(L1===""){L1=undefined;}var M1=J1&&J1.getText();if(M1===""){M1=undefined;}if(y1&&K1&&A1&&L1&&C1&&M1){if((y1===K1||!K1)&&(A1===L1||!L1)&&(C1===M1||!M1)){var N1=sap.suite.ui.generic.template.js.AnnotationHelper.getStableIdPartFromFacet(D1)+"::contactTitleArea";var O1=i.byId(N1);if(O1&&O1.setVisible){O1.setVisible(false);}}}}}function I(i,j,k,x){var y1=C.getOwnerComponent().getAppComponent().getManifestEntry("sap.app");var z1=y1.crossNavigation.outbounds[i.data("CrossNavigation")];var A1;if(k){if(h.isSmartChart(i)){A1=h.getOwnerControl(x);}else{A1=h.getOwnerControl(i).getParent();}}N(z1,j,k,A1);}function K(j,k){for(var i=0;i<j.length;i++){if(j[i].indexOf("/")!==-1){var x=j[i].split("/");x.pop();var y1=x.join("/");if(k.indexOf(y1)===-1){k.push(y1);}}}}function L(i,j){}function O(C,j,k){var x=C.getOwnerComponent().getAppComponent().getConfig();if(C.getMetadata().getName()==='sap.suite.ui.generic.template.ListReport.view.ListReport'&&x&&x.pages[0]&&x.pages[0].component&&x.pages[0].component.settings&&x.pages[0].component.settings.quickVariantSelectionX){var y1=j.getFilters();if(y1){for(var i in y1){k.filters.push(y1[i]);}}}}function P(i,j){h.processDataLossConfirmationIfNonDraft(function(){var k=i.data('SemanticObject');var x=i.data('Action');var y1=i.data('SemanticAttributes');if(k&&x){var z1={semanticObject:k,action:x};if(y1){y1="{"+y1+"}";z1.semanticAttributes=JSON.parse(y1);}A(z1);}},q.noop);}function Q(k,x,y1,z1,A1){var B1="";var C1=function(f2){var g2=f2.dependent.propertyRef;var h2=x.originalId;var i2=C.getView().byId(h2);if(i2&&i2.mProperties.fieldName){for(var j2 in g2){if(g2[j2].name===i2.mProperties.fieldName){B1=i2.mProperties.fieldName;return true;}}}if(!i2){var k2=q("#"+h2.replace(/(:|\.|\[|\]|,|=)/g,"\\$1"));if(k2){i2=k2.control(0);if(i2&&i2.mProperties.fieldName){for(var j2 in g2){if(g2[j2].name===i2.mProperties.fieldName){B1=i2.mProperties.fieldName;return true;}}}}}return false;};var D1=function(){var E1,L1,f2,g2,h2,i2,j2;L1=k.getModel().getMetaModel();f2=L1.getODataEntitySet(k.getEntitySet());g2=L1.getODataEntityType(f2.entityType);if(!g2||!g2.navigationProperty){return;}for(var i=0;i<g2.navigationProperty.length;i++){h2=g2.navigationProperty[i];if(h2.name==="SiblingEntity"||h2.name==="DraftAdministrativeData"){continue;}var k2=h2.relationship;var l2=k2.lastIndexOf(".");var m2=k2.slice(0,l2);var n2=k2.slice(l2+1);var o2=L1.getObject("/dataServices/schema");var p2;for(var j in o2){if(o2[j].namespace===m2){p2=o2[j];break;}}var q2=p2.association;var r2;for(var j in q2){if(q2[j].name===n2){r2=q2[j];break;}}var s2=r2.referentialConstraint;if(s2&&s2.dependent&&s2.dependent.propertyRef){var t2=C1(s2);if(t2){i2=L1.getODataAssociationEnd(g2,h2.name);j2=L1.getODataEntityType(i2.type);var u2=L1.getODataEntityContainer();var v2="";var w2="";var x2="";for(var j=0;j<u2.entitySet.length;j++){var y2=j2.entityType;if(!y2){y2=j2.namespace+"."+j2.name;}if(u2.entitySet[j].entityType===y2){v2=u2.entitySet[j].name;w2=u2.entitySet[j].entityType;break;}}E1={navigation:h2.name,entitySet:v2,entityType:w2};if(j2["com.sap.vocabularies.UI.v1.HeaderInfo"]&&w2){var x2=L1.getODataEntityType(w2,true)+"/com.sap.vocabularies.UI.v1.HeaderInfo";E1.headerInfoPath=x2;}if(j2["com.sap.vocabularies.UI.v1.QuickViewFacets"]&&w2){var z2=L1.getODataEntityType(w2,true)+"/com.sap.vocabularies.UI.v1.QuickViewFacets";E1.quickViewFacetODataPath=z2;}return E1;}}}return E1;};var E1=D1();var F1=false;var G1=false;var H1=false;var I1=[];var J1=C.getOwnerComponent();var K1=J1.getModel();var L1=K1.getMetaModel();if(E1){if(E1.quickViewFacetODataPath){var M1=L1.createBindingContext(E1.quickViewFacetODataPath,true);var N1=M1&&M1.getModel().getObject(M1.getPath());if(N1){F1=true;for(var j=0;j<N1.length;j++){var O1=N1[j];if(O1&&O1.Target&&O1.Target.AnnotationPath){if(O1.Target.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.FieldGroup")>-1){G1=true;}else if(O1.Target.AnnotationPath.indexOf("com.sap.vocabularies.Communication.v1.Contact")>-1){H1=true;I1.push(O1);}}}}}}if(F1){var P1,Q1;P1=L1.getODataEntitySet(k.getEntitySet());Q1=L1.getODataEntityType(P1.entityType);var R1=E1.headerInfoPath&&L1.createBindingContext(E1.headerInfoPath,true);var A1=x.mainNavigation;var S1=x.semanticObject;var T1,U1;if(S1&&A1){var V1=A1.getTarget&&A1.getTarget()||"";var W1=A1.getKey&&A1.getKey();if(W1){var X1=W1.split(S1+"-");T1=X1&&X1[1];if(S1&&T1){U1={"Target":V1,"SemanticObject":S1,"Action":T1};}if(x.semanticAttributes){U1.SemanticAttributes=x.semanticAttributes;for(var i in x.semanticAttributes){var Y1=x.semanticAttributes[i];if(Y1.indexOf("{\"__deferred\":")>-1){delete U1.SemanticAttributes[i];}if(Y1.indexOf("{\"__ref\":")>-1){delete U1.SemanticAttributes[i];}}if(U1.SemanticAttributes){var Z1=JSON.stringify(U1.SemanticAttributes);if(Z1&&Z1.length>1){U1.SemanticAttributes=Z1.substring(1,Z1.length-1);}}}}}var $1=L1.getODataProperty(Q1,B1);var _1=k&&k.mProperties&&k.mProperties.fieldSemanticObjectMap;var a2=new J({sourceClickedField:$1,sourceEntityType:Q1,showFieldGroup:G1,showContact:H1,ignoredFields:_1,navigationPath:E1.navigation,mainNavigation:U1});a2.setDefaultBindingMode("OneWay");var b2={};b2.oState=y1;b2._templateEventHandlers={};b2._templateEventHandlers.onSemanticObjectLinkNavigationPressed=C._templateEventHandlers.onSemanticObjectLinkNavigationPressed.bind(C._templateEventHandlers);b2._templateEventHandlers.onDataFieldWithIntentBasedNavigation=C._templateEventHandlers.onDataFieldWithIntentBasedNavigation.bind(C._templateEventHandlers);b2.onInit=function(){};b2.onExit=function(){};b2.onAfterRendering=function(){var C=this;var c2=C.oView;var f2=c2.getParent().getParent().getParent();f2.setBusy(false);};b2.connectToView=C.connectToView.bind(b2);var c2=sap.ui.view({async:true,preprocessors:{xml:{bindingContexts:{sourceEntitySet:L1.createBindingContext(L1.getODataEntitySet(k.getEntitySet(),true)),entitySet:L1.createBindingContext(L1.getODataEntitySet(E1.entitySet,true)),header:R1,facetCollection:M1},models:{sourceEntitySet:L1,entitySet:L1,header:L1,facetCollection:L1,quickView:a2,parameter:o.getParameterModelForTemplating()}}},controller:b2,type:V.XML,viewName:"sap.suite.ui.generic.template.fragments.QuickViewSmartForm",height:"100%"});x.show(undefined,undefined,undefined,c2);var d2=function(f2){var g2=f2.getSource();if(g2){var h2=g2.getParent().getParent().getParent();h2.setBusy(true);h2.setBusyIndicatorDelay(10);}};c2.attachBeforeRendering(d2.bind(this));var e2=function(f2){var g2=f2.getSource();if(g2){var h2=g2.byId("ownTitleArea");if(h2){var i2=g2.getParent();if(i2&&i2.getItems){var j2=i2.getItems()&&i2.getItems()[0];if(j2&&j2!=g2){j2.setVisible(false);}}}if(H1&&I1&&h2){G(g2,I1);}}};c2.attachAfterRendering(e2.bind(this));}else{x.show(z1,A1,undefined,undefined);}}function R(C,i){var x=C.getView&&C.getView().getBindingContext();var y1=x.getObject();var z1=C.getOwnerComponent().getModel().getMetaModel();var A1=z1.getODataEntitySet(C.getOwnerComponent().getEntitySet());var B1=z1.getODataEntityType(A1.entityType);var C1=B1["com.sap.vocabularies.Common.v1.SemanticKey"];var D1={};if(C1&&C1.length>0){for(var j=0;j<C1.length;j++){var E1=C1[j].PropertyPath;if(!D1[E1]){D1[E1]=[];D1[E1].push(y1[E1]);}}}else{for(var k in B1.key.propertyRef){var F1=B1.key.propertyRef[k].name;if(!D1[F1]){D1[F1]=[];D1[F1].push(y1[F1]);}}}return D1;}function U(k,i,x,y1){if(k[i].entitySet==x&&y1===k[i].navigationProperty&&k[i].navigation&&k[i].navigation["display"]&&(k[i].component&&k[i].component.settings&&k[i].component.settings.hideChevronForUnauthorizedExtNav===true)){return k[i].navigation.display.target;}else if(k[i].entitySet==x&&k[i].navigation&&k[i].navigation["display"]&&(k[i].component&&k[i].component.settings&&k[i].component.settings.hideChevronForUnauthorizedExtNav===true)){return k[i].navigation.display.target;}else if(k[i].pages){for(var j=0;j<(k[i].pages.length);j++){var z1=U(k[i].pages,j,x,y1);if(z1!==undefined&&z1!==null){return z1;}}}}function W(i){var j=i.getSource().getTable();var k=i.getSource().getEntitySet();var x=i.getSource().getTableBindingPath();var y1=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService&&sap.ushell.Container.getService("CrossApplicationNavigation");var z1=C.getOwnerComponent().getAppComponent().getConfig().pages;var A1=U(z1,0,k,x);if(A1!==undefined&&A1!==null&&y1){var B1=C.getOwnerComponent().getAppComponent().getManifestEntry("sap.app").crossNavigation.outbounds[A1];if(B1){var C1=B1.semanticObject;var D1=B1.action;var E1=C.getView().getModel("_templPriv");var F1=E1.getProperty("/generic/supportedIntents/");var G1=(x==="")?k:k+"::"+x;var H1=E1.getProperty("/generic/supportedIntents/"+C1+"/"+D1+"/"+G1);if(!H1){var I1={},J1;var K1=C.getOwnerComponent().getAppComponent();for(var L1 in B1.parameters){if(!q.isEmptyObject(B1.parameters[L1])){I1[L1]=B1.parameters[L1];}}if(C.getMetadata().getName()==='sap.suite.ui.generic.template.ObjectPage.view.Details'){J1=R(C,K1);}var M1={semanticObject:C1,action:D1};var N1=q.extend({},J1,I1);var O1={target:M1,params:N1};var P1=y1.isNavigationSupported([O1],K1);P1.done(function(Q1){var R1=E1.getProperty("/generic/supportedIntents/"+C1);if(!R1){F1[C1]={};F1[C1][D1]={};F1[C1][D1][G1]={"supported":Q1[0].supported};}else if(!R1[D1]){R1[D1]={};R1[D1][G1]={"supported":Q1[0].supported};}else{R1[D1][G1]={"supported":Q1[0].supported};}E1.updateBindings();if(Q1[0].supported&&h.isUiTable(j)){var S1=j.getRowActionTemplate();S1.getItems()[0].setVisible(true);j.setRowActionTemplate(S1);}});}}}}function X(i){h.setEnabledToolbarButtons(i.getSource());W(i);}function Y(i,j){if(i instanceof c){var k=i.getControlByKey("EditState");if(k instanceof S){var x=k.getSelectedKey();switch(x){case"1":j.filters.push(new F("IsActiveEntity","EQ",true));j.filters.push(new F("HasDraftEntity","EQ",false));break;case"2":j.filters.push(new F("IsActiveEntity","EQ",false));break;case"3":j.filters.push(new F("IsActiveEntity","EQ",true));j.filters.push(new F("SiblingEntity/IsActiveEntity","EQ",null));j.filters.push(new F("DraftAdministrativeData/InProcessByUser","NE",""));break;case"4":j.filters.push(new F("IsActiveEntity","EQ",true));j.filters.push(new F("SiblingEntity/IsActiveEntity","EQ",null));j.filters.push(new F("DraftAdministrativeData/InProcessByUser","EQ",""));break;default:var y1=new F({filters:[new F("IsActiveEntity","EQ",false),new F("SiblingEntity/IsActiveEntity","EQ",null)],and:false});if(j.filters[0]&&j.filters[0].aFilters){var z1=j.filters[0];j.filters[0]=new F([z1,y1],true);}else{j.filters.push(y1);}break;}}}}function Z(i,y1){var z1=i.getSource();var A1=z1.getTable();if(A1 instanceof T){var B1=A1.getColumns();for(var C1=0;C1<B1.length;C1++){if(B1[C1].getCustomData()[0].getValue()&&B1[C1].getCustomData()[0].getValue()["actionButton"]==="true"){B1[C1].setPopinDisplay("WithoutHeader");}}}var D1=i.getParameter("bindingParams");D1.parameters=D1.parameters||{};if(z1.data().allowSearch){D1.parameters["custom"]={"search":i.getSource().data().searchString};z1.data("allowSearch",false);}else if(z1.getBindingContext()&&z1.getBindingContext().getPath()===z1.data().objectPath){if(z1.getId()===z1.data().tableId){if(!!i.getSource().data().searchString){D1.parameters["custom"]={"search":i.getSource().data().searchString};}}}if(z1.data().allowSearchWorkListLight){D1.parameters["custom"]={"search":i.getSource().data().searchString};z1.data("allowSearchWorkListLight",false);if(!!i.getSource().data().searchString){D1.parameters["custom"]={"search":i.getSource().data().searchString};}}var E1=C.byId(z1.getSmartFilterId());if(!E1&&C.getMetadata().getName()==='sap.suite.ui.generic.template.ListReport.view.ListReport'){E1=C.byId("listReportFilter");O(C,E1,D1);var F1=E1.getBasicSearchValue();if(!!F1){D1.parameters["custom"]={"search":F1};}}Y(E1,D1);p(z1.getEntitySet(),D1);var G1=D1.parameters.select&&D1.parameters.select.split(",")||[];var H1=D1.parameters&&D1.parameters.expand&&D1.parameters.expand.split(",")||[];var I1=z1.getEntitySet();if(G1&&G1.length>0){var J1=z1.getModel().getMetaModel();var K1=J1.getODataEntitySet(I1);var L1={};var M1=J1.getODataEntityType(K1.entityType);for(var N1=0;N1<G1.length;N1++){var O1=G1[N1];if(O1){var L1=J1.getODataProperty(M1,O1);if(L1&&L1["com.sap.vocabularies.Common.v1.FieldControl"]&&L1["com.sap.vocabularies.Common.v1.FieldControl"].Path){var P1=L1["com.sap.vocabularies.Common.v1.FieldControl"].Path;if(P1!==" "&&D1.parameters.select.search(P1)===-1){D1.parameters.select+=","+P1;G1.push(P1);}}}}if(A1 instanceof T){var Q1=D1.sorter[0];if(Q1&&Q1.vGroup){var R1=m.getODataProperty(J1,M1,Q1.sPath);var S1=R1["com.sap.vocabularies.Common.v1.Text"]&&R1["com.sap.vocabularies.Common.v1.Text"].Path;if(S1){if(q.inArray(S1,G1)===-1){D1.parameters.select+=","+S1;G1.push(S1);}}}}var T1=K1["Org.OData.Capabilities.V1.DeleteRestrictions"];if(T1&&T1.Deletable&&T1.Deletable.Path&&D1.parameters.select.search(T1.Deletable.Path)===-1){D1.parameters.select+=","+T1.Deletable.Path;G1.push(T1.Deletable.Path);}var U1=K1["Org.OData.Capabilities.V1.UpdateRestrictions"];if(U1&&U1.Updatable&&U1.Updatable.Path&&D1.parameters.select.search(U1.Updatable.Path)===-1){D1.parameters.select+=","+U1.Updatable.Path;G1.push(U1.Updatable.Path);}var V1,W1;var M1=J1.getODataEntityType(K1.entityType);var X1=M1["com.sap.vocabularies.UI.v1.LineItem"]||[];var Y1=M1["com.sap.vocabularies.UI.v1.LineItem"];var Z1="com.sap.vocabularies.UI.v1.Criticality";var $1=z1.getCustomData();for(var x=0;x<$1.length;x++){if($1[x].getKey()&&$1[x].getKey()==="lineItemQualifier"){var _1=$1[x].getValue();if(_1){Y1=M1["com.sap.vocabularies.UI.v1.LineItem#"+_1];Z1="com.sap.vocabularies.UI.v1.Criticality#"+_1;break;}}}if(Y1&&Z1&&Y1[Z1]&&Y1[Z1].Path){G1.push(Y1[Z1].Path);D1.parameters.select+=","+Y1[Z1].Path;}for(var N1=0;N1<X1.length;N1++){if(X1[N1].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"){V1=J1.getODataFunctionImport(X1[N1].Action.String,true);if(V1){W1=J1.getObject(V1);if(W1["sap:action-for"]!==" "&&W1["sap:applicable-path"]!==" "&&D1.parameters.select.search(W1["sap:applicable-path"])===-1){D1.parameters.select+=","+W1["sap:applicable-path"];G1.push(W1["sap:applicable-path"]);}}}if(X1[N1].RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"||X1[N1].RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath"){var a2,b2;if(X1[N1].Value&&X1[N1].Value.Path){a2=J1.getODataProperty(M1,X1[N1].Value.Path);if(a2){b2=a2["sap:text"]||(a2["com.sap.vocabularies.Common.v1.Text"]||"").Path||"";}if(!b2){b2=X1[N1].Value.Path;}if(G1.indexOf(b2)===-1){G1.push(b2);D1.parameters.select=D1.parameters.select+","+b2;}}}if(X1[N1].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){if(X1[N1].Target&&X1[N1].Target.AnnotationPath){var c2=X1[N1].Target.AnnotationPath;var d2=c2.split("@")[1];var e2=M1[d2];if(e2&&e2.MeasureAttributes){if(e2.MeasureAttributes[0]&&e2.MeasureAttributes[0].DataPoint&&e2.MeasureAttributes[0].DataPoint.AnnotationPath){var f2=e2.MeasureAttributes[0].DataPoint.AnnotationPath.split("@")[1];var g2=M1[f2];if(g2){for(var h2 in g2){if(g2[h2]&&g2[h2].Path&&G1.indexOf(g2[h2].Path)===-1){D1.parameters.select=D1.parameters.select+","+g2[h2].Path;G1.push(g2[h2].Path);}if(h2==="CriticalityCalculation"&&g2.CriticalityCalculation){for(var i2 in g2.CriticalityCalculation){if(g2.CriticalityCalculation[i2].Path&&G1.indexOf(g2.CriticalityCalculation[i2].Path)===-1){D1.parameters.select=D1.parameters.select+","+g2.CriticalityCalculation[i2].Path;G1.push(g2.CriticalityCalculation[i2].Path);}}}}}}}if(e2&&e2.Measures){if(e2.Measures[0]&&e2.Measures[0].PropertyPath&&G1.indexOf(e2.Measures[0].PropertyPath)===-1){D1.parameters.select=D1.parameters.select+","+e2.Measures[0].PropertyPath;G1.push(e2.Measures[0].PropertyPath);}}}}}var j2=h.getBreakoutActionsForTable(z1,C);var k2=h.getBreakoutActionsFromManifest(A1.getModel());for(var l2 in k2){if(q.inArray(k2[l2].id,j2)!==-1){if(k2[l2].requiresSelection&&k2[l2].applicablePath){if(D1.parameters.select.search(k2[l2].applicablePath)===-1){D1.parameters.select+=","+k2[l2].applicablePath;G1.push(k2[l2].applicablePath);}}}}}K(G1,H1);var m2=s.oDraftController.getDraftContext();if(m2.isDraftEnabled(I1)&&m2.isDraftRoot(I1)){if(m2.hasDraftAdministrativeData(I1)){if(G1&&G1.length>0){if(G1.indexOf("DraftAdministrativeData")===-1){G1.push("DraftAdministrativeData");D1.parameters.select=D1.parameters.select+",DraftAdministrativeData";}}if(H1.indexOf("DraftAdministrativeData")===-1){H1.push("DraftAdministrativeData");}}}if(H1.length>0){D1.parameters.expand=H1.join(",");}var n2=z1.getCustomData();var o2={};for(var k=0;k<n2.length;k++){o2[n2[k].getKey()]=n2[k].getValue();}var p2=z1.fetchVariant();if(!o2.TemplateSortOrder&&y1&&y1.determineSortOrder){o2.TemplateSortOrder=y1.determineSortOrder();}if((!p2||!p2.sort)&&A1 instanceof T&&o2.TemplateSortOrder){var q2=o2.TemplateSortOrder.split(", ");for(var j=0;j<q2.length;j++){var r2=q2[j].split(" ");if(r2.length>1){D1.sorter.push(new b(r2[0],r2[1]==="true"));}else{D1.sorter.push(new b(r2[0]));}}}if(A1 instanceof T){var Q1=D1.sorter[0];if(Q1&&Q1.vGroup){var s2;for(var C1=0;C1<B1.length;C1++){for(var t2=0;t2<B1[C1].getCustomData().length;t2++){var o2=B1[C1].getCustomData()[t2];if(o2.getProperty("key")==="p13nData"&&o2.getValue("p13nData").leadingProperty&&o2.getValue("p13nData").leadingProperty===Q1.sPath){s2=B1[C1].getHeader().getProperty("text");Q1.fnGroup=g(Q1.sPath,s2);return;}}}}}}function $(i,j,k){k=k||i.getBindingContext();h.processDataLossConfirmationIfNonDraft(function(){if(i.data("CrossNavigation")){I(i,k,j.oSmartFilterbar);return;}var x=h.getOwnerControl(i);n(i);h.navigateFromListItem(k,x);},q.noop,j);}function _(i){s.oApplication.performAfterSideEffectExecution(function(){if(s.oApplication.getBusyHelper().isBusy()){q.sap.log.info("Ignore incorrect selection, since app is busy anyway");return;}var j=i?"ST_GENERIC_MULTIPLE_ITEMS_SELECTED":"ST_GENERIC_NO_ITEM_SELECTED";M.error(h.getText(j),{styleClass:h.getContentDensityClass()});});}function a1(i,j){var k=i.getParent().getParent().getTable();var x=h.getSelectedContexts(k);if(x.length===1){h.processDataLossConfirmationIfNonDraft(function(){if(i.data("CrossNavigation")){I(i,x[0],j.oSmartFilterbar);return;}n(i);h.navigateFromListItem(x[0],k);},q.noop,j);}else{_(x.length);}}function b1(j){var k,x,i,y1;var z1=C.getOwnerComponent(),A1=z1.getAppComponent().getConfig(),B1=j.getSource().getCustomData();if(A1.settings&&A1.settings.flexibleColumnLayout){M.error(h.getText("ST_NAV_ERROR_NO_COMBINATION_WITH_FCL"),{styleClass:h.getContentDensityClass()});return;}if(B1.length===0){return;}for(i=0,y1=B1.length;i<y1;i++){if(B1[i].getProperty("key")==="Target"){k=B1[i].getProperty("value");break;}}if(!k){M.error(h.getText("ST_NAV_ERROR_NAV_PROPERTY_NOT_DETERMINED"),{styleClass:h.getContentDensityClass()});return;}var C1=z1.getModel(),D1=C1.getMetaModel();var E1=j.getSource().getBindingContext().getPath(),F1=E1.slice(1,E1.indexOf("(")),G1=E1.slice(E1.indexOf("(")),H1=z1.getEntitySet(),I1=false;if(H1!==F1){H1=F1;I1=true;}var J1=D1.getODataEntitySet(H1),K1=D1.getODataEntityType(J1.entityType),L1=h.getNavigationKeyProperties(H1);var M1=o.getCurrentKeys();x="/"+L1[L1.length-1].entitySet+"("+M1[L1.length]+")";if(I1){x=x.replace("(undefined)",G1);}var N1=D1.getODataAssociationEnd(K1,k),O1=D1.getODataEntityType(N1.type),P1,Q1;if(O1){P1=O1.namespace+"."+O1.name;}var R1=D1.getODataEntityContainer().entitySet;for(i=0,y1=R1.length;i<y1;i++){if(R1[i].entityType===P1){Q1=R1[i].name;break;}}if(!Q1){M.error(h.getText("ST_NAV_ERROR_TARGET_ENTITYSET_NOT_DETERMINED"),{styleClass:h.getContentDensityClass()});return;}var S1=h.getNavigationKeyProperties(Q1),T1=s.oNavigationController,U1;if(o.isDraftEnabled()){U1={"$expand":"DraftAdministrativeData"};}else{U1={"$expand":""};}C1.read(x+"/"+k,{urlParameters:U1,success:function(V1){var W1=h.mergeNavigationKeyPropertiesWithValues(S1,V1);T1.navigateToContext(W1,null,false);},error:function(V1){M.error(h.getText("ST_NAV_ERROR_MODEL_READ_FAILED"),{styleClass:h.getContentDensityClass()});return;}});}function c1(i,j){var k=i.getSource();var x=h.getOwnerControl(k);var y1=h.getSelectedContexts(x);if(y1.length>1){_(y1.length);}else{h.processDataLossConfirmationIfNonDraft(function(){var z1={action:k.data("Action"),semanticObject:k.data("SemanticObject")};N(z1,y1[0],j.oSmartFilterbar||undefined,j.oSmartTable||undefined);},q.noop,j);}}function d1(i,j){var k=i.getSource();var x=k.getParent().getBindingContext();var y1=k.data("SemanticObject");var z1=k.data("Action");h.processDataLossConfirmationIfNonDraft(function(){var A1={action:z1,semanticObject:y1};N(A1,x,j.oSmartFilterbar||undefined,j.oSmartTable||undefined);},q.noop,j);}function e1(i,j,k){h.processDataLossConfirmationIfNonDraft(function(){var x={action:j.Action,semanticObject:j.SemanticObject};N(x,i,k.oSmartFilterbar,k.oSmartTable);},q.noop,k);}function f1(i,j,k){var x=h.getElementCustomData(i);var y1=h.getSelectedContexts(j);var z1=!(x.RequiresContext&&x.RequiresContext==="false");if(z1&&y1.length!==1){_(y1.length);}else{var A1=z1?y1[0]:null;e1(A1,x,k);}}function g1(i,j){h.processDataLossConfirmationIfNonDraft(function(){var k={semanticObject:i.data("SemanticObject"),action:i.data("Action")};var x=i.getParent().getBindingContext();N(k,x,j.oSmartFilterbar,j.oSmartTable);},q.noop,j);}function h1(i,j){var k=i.getSource();var x=h.getOwnerControl(k).getParent();var y1=[k.getBindingContext()];var z1=h.getElementCustomData(k);var A1=x.getTableBindingPath();h.triggerAction(y1,A1,z1,x,j);}function i1(i,j){var k=C.getView();var x=j?h.getSelectedContexts(j):[k.getBindingContext()];if(x.length===0){_(x.length);}else{var y1=i.getSource();var z1=h.getElementCustomData(y1);var A1=j?j.getTableBindingPath():k.getBindingPath();h.triggerAction(x,A1,z1,j);}}function j1(i,j){var k,x="";var y1=h.getOwnerControl(i.getSource());var z1=i.getSource().data();var A1=h.getSelectedContexts(y1);if(h.isSmartTable(y1)){k=y1.getTable();x=y1.getTableBindingPath();}else if(h.isSmartChart(y1)){k=y1.getChart();x=y1.getChartBindingPath();}var B1=l1(A1,z1);if(B1.inApplicableCount>0&&(h.isSmartTable(y1)&&((k.getMode&&k.getMode()==="MultiSelect")||(k.getSelectionMode&&k.getSelectionMode()==="MultiToggle")))){var C1=h.getText("ST_GENERIC_WARNING_TEXT",[B1.inApplicableCount]);B1.warningText=C1;var D1={functionImportPath:z1.Action,contexts:B1.aApplicableContexts,sourceControl:k,label:z1.Label,operationGrouping:z1.InvocationGrouping,navigationProperty:"",sBindingPath:x,oState:j};var E1=k1(y1);var F1=E1.getModel("Action");F1.setData(D1);var G1=new sap.ui.model.json.JSONModel(B1);E1.setModel(G1,"list");var H1=E1.getModel("list");H1.setData(B1);E1.open();}else{m1({functionImportPath:z1.Action,contexts:A1,sourceControl:k,label:z1.Label,operationGrouping:z1.InvocationGrouping,navigationProperty:""},j,x);}}function k1(i){return h.getDialogFragment("sap.suite.ui.generic.template.fragments.ActionConfirmation",{onCancel:function(j){var k=j.getSource().getParent();k.close();},onContinue:function(j){var k=j.getSource().getParent();var x=j.getSource().getParent().getModel("Action").getData();m1({functionImportPath:x.functionImportPath,contexts:x.contexts,sourceControl:x.sourceControl,label:x.label,operationGrouping:x.operationGrouping,navigationProperty:x.navigationProperty},x.oState,x.sBindingPath);k.close();}},"Action");}function l1(j,k){var x,y1,z1,A1;var B1=C.getView().getModel();var C1=B1.getMetaModel();if(j&&j.length>0){z1=j[0].sPath.substring(1,j[0].sPath.indexOf('('));A1=C1.getODataEntitySet(z1);}if(A1){var D1=k.Action.split("/")[1];var E1=[],F1=[];var G1={aInApplicableItems:undefined,inApplicableCount:0,dialogTitle:k.Label,warningText:undefined,aApplicableContexts:undefined};if(D1){y1=C1.getODataFunctionImport(D1)["sap:applicable-path"];}for(var i=0;i<j.length;i++){x=B1.getObject(j[i].getPath());if(!x[y1]){G1.inApplicableCount++;var H1=C1.getODataEntityType(C1.getODataEntitySet(z1).entityType);var I1=H1["com.sap.vocabularies.UI.v1.HeaderInfo"].Title.Value.Path;E1.push({sKey:x[I1]});}else{F1.push(j[i]);}}G1.aInApplicableItems=E1;G1.aApplicableContexts=F1;}return G1;}function m1(i,j,k){var x;h.processDataLossConfirmationIfNonDraft(function(){s.oCRUDManager.callAction({functionImportPath:i.functionImportPath,contexts:i.contexts,sourceControl:i.sourceControl,label:i.label,operationGrouping:i.operationGrouping,navigationProperty:i.navigationProperty},j).then(function(y1){if(y1&&y1.length&&y1.length===1){x=y1[0];if(x.response&&x.response.context&&(!x.actionContext||x.actionContext&&x.response.context.getPath()!==x.actionContext.getPath())){s.oViewDependencyHelper.setMeToDirty(C.getOwnerComponent(),k);}}});},q.noop,j,"Proceed");}var n1;var o1;function p1(i){n1=true;o1=i;var j=h.getDialogFragment("sap.suite.ui.generic.template.fragments.DiscardDraftPopover",{onDiscardConfirm:function(){q.sap.log.info("Draft cancellation confirmed");if(!n1){q.sap.log.info("Draft popover no longer active -> Ignore.");return;}o1();}},"discard");return j;}function q1(i,j){var k=new Promise(function(y1,z1){i.then(function(A1){q.sap.log.info("Active information for current draft has been read. Start discarding the draft");var B1=A1&&A1.getObject();var C1=B1&&B1.IsActiveEntity;var D1=C1?s.oApplication.getTargetAfterCancelPromise(A1):Promise.resolve();D1.then(function(E1){var F1=s.oCRUDManager.deleteEntity(false,true);if(!E1){s.oApplication.prepareDeletionOfCreateDraft(F1);}F1.then(function(){q.sap.log.info("Draft was discarded successfully");j();s.oViewDependencyHelper.setRootPageToDirty();s.oViewDependencyHelper.unbindChildren(C.getOwnerComponent());if(E1){q.sap.log.info("Navigate to active entityy");s.oNavigationController.navigateToContext(E1,null,true,1);}y1();},z1);},z1);},z1);});var x={discardPromise:k};o.fire(C,"AfterCancel",x);s.oApplication.getBusyHelper().setBusy(k);k.catch(j);return k;}function r1(i){var j=l();s.oApplication.performAfterSideEffectExecution(function(){if(s.oApplication.getBusyHelper().isBusy()){q.sap.log.info("Ignore discarding confirmation as app is already busy");return;}var k=C.getView().getBindingContext();var x=k.getObject();var y1=x.hasOwnProperty("HasActiveEntity")&&!k.getProperty("IsActiveEntity")&&!k.getProperty("HasActiveEntity");var z1=k&&k.getPath();var A1=s.oApplication.getIsDraftModified(z1);if(A1){var B1=i.getSource();var C1;var D1=function(){n1=false;C1.close();q.sap.log.info("Draft popover closed");};C1=p1(q1.bind(null,j,D1));var E1=C1.getModel("discard");E1.setProperty("/placement",sap.m.PlacementType.Top);E1.setProperty("/isCreateDraft",y1);C1.openBy(B1);}else{q1(j,q.noop);}});}function s1(){if(o.getViewLevel()!==1||!o.isDraftEnabled()){q.sap.log.warning("Discard draft only possible on root level of draft enabled entities");return Promise.reject();}var i=C.getOwnerComponent();if(!(o.isComponentActive()&&i.getModel("ui").getProperty("/editable"))){q.sap.log.warning("Discard draft only possible in edit mode");return Promise.reject();}var j=l();return q1(j,q.noop);}function t1(i,j,k){if(i.data("CrossNavigation")){I(i,i.getBindingContext(),k);return new Promise(function(C1){C1();});}var x=h.getOwnerControl(i);var y1=x.getTableBindingPath();var z1=C.getOwnerComponent();var A1={}||(k&&C.getPredefinedValuesForCreateExtension(k));var B1=function(C1){var D1=s.oCRUDManager.addEntry(x,C1).then(function(E1){if(!j){s.oNavigationController.navigateToContext(E1.newContext,E1.tableBindingPath,false,4);s.oApplication.getBusyHelper().getUnbusy().then(s.oViewDependencyHelper.setMeToDirty.bind(null,z1,y1));}else{h.refreshSmartTable(x);s.oApplicationController.executeSideEffects(z1.getBindingContext(),[],[y1]);}});D1.catch(q.noop);return D1;};if(A1 instanceof Promise){return A1.then(B1);}else{return B1(A1);}}function u1(i){var j=h.getOwnerControl(i.getSource());var k=h.getSelectedContexts(j);if(k&&k.length>0){var x=y(k);var y1=v(j);var z1=y1.getModel("delete");x.then(function(x){z1.setData(x.mJSONData);y1.open();});}else{M.error(h.getText("ST_GENERIC_NO_ITEM_SELECTED"),{styleClass:h.getContentDensityClass()});}}function v1(i){var j;if(i.getSource().data("Location")==="Header"){j=i.getSource().getParent().getAggregation("items")[0];}else if(i.getSource().data("Location")==="Section"){j=i.getSource().getParent().getElements()[1];}else if(i.getSource().data("Location")==="SmartTable"){j=i.getSource().getParent().getAggregation("items")[0];}else{j=i.getSource().getParent().getParent().getParent().getParent().getParent().getAggregation("items")[1];}j.bindElement(i.getSource().getBindingContext().getPath());j.openBy(i.getSource());}function w1(i){var j=i.getSource();var k=i.getParameter("bindingParams");k.parameters=k.parameters||{};var x=C.byId("listReportFilter");O(C,x,k);x1(i,j,k);}function x1(i,j,k){var x=C.byId("listReportFilter");Y(x,k);var y1=j.getEntitySet();p(y1,k);}var z=t.testable(z,"fnBuildSelectionVariantForNavigation");var E=t.testable(E,"fnEvaluateParameters");var N=t.testable(N,"fnNavigateIntent");var G=t.testable(G,"fnHideTitleArea");return{onDataReceived:X,onBeforeRebindTable:Z,onListNavigate:$,onShowDetails:a1,onEditNavigateIntent:I,onSemanticObjectLinkPopoverLinkPressed:L,onDataFieldWithNavigationPath:b1,onDataFieldForIntentBasedNavigation:c1,onDeterminingDataFieldForIntentBasedNavigation:f1,onDeterminingDataFieldForAction:i1,onInlineDataFieldForIntentBasedNavigation:g1,onDataFieldWithIntentBasedNavigation:d1,onInlineDataFieldForAction:h1,onSmartFieldUrlPressed:r,onBreadCrumbUrlPressed:u,onCallActionFromToolBar:j1,onDiscardDraft:r1,discardDraftWithoutDialog:s1,addEntry:t1,deleteEntries:u1,onContactDetails:v1,onSemanticObjectLinkNavigationTargetObtained:Q,onSemanticObjectLinkNavigationPressed:P,onBeforeRebindChart:w1};}return B.extend("sap.suite.ui.generic.template.lib.CommonEventHandlers",{constructor:function(C,o,s,h){q.extend(this,f(C,o,s,h));}});});
