jQuery.sap.declare('sap.ui.mdc.library-all');if(!jQuery.sap.isDeclared('sap.ui.mdc.FilterBar.designtime')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.FilterBar.designtime');sap.ui.define("sap/ui/mdc/FilterBar.designtime",[],function(){"use strict";return{aggregations:{}};},false);};if(!jQuery.sap.isDeclared('sap.ui.mdc.Table.designtime')){jQuery.sap.declare('sap.ui.mdc.Table.designtime');sap.ui.define("sap/ui/mdc/Table.designtime",[],function(){"use strict";return{aggregations:{columns:{actions:{addODataProperty:"addColumn",move:"moveColumns",remove:"removeColumn"}},actions:{},_content:{ignore:true}},name:"{name}",description:"{description}",properties:{context:{ignore:true},tableBindingPath:{ignore:true},type:{ignore:false},interactionType:{ignore:false},filterBarId:{ignore:true},enabled:{ignore:true}}};},false);};if(!jQuery.sap.isDeclared('sap.ui.mdc.base.FilterFieldRenderer')){jQuery.sap.declare('sap.ui.mdc.base.FilterFieldRenderer');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.ui.core.IconPool');sap.ui.define("sap/ui/mdc/base/FilterFieldRenderer",['jquery.sap.global','sap/ui/core/Renderer','sap/ui/core/IconPool'],function(q,R,I){"use strict";I.insertFontFaceStyle();var F=R.extend("sap.ui.mdc.base.FilterFieldRenderer");F.render=function(r,c){var a={content:c.getContent(),editable:c.getEditable()};r.write("<div");r.writeControlData(c);r.addClass("sapUiMdcBaseFilterField");r.writeClasses();r.addStyle("display","inline-block");r.addStyle("width",c.getWidth());r.writeStyles();r.write(">");if(a.content){r.renderControl(a.content);}r.write("</div>");};return F;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.base.FilterOperatorConfig')){jQuery.sap.declare('sap.ui.mdc.base.FilterOperatorConfig');jQuery.sap.require('sap.ui.base.Object');jQuery.sap.require('sap.ui.model.FilterOperator');jQuery.sap.require('sap.ui.model.Filter');sap.ui.define("sap/ui/mdc/base/FilterOperatorConfig",["sap/ui/base/Object","sap/ui/model/FilterOperator","sap/ui/model/Filter"],function(B,M,F){"use strict";var a=B.extend("sap.ui.mdc.base.FilterOperatorConfig",{constructor:function(){B.apply(this);this.mOperators=jQuery.extend(true,{},a._mOperators);this.mTypes=jQuery.extend(true,{},a._mTypes);this.mOpsForType=jQuery.extend(true,{},a._mOpsForType);}});sap.ui.model.type.String.extend("sap.ui.model.type.Key",{});a._mTypes={"base":undefined,"string":"base","numeric":"base","date":"base","time":"base","boolean":"base","int":"numeric","float":"numeric","sap.ui.model.type.Boolean":"boolean","sap.ui.model.type.Date":"date","sap.ui.model.type.FileSize":"string","sap.ui.model.type.Float":"float","sap.ui.model.type.Integer":"int","sap.ui.model.type.String":"string","sap.ui.model.type.Time":"time","sap.ui.model.odata.type.Boolean":"boolean","sap.ui.model.odata.type.Byte":"int","sap.ui.model.odata.type.Date":"date","sap.ui.model.odata.type.DateTime":"datetime","sap.ui.model.odata.type.DateTimeOffset":"datetime","sap.ui.model.odata.type.Decimal":"float","sap.ui.model.odata.type.Double":"float","sap.ui.model.odata.type.Float":"float","sap.ui.model.odata.type.Guid":"string","sap.ui.model.odata.type.Int":"int","sap.ui.model.odata.type.Int16":"int","sap.ui.model.odata.type.Int32":"int","sap.ui.model.odata.type.Int64":"int","sap.ui.model.odata.type.Raw":"string","sap.ui.model.odata.type.SByte":"int","sap.ui.model.odata.type.Single":"int","sap.ui.model.odata.type.String":"string","sap.ui.model.odata.type.Time":"time","sap.ui.model.odata.type.TimeOfDay":"time","Edm.Boolean":"sap.ui.model.odata.type.Boolean","Edm.Byte":"sap.ui.model.odata.type.Byte","Edm.Date":"sap.ui.model.odata.type.Date","Edm.DateTime":"sap.ui.model.odata.type.DateTime","Edm.DateTimeOffset":"sap.ui.model.odata.type.DateTimeOffset","Edm.Decimal":"sap.ui.model.odata.type.Decimal","Edm.Double":"sap.ui.model.odata.type.Double","Edm.Float":"sap.ui.model.odata.type.Single","Edm.Guid":"sap.ui.model.odata.type.Guid","Edm.Int16":"sap.ui.model.odata.type.Int16","Edm.Int32":"sap.ui.model.odata.type.Int32","Edm.Int64":"sap.ui.model.odata.type.Int64","Edm.SByte":"sap.ui.model.odata.type.SByte","Edm.Single":"sap.ui.model.odata.type.Single","Edm.String":"sap.ui.model.odata.type.String","Edm.Time":"sap.ui.model.odata.type.Time","Edm.TimeOfDay":"sap.ui.model.odata.type.TimeOfDay"};Object.freeze(a._mTypes);a._mOpsForType={"base":{operators:["Contains","EQ","BT","StartsWith","EndsWith","LE","LT","GE","GT","NE"],defaultOperator:"EQ"},"string":{operators:["EEQ","Contains","EQ","BT","StartsWith","EndsWith","LE","LT","GE","GT","NE"],defaultOperator:"StartsWith"},"date":{operators:["EQ","BT","LE","LT","GE","GT","NE"]},"numeric":{operators:["EQ","BT","LE","LT","GE","GT","NE"]},"time":{operators:["EQ","BT","LE","LT","GE","GT"]},"boolean":{operators:["EQ","NE"]}};Object.freeze(a._mOpsForType);a._mOperators={};var m=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");sap.ui.getCore().attachLocalizationChanged(function(){m=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");});function g(k,T){var h=k+(T?"."+T:""),i;if(m.hasText(h)){i=m.getText(h);}else if(T){i=m.getText(k);}else{i=h;}return i;}a._mInstances={};a._mClasses={undefined:a};a.getFor=function(o){var k=o&&o.getId();var h=a._mInstances[k];if(!h){var i=o&&o.getMetadata();var C=a._mClasses[i&&i.getName()];while(!C){i=i.getParent();C=a._mClasses[i&&i.getName()];}h=new C();a._mInstances[k]=h;}return h;};a.registerFor=function(h,o){a._mClasses[h]=o;};a.prototype._getConfig=function(T,C){var o=this.mOpsForType[T];if(o){return o[C];}};a.prototype._findConfig=function(T,C){if(typeof T==="object"){T=T.getMetadata().getName();}var o;while(T&&!(o=this._getConfig(T,C))){T=this.getParentType(T);}return o;};a.prototype.getOperatorsForType=function(T){return this._findConfig(T,"operators");};a.prototype.getDefaultOperator=function(T){return this._findConfig(T,"defaultOperator");};a.prototype.getMatchingOperators=function(T,v){var o=this.getOperatorsForType(T);return this._getMatchingOperators(o,v);};a.prototype._getMatchingOperators=function(o,v){var r=[],O;o.some(function(h){O=this.getOperator(h);if(O&&O.test(v)){r.push(O);}}.bind(this));return r;};a.prototype.addType=function(T,h){if(this.mTypes[T]){throw new Error("Type already exists: "+T);}else{this.mTypes[T]=h;}};a.prototype.getParentType=function(T){return this.mTypes[T];};a.prototype.addOperatorsToType=function(T,o){var h=T;if(typeof h==="object"){h=h.getMetadata().getName();}var O=this.getOperatorsForType(T);if(!O){O=[];}if(!(typeof o==="string")){O=O.concat(o);}else{O.push(o);}this.mOpsForType[h]=this.mOpsForType[h]||{};this.mOpsForType[h].operators=O;};a.prototype.addOperator=function(o){a._addOperatorTo(o,this.mOperators);};a._addOperatorTo=function(o,O){var C=O;if(!o.name){jQuery.sap.log.warning("Operator configuration expects a name property");}if(!o.filterOperator&&!o.getModelFilter){jQuery.sap.log.error("Operator configuration for "+o.name+" needs a default filter operator from sap.ui.model.FilterOperator or the function getModelFilter");return;}if(!D){if(C[o.name]&&!C[o.name].custom){jQuery.sap.log.warning("Duplicate Type Configuration: "+o.name+". A default type cannot be extended or overwritten.");return;}o.custom=true;}else{jQuery.sap.log.debug("Operator Configuration for "+o.name+" defined as default configuration");}o=e(o);if(D){}O[o.name]=o;};function e(o){var i;var T=o.textKey||"operators."+o.name;o.longText=o.longText||g(T+".longText")||"";o.tokenText=o.tokenText||g(T+".tokenText")||"";if(o.tokenParse){if(o.tokenText){o.tokenParse=o.tokenParse.replace(/#tokenText#/g,o.tokenText);var C=o.valueTypes.length;for(i=0;i<C;i++){var r=o.paramTypes?o.paramTypes[i]:o.valueTypes[i];o.tokenParse=o.tokenParse.replace(new RegExp("\\$"+i,"g"),r);}o.tokenParseRegExp=new RegExp(o.tokenParse,"i");}}else if(o.tokenText){o.tokenParseRegExp=new RegExp(o.tokenText,"i");}if(o.tokenFormat){if(o.tokenText){o.tokenFormat=o.tokenFormat.replace(/\#tokenText\#/g,o.tokenText);}}else if(o.tokenText){o.tokenFormat=o.tokenText;}o.format=o.format||f.bind(o);o.parse=o.parse||p.bind(o);o.test=o.test||t.bind(o);o.getCondition=o.getCondition||d.bind(o);o.getModelFilter=o.getModelFilter||b.bind(o);o._setOwner=s.bind(o);o.getTypeText=g.bind(o);o._createLocalType=c.bind(o);o.isEmpty=o.isEmpty||_.bind(o);return o;}function s(o){this.oFilterOperatorConfig=o;return this;}function b(C){var o=this.oFilterOperatorConfig.getOperator(C.operator);return new F({path:C.fieldPath,operator:o.filterOperator,value1:C.values[0],value2:C.values[1]});}function _(C,T){var h=false;for(var i=0;i<this.valueTypes.length;i++){var v=C.values[i];if(v===null||v===undefined||v===""){h=true;break;}}return h;}function f(V,C,T){var h=this.tokenFormat,j=this.valueTypes.length;for(var i=0;i<j;i++){var v=V[i]!==undefined&&V[i]!==null?V[i]:"";if(this.valueTypes[i]!=="self"){T=this._createLocalType(this.valueTypes[i]);}var r=T?T.formatValue(v,"string"):v;h=h.replace(new RegExp("\\$"+i,"g"),r);}return h;}function p(T,o){var h=T.match(this.tokenParseRegExp);var r;if(h){r=[];for(var i=0;i<this.valueTypes.length;i++){if(this.valueTypes[i]!=="self"){o=this._createLocalType(this.valueTypes[i]);}try{var v=o?o.parseValue(h[i+1],"string"):h[i+1];if(o){o.validateValue(v);if(o.oConstraints&&o.oConstraints.toUpperCase===true){v=v.toUpperCase?v.toUpperCase():v;}}r.push(v);}catch(j){jQuery.sap.log.warning(j.message);throw new sap.ui.base.Exception(j.message);}}}return r;}function c(T){if(!this._oType){jQuery.sap.require(T);var o=jQuery.sap.getObject(T);this._oType=new o();}return this._oType;}function t(T,o){var h=this.tokenParseRegExp.test(T);if(h&&o){var v=this.parse(T,o);h=v.length==this.valueTypes.length;}return h;}function d(T,o){if(this.test(T,o)){var v=this.parse(T,o);return{operator:this.name,values:v};}return null;}a.prototype.getOperator=function(o){var O=this.mOperators[o];return O?O._setOwner(this):undefined;};D=true;a._addOperatorTo({name:"EEQ",showInSuggest:false,filterOperator:M.EQ,tokenParse:"^==(.*)$",tokenFormat:"$1 ($0)",valueTypes:["self"],longText:"EEQ",displayFormats:{DescriptionValue:"$1 ($0)",ValueDescription:"$0 ($1)",Description:"$1",Value:"$0"},format:function(v,C,T){var h=this.tokenFormat,j=this.valueTypes.length+1,r;var k=T.oFormatOptions&&T.oFormatOptions.displayFormat?T.oFormatOptions.displayFormat:"DescriptionValue";h=this.displayFormats[k];if(!v[1]){h=this.displayFormats["Value"];j=1;}for(var i=0;i<j;i++){r=v[i]||"";h=h.replace(new RegExp("\\$"+i,"g"),r);}return h;}},a._mOperators);a._addOperatorTo({name:"EQ",filterOperator:M.EQ,tokenParse:"^=([^=].*)$",tokenFormat:"=$0",valueTypes:["self"]},a._mOperators);a._addOperatorTo({name:"BT",filterOperator:M.BT,tokenParse:"^(.+)\\.\\.\\.(.+)$",tokenFormat:"$0...$1",valueTypes:["self","self"]},a._mOperators);a._addOperatorTo({name:"LT",filterOperator:M.LT,tokenParse:"^<(.*)$",tokenFormat:"<$0",valueTypes:["self"]},a._mOperators);a._addOperatorTo({name:"GT",filterOperator:M.GT,tokenParse:"^>(.*)$",tokenFormat:">$0",valueTypes:["self"]},a._mOperators);a._addOperatorTo({name:"LE",filterOperator:M.LE,tokenParse:"^<=(.*)$",tokenFormat:"<=$0",valueTypes:["self"]},a._mOperators);a._addOperatorTo({name:"GE",filterOperator:M.GE,tokenParse:"^>=(.*)$",tokenFormat:">=$0",valueTypes:["self"]},a._mOperators);a._addOperatorTo({name:"StartsWith",filterOperator:M.StartsWith,tokenParse:"^([^\*].*)\\*$",tokenFormat:"$0*",valueTypes:["self"]},a._mOperators);a._addOperatorTo({name:"EndsWith",filterOperator:M.EndsWith,tokenParse:"^\\*(.*[^\*])$",tokenFormat:"*$0",valueTypes:["self"]},a._mOperators);a._addOperatorTo({name:"Contains",filterOperator:M.Contains,tokenParse:"^\\*(.*)\\*$",tokenFormat:"*$0*",valueTypes:["self"]},a._mOperators);a._addOperatorTo({name:"NE",filterOperator:M.NE,tokenParse:"^!=(.+)$",tokenFormat:"!=$0",valueTypes:["self"],exclude:true},a._mOperators);var D=false;Object.freeze(a._mOperators);return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.base.FilterToken')){jQuery.sap.declare('sap.ui.mdc.base.FilterToken');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.ManagedObject');jQuery.sap.require('sap.m.Token');jQuery.sap.require('sap.m.Tokenizer');sap.ui.define("sap/ui/mdc/base/FilterToken",['jquery.sap.global','sap/ui/base/ManagedObject','sap/m/Token','sap/m/Tokenizer'],function(q,M,T,a){"use strict";var F=T.extend("sap.ui.mdc.base.FilterToken",{metadata:{library:"sap.ui.mdc",properties:{changeable:{type:"boolean",defaultValue:false}},events:{tokenChanged:{parameters:{text:{type:"string"}}}}}});F.prototype.init=function(){T.prototype.init.apply(this);this.bAllowTextSelection=true;this._bEditing=false;};F.prototype.setParent=function(p){if(p instanceof a){p.bAllowTextSelection=true;}M.prototype.setParent.apply(this,arguments);};F.prototype.setText=function(v){T.prototype.setText.call(this,v,true);this.getDomRef()&&(this.getDomRef().firstChild.innerText=this.getText());return this;};F.prototype._activateInput=function(){if(!this._bEditing){var i=this.getDomRef().firstChild;i.tabIndex="0";i.focus();i.setAttribute("contenteditable","true");this._bEditing=true;this.$().addClass("sapMTokenEditing");}};F.prototype._deactivateInput=function(){this.getDomRef().firstChild.tabIndex="-1";this.focus();var i=this.getDomRef().firstChild;var t=i.innerText;if(t!==this.getText()){var o=this.getText();this.setText(this.getDomRef().firstChild.innerText);this.fireTokenChanged({text:this.getText(),oldText:o});}this._bEditing=false;i.removeAttribute("contenteditable");this.$().removeClass("sapMTokenEditing");};F.prototype._onTokenPress=function(e){var s=this.getSelected(),c=e.ctrlKey||e.metaKey,S=e.shiftKey;T.prototype._onTokenPress.apply(this,arguments);if(s&&this.getChangeable()&&!c&&!S){this._activateInput();}};F.prototype.onsapfocusleave=function(e){if(this._bEditing){this._deactivateInput();}else{this._callBaseEventHandler(e,"onsapfocusleave");}};F.prototype.onsapenter=function(e){if(this._bEditing){this._deactivateInput();}else{this._callBaseEventHandler(e,"onsapfocusleave");}};F.prototype.oninput=function(e){if(this._bEditing||e.target===this.getDomRef().firstChild){e.stopImmediatePropagation();}else{this._callBaseEventHandler(e,"oninput");}};F.prototype.onkeydown=function(e){if(this._bEditing||e.target===this.getDomRef().firstChild){e.stopImmediatePropagation();if(e.keyCode===q.sap.KeyCodes.F2){this._deactivateInput();}}else{if(this.getChangeable()&&e.keyCode===q.sap.KeyCodes.F2){this._activateInput();}this._callBaseEventHandler(e,"onkeydown");}};F.prototype.onsapspace=function(e){if(this._bEditing||e.target===this.getDomRef().firstChild){e.stopImmediatePropagation();}else{this._callBaseEventHandler(e,"onsapspace");}};F.prototype.onsapescape=function(e){if(this._bEditing||e.target===this.getDomRef().firstChild){this._deactivateInput();e.stopImmediatePropagation();}else{this._callBaseEventHandler(e,"onsapescape");}};F.prototype.onkeyup=function(e){if(this._bEditing||e.target===this.getDomRef().firstChild){e.stopImmediatePropagation();}else{this._callBaseEventHandler(e,"onkeyup");}};F.prototype._callBaseEventHandler=function(e,n){var p=this.getMetadata().getParent();if(p){p=p.getClass();if(p.prototype[n]){p.prototype[n].apply(this,[e]);}}};return F;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.base.FilterTokenRenderer')){jQuery.sap.declare('sap.ui.mdc.base.FilterTokenRenderer');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Renderer');sap.ui.define("sap/ui/mdc/base/FilterTokenRenderer",['jquery.sap.global','sap/ui/core/Renderer'],function(q,R){"use strict";var F=R.extend("sap.ui.mdc.base.FilterTokenRenderer");F.render=function(r,c){r.write("<div tabindex=\"-1\"");r.writeControlData(c);r.addClass("sapMToken");r.addClass("sapMFilterToken");r.writeAttribute("role","listitem");r.writeAttribute("aria-readonly",!c.getEditable());r.writeAttribute("aria-selected",c.getSelected());if(c.getSelected()){r.addClass("sapMTokenSelected");}if(!c.getEditable()){r.addClass("sapMTokenReadOnly");}r.writeClasses();var t=c.getTooltip_AsString();if(t){r.writeAttributeEscaped("title",t);}var a={};a.describedby={value:c._sAriaTokenLabelId,append:true};if(c.getEditable()){a.describedby={value:c._sAriaTokenDeletableId,append:true};}r.writeAccessibilityState(c,a);r.write(">");this._renderInnerControl(r,c);if(c.getEditable()){r.renderControl(c._deleteIcon);}r.write("</div>");};F._renderInnerControl=function(r,c){var t=c.getTextDirection();r.write("<div");r.addClass("sapMTokenText");r.addClass("sapMFilterTokenText");r.writeStyles();r.writeClasses();if(t!==sap.ui.core.TextDirection.Inherit){r.writeAttribute("dir",t.toLowerCase());}r.writeAttribute("tabIndex","-1");r.write(">");r.writeEscaped(c.getText());r.write("</div>");};return F;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.base.FixedValueListProvider')){jQuery.sap.declare('sap.ui.mdc.base.FixedValueListProvider');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/ui/mdc/base/FixedValueListProvider",["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";var F=B.extend("sap.ui.mdc.base.FixedValueListProvider",{constructor:function(p){B.apply(this);this._bShowAll=true;this._bShowHint=false;if(p){this._fInit=p.init;this._fSuggest=p.suggest;this._fSelect=p.select;this._bShowAll=p.enableShowAll!==undefined?p.enableShowAll:true;this._bShowHint=p.showHint!==undefined?p.showHint:false;this._maxWidth=p.maxWidth;this._bEnableFilterSuggest=p.enableFilterSuggest;this._keyPath=p.keyPath;this._descriptionPath=p.descriptionPath;if(p.control){this.associateFilterField(p.control);}}}});F.prototype.destroy=function(){this._oFilterField=null;this._oInput=null;this._oTable=null;};F.prototype.getTable=function(){return this._oTable;};F.prototype.setKeyPath=function(k){this._keyPath=k;};F.prototype.setDescriptionPath=function(d){this._descriptionPath=d;};F.prototype.setTable=function(t){this._oTable=t;var m=this._oFilterField.getAggregation("_input");m.removeAllSuggestionColumns();m.removeAllSuggestionRows();if(t){var b=t.getBindingInfo("items");var c=t.getColumns();for(var i=0;i<c.length;i++){var C=c[i].clone();m.addSuggestionColumn(C);}m.setMaxSuggestionWidth(this._maxWidth?this._maxWidth:(c.length*8+2)+"em");m.setModel(t.getModel());m.bindAggregation("suggestionRows",{path:b.path,template:b.template,parameters:b.parameters});}else{m.bindAggregation("suggestionRows",null);}};F.prototype.associateFilterField=function(f){this._oFilterField=f;this._oInput=f.getAggregation("_input");if(!this._oInput){var t=this;setTimeout(function(){t.associateFilterField(f);},100);return;}if(!(this._oInput instanceof sap.m.MultiInput)){q.sap.log.error("mdc:FixedValueListProvider","associateFilterField for "+(this._oInput?this._oInput.getId():"none")+" not possible!");return;}this._oInput.setShowSuggestion(true);this._oInput.setEnableSuggestionsHighlighting(false);this._oInput.setFilterSuggests(this._bEnableFilterSuggest);this._oInput.setShowTableSuggestionValueHelp(false);if(this._bShowHint){this._oInput.setPlaceholder("press space to get help");}this._oInput._getValueHelpIcon=function(){var _=sap.m.MultiInput.prototype._getValueHelpIcon.apply(this,arguments);if(_){_.setSrc(sap.ui.core.IconPool.getIconURI("slim-arrow-down"));}return _;};this._oInput.attachValueHelpRequest(function(e){var i=e.oSource;i._$input.val(" ");i._triggerSuggest(" ");});this._oInput.attachSuggest(function(e){if(this._fInit&&!this.getTable()){this._fInit(this);}if(this._fSuggest){this._fSuggest(this,e);}}.bind(this));this._oInput.setFilterFunction(function(v,i){var s=(v.lastIndexOf(" ")==v.length-1)&&this._bShowAll;v=v.trim();if(s){return true;}return sap.m.Input._DEFAULTFILTER_TABULAR(v,i);}.bind(this));this._oInput.addValidator(function(d){var T=d.text,r=d.suggestionObject,s=this._oInput,b=this._oFilterField.getBinding("conditions"),o=this._oFilterField._getDataType(),a=o.getMetadata().getName(),O,c,e=this._oFilterField.getFieldPath(),D,k,g,v;if(r){if(this._fSelect){if(this._fSelect(this,d)){return null;}}var h=r.getBindingContext();D=h.getObject();k=this._keyPath&&D[this._keyPath]?D[this._keyPath]:null;g=this._descriptionPath&&D[this._descriptionPath]?D[this._descriptionPath]:null;v="=="+k;O=this._oFilterField.getFilterOperatorConfig().getOperator("EEQ");if(O&&O.test(v,o)){c=b.getModel().addCondition(b.getModel().createItemCondition(e,k,g));s.setValue("");this._oFilterField.fireChange({value:c,type:"added",valid:true});}}else{q.sap.log.info("mdc:FixedValueListProvider","validator check if one suggestionRow exist for "+T);if(s._getIsSuggestionPopupOpen&&s._getIsSuggestionPopupOpen()){var S=s.getSuggestionRows();var n=0,i=-1;S.some(function(I,l){if(I.getVisible()){n++;i=l;}return n>=2;});if(n===1){D=S[i].getBindingContext().getObject();if(this._fSelect){d.suggestionObject=S[i];if(this._fSelect(this,d)){return null;}}k=this._keyPath&&D[this._keyPath]?D[this._keyPath]:null;g=this._descriptionPath&&D[this._descriptionPath]?D[this._descriptionPath]:null;v="=="+k;O=this._oFilterField.getFilterOperatorConfig().getOperator("EEQ");if(O&&O.test(v,o)){c=b.getModel().addCondition(b.getModel().createItemCondition(e,k,g));s.setValue("");this._oFilterField.fireChange({value:c,type:"added",valid:true});return null;}}}var j=this._oFilterField.getFilterOperatorConfig().getMatchingOperators(a,T);if(j.length!==0){O=j[0];c=O.getCondition(T,o);if(c){c.fieldPath=e;b.getModel().addCondition(c);s.setValue("");this._oFilterField.fireChange({value:c,type:"added",valid:true});return null;}}s.setValue("");q.sap.delayedCall(100,this,function(){var v="=="+T;var O=this._oFilterField.getFilterOperatorConfig().getOperator("EEQ");if(O&&O.test(v,o)){c=b.getModel().addCondition(b.getModel().createItemCondition(e,T,T));this._oFilterField.fireChange({value:c,type:"added",valid:true});}});}return null;}.bind(this));};return F;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.base.ODataSuggestProvider')){jQuery.sap.declare('sap.ui.mdc.base.ODataSuggestProvider');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/ui/mdc/base/ODataSuggestProvider",["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";var O=B.extend("sap.ui.mdc.base.ODataSuggestProvider",{constructor:function(p){B.apply(this);this._bShowAll=true;this._bShowHint=false;if(p){this._fInit=p.init;this._fSuggest=p.suggest;this._fSelect=p.select;this._bShowAll=p.enableShowAll!==undefined?p.enableShowAll:true;this._bShowHint=p.showHint!==undefined?p.showHint:false;this._maxWidth=p.maxWidth;this._bEnableFilterSuggest=p.enableFilterSuggest;this._keyPath=p.keyPath;this._descriptionPath=p.descriptionPath;if(p.control){this.associateFilterField(p.control);}}}});O.prototype.destroy=function(){this._oFilterField=null;this._oInput=null;this._oTable=null;};O.prototype.getTable=function(){return this._oTable;};O.prototype.setKeyPath=function(k){this._keyPath=k;};O.prototype.setDescriptionPath=function(d){this._descriptionPath=d;};O.prototype.setTable=function(t){this._oTable=t;var m=this._oFilterField.getAggregation("_input");m.removeAllSuggestionColumns();m.removeAllSuggestionRows();if(t){var b=t.getBindingInfo("items");var c=t.getColumns();for(var i=0;i<c.length;i++){var C=c[i].clone();m.addSuggestionColumn(C);}m.setMaxSuggestionWidth(this._maxWidth?this._maxWidth:(c.length*8+2)+"em");m.setModel(t.getModel());m.bindAggregation("suggestionRows",{path:b.path,template:b.template,parameters:b.parameters});}else{m.bindAggregation("suggestionRows",null);}};O.prototype.associateFilterField=function(f){this._oFilterField=f;this._oInput=f.getAggregation("_input");if(!this._oInput){var t=this;setTimeout(function(){t.associateFilterField(f);},100);}if(!(this._oInput instanceof sap.m.MultiInput)){q.sap.log.error("mdc:ODataSuggestProvider","associateFilterField for "+(this._oInput?this._oInput.getId():"none")+" not possible!");return;}this._oInput.setShowSuggestion(true);this._oInput.setEnableSuggestionsHighlighting(false);this._oInput.setFilterSuggests(this._bEnableFilterSuggest);this._oInput.setShowTableSuggestionValueHelp(false);if(this._bShowHint){this._oInput.setPlaceholder("press space to get help");}this._oInput.attachSuggest(function(e){if(this._fInit&&!this.getTable()){this._fInit(this);}if(this._fSuggest){this._fSuggest(this,e);}}.bind(this));this._oInput.setFilterFunction(function(v,i){var s=(v.lastIndexOf(" ")==v.length-1)&&this._bShowAll;v=v.trim();if(s){return true;}return sap.m.Input._DEFAULTFILTER_TABULAR(v,i);}.bind(this));this._oInput.addValidator(function(d){var T=d.text,r=d.suggestionObject,s=this._oInput,b=this._oFilterField.getBinding("conditions"),o=this._oFilterField._getDataType(),a=o.getMetadata().getName(),c,C,F=this._oFilterField.getFieldPath();var D;var k,e,v;if(r){if(this._fSelect){if(this._fSelect(this,d)){return null;}}var g=r.getBindingContext();D=g.getObject();k=this._keyPath&&D[this._keyPath]?D[this._keyPath]:null;e=this._descriptionPath&&D[this._descriptionPath]?D[this._descriptionPath]:null;v="=="+k;q.sap.log.info("mdc:ODataSuggestProvider","validator suggestionObject handled sValue "+v);c=this._oFilterField.getFilterOperatorConfig().getOperator("EEQ");if(c&&c.test(v,o)){C=b.getModel().addCondition(b.getModel().createItemCondition(F,k,e));s.setValue("");this._oFilterField.fireChange({value:C,type:"added",valid:true});}}else{q.sap.log.info("mdc:ODataSuggestProvider","validator check if one suggestionRow exist for "+T);if(s._getIsSuggestionPopupOpen&&s._getIsSuggestionPopupOpen()){var S=s.getSuggestionRows();var n=0,i=-1;S.some(function(I,j){if(I.getVisible()){n++;i=j;}return n>=2;});if(n===1){D=S[i].getBindingContext().getObject();if(this._fSelect){d.suggestionObject=S[i];if(this._fSelect(this,d)){return null;}}k=this._keyPath&&D[this._keyPath]?D[this._keyPath]:null;e=this._descriptionPath&&D[this._descriptionPath]?D[this._descriptionPath]:null;v="=="+k;c=this._oFilterField.getFilterOperatorConfig().getOperator("EEQ");if(c&&c.test(v,o)){C=b.getModel().addCondition(b.getModel().createItemCondition(F,k,e));s.setValue("");this._oFilterField.fireChange({value:C,type:"added",valid:true});return null;}}}q.sap.log.info("mdc:ODataSuggestProvider","validator text handled "+T);var h=this._oFilterField.getFilterOperatorConfig().getMatchingOperators(a,T);if(h.length!==0){c=h[0];C=c.getCondition(T,o);if(C){C.fieldPath=F;b.getModel().addCondition(C);s.setValue("");this._oFilterField.fireChange({value:C,type:"added",valid:true});return null;}}s.setValue("");q.sap.delayedCall(100,this,function(){var v="=="+T;q.sap.log.info("mdc:ODataSuggestProvider","validator EEQ text handling "+v);var c=this._oFilterField.getFilterOperatorConfig().getOperator("EEQ");if(c&&c.test(v,o)){C=b.getModel().addCondition(b.getModel().createItemCondition(F,T,T));this._oFilterField.fireChange({value:C,type:"added",valid:true});}});}return null;}.bind(this));};return O;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.base.OperatorSuggestProvider')){jQuery.sap.declare('sap.ui.mdc.base.OperatorSuggestProvider');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/ui/mdc/base/OperatorSuggestProvider",["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";var O=B.extend("sap.ui.mdc.base.OperatorSuggestProvider",{constructor:function(p){B.apply(this);this._bShowAll=true;this._bShowHint=false;if(p){this._bShowAll=p.enableShowAll!==undefined?p.enableShowAll:true;this._bShowHint=p.showHint!==undefined?p.showHint:false;if(p.control){this.associateFilterField(p.control);}}}});O.prototype.destroy=function(){this._oFilterField=null;this._oInput=null;};O.prototype.associateFilterField=function(f){this._oFilterField=f;this._oInput=f.getAggregation("_input");if(!this._oInput){var t=this;setTimeout(function(){t.associateFilterField(f);},100);}if(!(this._oInput instanceof sap.m.MultiInput)){q.sap.log.error("mdc:OperatorSuggestProvider","associateFilterField for "+(this._oInput?this._oInput.getId():"null")+" not possible!");return;}this._oInput.setShowSuggestion(true);this._oInput.setFilterSuggests(true);this._oInput.setEnableSuggestionsHighlighting(false);this._oInput.setMaxLength(0);this._oInput.setMaxSuggestionWidth("auto");if(this._bShowHint){this._oInput.setPlaceholder("press space to get help");}this._aOperators=[];this._oInput.bindAggregation("suggestionItems",{path:"suggest>/",template:new sap.ui.core.ListItem({key:"{suggest>key}",text:"{suggest>text}",additionalText:"{suggest>additionalText}"}),templateShareable:false});this._oInput.attachSuggest(function(e){if(this._aOperators.length===0){var o=this._oFilterField.getFilterOperatorConfig();var a=o.getOperatorsForType(this._oFilterField._getDataType().getMetadata().getName());a.forEach(function(b){var c=o.getOperator(b);if(c.showInSuggest!==undefined&&c.showInSuggest==false){return;}var T=c.textKey||"operators."+c.name+".longText";var d=c.getTypeText(T,this._oFilterField._getDataType().getName().toLowerCase());if(d===T){d=c.longText;}this._aOperators.push({key:b,additionalText:d});},this);var s=new sap.ui.model.json.JSONModel();s.setData(this._aOperators);this._oInput.setModel(s,"suggest");}}.bind(this));this._oInput.addValidator(function(d){});this._oInput.setFilterFunction(function(v,i){var k=i.getKey();var T=this._oFilterField._getDataType();var a=T.getMetadata().getName();var s=true;var e;v=v.trim();var o=this._oFilterField.getFilterOperatorConfig();var b=o.getMatchingOperators(a,v);if(b.length!==0){s=false;}var c=o.getOperator(k);if(c){if(s&&this._bShowAll){var d=v,g="";if(d===""){if(T.getName()==="Date"){d=new Date();}else if(T.getName()==="Integer"){d=123;}else if(T.getName()==="Float"){d=123.45;}else if(T.getName()==="Boolean"){d=true;}else{d="abc";}}if(g===""){if(T.getName()==="Date"){g=new Date();if(typeof d==="string"){g.setFullYear(g.getFullYear()+1);g=T.formatValue(g,"string");}else{g.setFullYear(d.getFullYear()+1);}}else if(T.getName()==="Integer"){g=d+1000;}else if(T.getName()==="Float"){g=d+1000;}else if(T.getName()==="Boolean"){g=false;}else{g="xyz";}}try{e=c.format([d,g],null,typeof d==="string"?null:T);}catch(h){e=c.format([]);}i.setText(e);return true;}if(c.test(v,T)){var V=c.parse(v,T);e=c.format(V,null,T);i.setText(e);return true;}return false;}else{return false;}}.bind(this));};return O;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.base.ValueHelpDialog')){jQuery.sap.declare('sap.ui.mdc.base.ValueHelpDialog');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.XMLComposite');sap.ui.define("sap/ui/mdc/base/ValueHelpDialog",['jquery.sap.global','sap/ui/core/XMLComposite'],function(q,X){"use strict";var V=X.extend("sap.ui.mdc.base.ValueHelpDialog",{metadata:{properties:{title:{type:"string",invalidate:false}},aggregations:{conditionModel:{type:"sap.ui.mdc.base.ConditionModel",multiple:false}},events:{},publicMethods:[]},alias:"this",fragment:"sap.ui.mdc.base.ValueHelpDialog"});V.prototype.init=function(){if(this.get_content()instanceof sap.m.Dialog){var d=this.get_content();d.setBusyIndicatorDelay(0);d.setBusy(true);d.attachAfterClose(function(e){this.destroy();}.bind(this));}};V.prototype.open=function(){return this.get_content().open();};V.prototype.close=function(){this.get_content().close();};V.prototype.addContent=function(c){var d=this.get_content();d.addContent(c);return d.setBusy(false);};V.prototype.onOk=function(){var d=this.get_content();var l=d.getContent()[0].getController().sFieldPath;var L=d.getContent()[0].getModel("cm");var c=this.getConditionModel();c.merge(l,L);d.close();};V.prototype.onCancel=function(){this.close();};V.prototype.onReset=function(){var d=this.get_content();var l=d.getContent()[0].getController().sFieldPath;var c=d.getContent()[0].getModel("cm");var t=d.getContent()[0].getModel("vltcm");var f=d.getContent()[0].getModel("FilterLayoutFlag");var F=t.getData().sFieldPath;c.removeAllConditions(l);if(F){for(var T in F){t.removeAllConditions(T);}}f.setProperty("/sSearchFieldValue","");f.setProperty("/visible","HideMode");f.setProperty("/listView",false);f.setProperty("/tableView",true);f.setProperty("/sSelectedRowCount",0);d.getContent()[0].getController().updateTableSelections();};return V;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.base.type.DateRange')){jQuery.sap.declare('sap.ui.mdc.base.type.DateRange');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.model.CompositeType');jQuery.sap.require('sap.ui.model.FormatException');jQuery.sap.require('sap.ui.model.ParseException');sap.ui.define("sap/ui/mdc/base/type/DateRange",["jquery.sap.global","sap/ui/model/CompositeType","sap/ui/model/FormatException","sap/ui/model/ParseException"],function(q,C,F,P){"use strict";var D=C.extend("sap.ui.mdc.base.type.DateRange",{constructor:function(f,c){C.call(this,f,c);}});D.prototype.formatValue=function(v,t){if(!v||(!v[0]&&!v[1])){return null;}switch(t){case"any":return v;case"string":return v.join(" - ");default:throw new F("Don't know how to format "+this.getName()+" to "+t);}};D.prototype.parseValue=function(v,s){if(v===null||v===""){return null;}switch(s){case"string":return v.split(" - ");default:throw new P("Don't know how to parse "+this.getName()+" from "+s);}};D.prototype.validateValue=function(v){};return D;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.Action')){jQuery.sap.declare('sap.ui.mdc.experimental.Action');jQuery.sap.require('sap.m.Button');jQuery.sap.require('sap.m.library');sap.ui.define("sap/ui/mdc/experimental/Action",['sap/m/Button','sap/m/library'],function(B,l){"use strict";var a=l.ButtonType;var B=B.extend("sap.ui.mdc.experimental.Action",{metadata:{properties:{actionName:"string",emphasized:'boolean',mode:'string',multiplicityFrom:{type:"int"},multiplicityTo:{type:"int"}},events:{"callAction":{}}},onBeforeRendering:function(){if(this.getEmphasized()){this.setType(a.Emphasized);}},onclick:function(e){this.fireCallAction({actionName:this.getActionName(),actionLabel:this.getText()});},renderer:{}});return B;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.ControlSelector')){jQuery.sap.declare('sap.ui.mdc.experimental.ControlSelector');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Control');sap.ui.define("sap/ui/mdc/experimental/ControlSelector",['jquery.sap.global','sap/ui/core/Control'],function(q,C){"use strict";var a=C.extend("sap.ui.mdc.experimental.ControlSelector",{constructor:function(){C.apply(this,arguments);},metadata:{properties:{selectedIndex:{type:"int",defaultValue:-1},defaultIndex:{type:"int",defaultValue:0},renderRoot:{type:"boolean",defaultValue:false},reuseControls:{type:"boolean",defaultValue:false}},aggregations:{content:{type:"sap.ui.core.Control",multiple:true},_current:{type:"sap.ui.core.Control",multiple:false,hidden:true}},associations:{use:{type:"sap.ui.mdc.ControlSelector",multiple:false}},defaultAggregation:"content"},renderer:function(r,o){var d=o.getCurrentContent(),R=o.getRenderRoot();if(!R&&d&&d.getVisible()){var D=o.getDomRef();if(q.sap.log.isLoggable(q.sap.log.Level.DEBUG)&&D){r.write("<!-- sap.ui.mdc.experimental.ControlSelector with id='"+o.getId()+"' and renderRoot=false, used old id='"+D.id+"' for rerendering -->");if(D.previousSibling&&D.previousSibling.nodeType===8){D.previousSibling.parentNode.removeChild(D.previousSibling);}}if(D){D.parentNode.removeChild(D);}r.renderControl(d);o._sOldId=d.getId();}else{r.write("<div ");if(!R){r.write(" style=\"display:none\"");}r.writeControlData(o);r.write(">");if(R){r.renderControl(d);}r.write("</div>");}}});var b=sap.ui.getCore().byId;var c=-1;a.prototype.init=function(){this._mClones=null;this._sOldId=null;this._oFree={};};a.prototype._setCurrent=function(o){this.setAggregation("_current",o);};a.prototype.getDomRef=function(){var d=q.sap.domById(this.getId());if(d||this.getRenderRoot()){return d;}else if(this._sOldId){return q.sap.domById(this._sOldId);}return null;};a.prototype._setTemplate=function(t,i){this.oTemplate=t;if(!this.getAggregation("_current")){var o=this.oTemplate._getCurrent(i);if(o){this._setCurrent(o.clone(this.getId()+"-content"));this.setProperty("selectedIndex",i,true);}else{this.oTemplate._unregisterClone(this);this.destroyContent();}}};a.prototype.validateAggregation=function(n,o){var r=C.prototype.validateAggregation.apply(this,arguments);if(n==="content"&&o instanceof a){throw new Error("sap.ui.mdc.experimental.ControlSelector cannot be used as content of another sap.ui.mdc.experimental.ControlSelector");}return r;};a.prototype._getPoolIndex=function(v){if(!this.oTemplate){return 0;}var d=this.oTemplate.getContent();if(!d||v<0||v>=d.length-1){v=0;}return v;};a.prototype._getCurrentInstance=function(i){var p=this._getPoolIndex(i),o=null;if(this.oTemplate.getReuseControls()&&this.oTemplate._oFree[p]&&this.oTemplate._oFree[p].length){o=this.oTemplate._oFree[p].pop();}else{var d=this.oTemplate._getCurrent(i);if(d){o=d.clone(this.getId()+"-"+c+"-content");}c++;}return o;};a.prototype.setSelectedIndex=function(i){var o=this.getSelectedIndex();this.setProperty("selectedIndex",i,true);if(o!=i){if(this.oTemplate){var d=this.getAggregation("_current");if(d){if(this.oTemplate.getReuseControls()){var p=this._getPoolIndex(o);if(!this.oTemplate._oFree[p]){this.oTemplate._oFree[p]=[];}this.oTemplate._oFree[p].push(d);}else{d.destroy("KeepDom");}}var e=this._getCurrentInstance(i);if(e){this._setCurrent(e);}}else{if(this._mClones){for(var n in this._mClones){b(n).setSelectedIndex(i);}}else{this.invalidate();}}}return this;};a.prototype._registerClone=function(i){if(!this._mClones){this._mClones={};this._attachModifyAggregation("content",this._updateClones,this);}this._mClones[i.getId()]=null;};a.prototype._unregisterClone=function(i){if(this._mClones){if(typeof i==="string"){delete this._mClones[i];}else if(i instanceof C){delete this._mClones[i.getId()];}if(Object.keys(this._mClones).length===0){this._detachModifyAggregation("content",this._updateClones,this);this._mClones=null;}}};a.prototype._updateClones=function(){if(this._mClones){for(var n in this._mClones){var o=b(n);if(o){o.destroyContent();o._setTemplate(this,o.getSelectedIndex());}else{this._unregisterClone(n);}}}};a.prototype.clone=function(i){var o;if(!this.oTemplate){o=C.prototype.clone.apply(this,[arguments[0],arguments[1],{cloneChildren:false,cloneBindings:true}]);o._setTemplate(this,this.getSelectedIndex());this._registerClone(o);return o;}else{o=C.prototype.clone.apply(this,arguments);o._setTemplate(this.oTemplate,this.getSelectedIndex());this.oTemplate._registerClone(o);return o;}};a.prototype.getCurrentContent=function(){if(this.oTemplate){return this.getAggregation("_current");}else{return this._getCurrent(this.getSelectedIndex());}};a.prototype.getContent=function(){if(this.oTemplate){return this.getAggregation("_current");}return this.getAggregation("content");};a.prototype._getCurrent=function(i){var d=this.getAggregation("content");if(d&&(i<0||i>=d.length)){q.sap.log.debug("Changing index of ControlSelector to defaultIndex: current is "+i);var D=this.getDefaultIndex();if(D<0||D>=d.length){q.sap.log.debug("Changing index of ControlSelector to 0: current is "+i);i=0;}else{i=D;}}if(d&&d[i]){return d[i];}return null;};a.prototype.setUse=function(i){var d=this.getAggregation("content");if(d&&d.length>0){q.sap.log.warning("Content is ignored for "+this.getId()+" because association 'use' is set to reference another ControlSelector instance.");this.destroyAggregation("content");}var u=b(i);if(!u){q.sap.log.warning("ControlSelector with id "+i+" is not available.");return;}if(!(u instanceof a)){q.sap.log.warning("Control with id "+i+" is not a ControlSelector.");return;}this.setAssociation("use",i);this.oTemplate=u;this._setTemplate(this.oTemplate,this.getSelectedIndex());this.oTemplate._registerClone(this);};a.prototype.destroy=function(){if(this._mClones){for(var n in this._mClones){var o=b(n);if(o){o.destroy();}}}else if(this.oTemplate){this.oTemplate._unregisterClone(this);}C.prototype.destroy.apply(this,arguments);};return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.DataObjectMetadata')){jQuery.sap.declare('sap.ui.mdc.experimental.DataObjectMetadata');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.DataType');jQuery.sap.require('sap.ui.base.Metadata');sap.ui.define("sap/ui/mdc/experimental/DataObjectMetadata",['jquery.sap.global','sap/ui/base/DataType','sap/ui/base/Metadata'],function(q,D,M){"use strict";var a=function(C,o){M.apply(this,arguments);};a.prototype=Object.create(M.prototype);var h=Object.prototype.hasOwnProperty;function c(n){return n.charAt(0).toUpperCase()+n.slice(1);}function b(f,n){return function(){q.sap.log.warning("Usage of deprecated feature: "+n);return f.apply(this,arguments);};}var K={SPECIAL_SETTING:-1,PROPERTY:0,EVENT:5};function S(C,n,i){i=typeof i!=='object'?{type:i}:i;this.name=n;this.type=i.type||'any';this.visibility=i.visibility||'public';this._oParent=C;this._sUID="special:"+n;this._iKind=K.SPECIAL_SETTING;}function P(C,n,i){i=typeof i!=='object'?{type:i}:i;this.name=n;this.type=i.type||'string';this.group=i.group||'Misc';this.defaultValue=i.defaultValue!==null?i.defaultValue:null;this.sGetter="get"+this.name.substring(0,1).toUpperCase()+this.name.substring(1);this.mandatory=!!i.mandatory;this.visibility='private';this._oParent=C;this._sUID=n;this._iKind=K.PROPERTY;this._oType=null;}P.prototype.generate=function(d){var t=this;d(t.name,function(){return this.getProperty(t);},function(v){return this.setProperty(t,v);});};P.prototype.getType=function(){return this._oType||(this._oType=D.getType(this.type));};function E(C,n,i){this.name=n;this.allowPreventDefault=i.allowPreventDefault||false;this.deprecated=i.deprecated||false;this.visibility='public';this.allowPreventDefault=!!i.allowPreventDefault;this.enableEventBubbling=!!i.enableEventBubbling;this._oParent=C;this._sUID='event:'+n;this._iKind=K.EVENT;var N=c(n);this._sMutator='attach'+N;this._sDetachMutator='detach'+N;this._sTrigger='fire'+N;}E.prototype.generate=function(e){var t=this,n=t.name,g=t.allowPreventDefault,i=t.enableEventBubbling;e(t._sMutator,function(d,f,o){this.attachEvent(n,d,f,o);return this;},t);e(t._sDetachMutator,function(f,o){this.detachEvent(n,f,o);return this;});e(t._sTrigger,function(p){return this.fireEvent(n,p,g,i);});};E.prototype.attach=function(i,d,f,l){return i[this._sMutator](d,f,l);};E.prototype.detach=function(i,f,l){return i[this._sDetachMutator](f,l);};E.prototype.fire=function(i,p,d,e){return i[this._sTrigger](p,d,e);};a.prototype.metaFactorySpecialSetting=S;a.prototype.metaFactoryProperty=P;a.prototype.metaFactoryEvent=E;a.prototype.applySettings=function(C){var t=this,s=C.metadata;M.prototype.applySettings.call(this,C);function n(i,F){var R={},N;if(i){for(N in i){if(h.call(i,N)){R[N]=new F(t,N,i[N]);}}}return R;}var r=/([a-z][^.]*(?:\.[a-z][^.]*)*)\./;function d(N){var m=r.exec(N);return(m&&m[1])||"";}this._sLibraryName=s.library||d(this.getName());this._mSpecialSettings=n(s.specialSettings,this.metaFactorySpecialSetting);this._mProperties=n(s.properties,this.metaFactoryProperty);this._mEvents=n(s.events,this.metaFactoryEvent);if(C.metadata.__version>1.0){this.generateAccessors();}};a.prototype.afterApplySettings=function(){M.prototype.afterApplySettings.call(this);var p=this.getParent();if(p&&p instanceof a){this._mAllEvents=q.extend({},p._mAllEvents,this._mEvents);this._mAllProperties=q.extend({},p._mAllProperties,this._mProperties);this._mAllSpecialSettings=q.extend({},p._mAllSpecialSettings,this._mSpecialSettings);}else{this._mAllEvents=this._mEvents;this._mAllProperties=this._mProperties;this._mAllSpecialSettings=this._mSpecialSettings;}};a.Kind=K;a.prototype.getLibraryName=function(){return this._sLibraryName;};a.prototype.addProperty=function(n,i){var p=this._mProperties[n]=new P(this,n,i);if(!this._mAllProperties[n]){this._mAllProperties[n]=p;}};a.prototype.hasProperty=function(n){return!!this._mAllProperties[n];};a.prototype.getProperty=function(n){var p=this._mAllProperties[n];return typeof p==='object'?p:undefined;};a.prototype.getProperties=function(){return this._mProperties;};a.prototype.getAllProperties=function(){return this._mAllProperties;};a.prototype.getPropertyLikeSetting=function(n){var p=this._mAllProperties[n];if(typeof p==='object'){return p;}p=this._mAllAggregations[n];return(typeof p==='object'&&p.altTypes&&p.altTypes.length>0)?p:undefined;};a.prototype.hasEvent=function(n){return!!this._mAllEvents[n];};a.prototype.getEvent=function(n){var e=this._mAllEvents[n];return typeof e==='object'?e:undefined;};a.prototype.getEvents=function(){return this._mEvents;};a.prototype.getAllEvents=function(){return this._mAllEvents;};a.prototype.addSpecialSetting=function(n,i){var s=new S(this,n,i);this._mSpecialSettings[n]=s;if(!this._mAllSpecialSettings[n]){this._mAllSpecialSettings[n]=s;}};a.prototype.hasSpecialSetting=function(n){return!!this._mAllSpecialSettings[n];};a.prototype.getPropertyDefaults=function(){var d=this._mDefaults,t;if(d){return d;}if(this.getParent()instanceof a){d=q.sap.newObject(this.getParent().getPropertyDefaults());}else{d={};}for(var s in this._mProperties){if(this._mProperties[s].defaultValue!==null){d[s]=this._mProperties[s].defaultValue;}else{t=D.getType(this._mProperties[s].type);if(t instanceof D){d[s]=t.getDefaultValue();}}}this._mDefaults=d;return d;};a.prototype.createPropertyBag=function(){if(!this._fnPropertyBagFactory){this._fnPropertyBagFactory=q.sap.factory(this.getPropertyDefaults());}return new(this._fnPropertyBagFactory)();};a.prototype.getJSONKeys=function(){if(this._mJSONKeys){return this._mJSONKeys;}var A={},j={};function d(m){var n,i,p;for(n in m){i=m[n];p=A[n];if(!p||i._iKind<p._iKind){A[n]=j[n]=i;}j[i._sUID]=i;}}d(this._mAllSpecialSettings);d(this.getAllProperties());d(this.getAllEvents());this._mJSONKeys=j;this._mAllSettings=A;return this._mJSONKeys;};a.prototype.getAllSettings=function(){if(!this._mAllSettings){this.getJSONKeys();}return this._mAllSettings;};a.prototype.generateAccessors=function(){var p=this.getClass().prototype,d=this.getName()+".",m=this._aPublicMethods,n;function e(g,i,s){if(!p.hasOwnProperty(g)){Object.defineProperty(p,g,{get:i,set:s});}}function f(g,i,j){if(!p[g]){p[g]=(j&&j.deprecated)?b(i,d+j.name):i;}m.push(g);}for(n in this._mProperties){this._mProperties[n].generate(e);}for(n in this._mEvents){this._mEvents[n].generate(f);}};return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.FieldHelpBase')){
/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.experimental.FieldHelpBase');jQuery.sap.require('sap.ui.core.Element');jQuery.sap.require('sap.m.Popover');sap.ui.define("sap/ui/mdc/experimental/FieldHelpBase",['sap/ui/core/Element','sap/m/Popover'],function(E,P){"use strict";var F=E.extend("sap.ui.mdc.experimental.FieldHelpBase",{metadata:{library:"sap.ui.mdc",properties:{selectedKey:{type:"string",defaultValue:""},filterValue:{type:"string",defaultValue:""}},aggregations:{_popover:{type:"sap.m.Popover",multiple:false,visibility:"hidden"}},events:{select:{parameters:{value:{type:"any"},additionalValue:{type:"any"},key:{type:"string"}}},navigate:{parameters:{value:{type:"any"},additionalValue:{type:"any"},key:{type:"string"}}},dataUpdate:{}}}});F.prototype.init=function(){};F.prototype.exit=function(){};F.prototype.setSelectedKey=function(k){this.setProperty("selectedKey",k,true);};F.prototype.setFilterValue=function(f){this.setProperty("filterValue",f,true);};F.prototype.open=function(){var p=this._getPopover();var f=this.getParent();if(f&&!p.isOpen()){var w=f.$().outerWidth();p.setContentMinWidth(w+"px");p.openBy(f);}};F.prototype.close=function(){var p=this.getAggregation("_popover");if(p){p.close();}};F.prototype.toggleOpen=function(){var p=this._getPopover();if(p.isOpen()){this.close();}else{this.open();}};F.prototype._createPopover=function(){var p=new sap.m.Popover(this.getId()+"-pop",{placement:sap.m.PlacementType.Bottom,showHeader:false,showArrow:false,afterOpen:this._handleAfterOpen.bind(this)});this.setAggregation("_popover",p,true);return p;};F.prototype._getPopover=function(){var p=this.getAggregation("_popover");if(!p){p=this._createPopover();}return p;};F.prototype._handleAfterOpen=function(){};F.prototype.openByTyping=function(){return false;};F.prototype.showLink=function(){return false;};F.prototype.navigate=function(s){};F.prototype.getTextForKey=function(k){return"";};F.prototype.getKeyForText=function(t){return"";};F.prototype._setContent=function(c){var p=this._getPopover();p.removeAllContent();p.addContent(c);return this;};return F;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.FieldRenderer')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.experimental.FieldRenderer');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.ui.core.IconPool');jQuery.sap.require('sap.ui.core.ValueState');sap.ui.define("sap/ui/mdc/experimental/FieldRenderer",['jquery.sap.global','sap/ui/core/Renderer','sap/ui/core/IconPool','sap/ui/core/ValueState'],function(q,R,I,V){"use strict";I.insertFontFaceStyle();var F=R.extend("sap.ui.mdc.experimental.FieldRenderer");F.render=function(r,f){var c={content:f._getContent(),editMode:f.getEditMode(),width:f.getWidth(),valueState:f.getValueState()};r.write("<div");r.writeControlData(f);r.addClass("sapUiMdcBaseField");if(c.width){if(c.width==="content"){r.addStyle("width","auto");}else{r.addStyle("width",c.width);}}r.writeStyles();r.writeClasses();r.write(">");if(c.content){r.renderControl(c.content);}r.write("</div>");};return F;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.LinkList')){
/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.experimental.LinkList');jQuery.sap.require('sap.ui.model.base.ManagedObjectModel');jQuery.sap.require('sap.m.VBox');sap.ui.define("sap/ui/mdc/experimental/LinkList",['sap/ui/mdc/experimental/FieldHelpBase','sap/ui/model/base/ManagedObjectModel','sap/m/VBox'],function(F,M,V){"use strict";var L=F.extend("sap.ui.mdc.experimental.LinkList",{metadata:{library:"sap.ui.mdc",properties:{},aggregations:{links:{type:"sap.m.Link",multiple:true,singularName:"link"}},defaultAggregation:"links",events:{}}});L.prototype.showLink=function(){var l=this.getLinks();var b=false;for(var i=0;i<l.length;i++){var o=l[i];if(o.getEnabled()){b=true;break;}}return b;};L.prototype._createPopover=function(){var p=F.prototype._createPopover.apply(this,arguments);this._oVBox=new V(this.getId()+"-VBox",{width:"100%",items:this.getAggregation("links")});this._setContent(this._oVBox);return p;};L.prototype.getLinks=function(){if(this._oVBox){return this._oVBox.getItems();}else{return this.getAggregation("links",[]);}};L.prototype.indexOfLink=function(l){if(this._oVBox){return this._oVBox.indexOfItem(l);}else{return this.indexOfAggregation("links",l);}};L.prototype.addLink=function(l){if(this._oVBox){this._oVBox.addItem(l);}else{this.addAggregation("links",l);}l.attachEvent("_change",_,this);this.fireDataUpdate();return this;};L.prototype.insertLink=function(l,i){if(this._oVBox){this._oVBox.insertItem(l,i);}else{this.insertAggregation("links",l,i);}l.attachEvent("_change",_,this);this.fireDataUpdate();return this;};L.prototype.removeLink=function(l){var r;if(this._oVBox){r=this._oVBox.removeItem(l);}else{r=this.removeAggregation("links",l);}if(r){r.detachEvent("_change",_,this);}this.fireDataUpdate();return r;};L.prototype.removeAllLinks=function(){var r;if(this._oVBox){r=this._oVBox.removeAllItema();}else{r=this.removeAllAggregation("links");}for(var i=0;i<r.length;i++){var l=r[i];l.detachEvent("_change",_,this);}this.fireDataUpdate();return r;};L.prototype.destroyLinks=function(){var l=this.getLinks();for(var i=0;i<l.length;i++){var o=l[i];o.detachEvent("_change",_,this);}if(this._oVBox){this._oVBox.destroyItema();}else{this.destroyAggregation("links");}this.fireDataUpdate();return this;};function _(e){var n=e.getParameter("name");if(n=="enabled"||n=="visible"){this.fireDataUpdate();}}return L;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.ListFieldHelp')){jQuery.sap.declare('sap.ui.mdc.experimental.ListFieldHelp');jQuery.sap.require('sap.ui.model.base.ManagedObjectModel');jQuery.sap.require('sap.ui.base.ManagedObjectObserver');jQuery.sap.require('sap.m.List');jQuery.sap.require('sap.m.DisplayListItem');sap.ui.define("sap/ui/mdc/experimental/ListFieldHelp",['sap/ui/mdc/experimental/FieldHelpBase','sap/ui/model/base/ManagedObjectModel','sap/ui/base/ManagedObjectObserver','sap/m/List','sap/m/DisplayListItem'],function(F,M,a,L,D){"use strict";var b=F.extend("sap.ui.mdc.experimental.ListFieldHelp",{metadata:{library:"sap.ui.mdc",properties:{},aggregations:{items:{type:"sap.ui.core.ListItem",multiple:true,singularName:"item"}},defaultAggregation:"items",events:{}}});b.prototype.init=function(){F.prototype.init.apply(this,arguments);this._oManagedObjectModel=new M(this);this._oObserver=new a(_.bind(this));this._oObserver.observe(this,{properties:["selectedKey","filterValue"],aggregations:["items"]});};b.prototype.exit=function(){F.prototype.exit.apply(this,arguments);this._oManagedObjectModel.destroy();delete this._oManagedObjectModel;this._oObserver.disconnect();this._oObserver=undefined;};b.prototype._createPopover=function(){var p=F.prototype._createPopover.apply(this,arguments);var P=this.getParent();if(P){p.setInitialFocus(P);}var i=new D({label:"{$field>text}",value:"{$field>additionalText}"});var o=new sap.ui.model.Filter("text",e.bind(this));this._oList=new L(this.getId()+"-List",{width:"100%",showNoData:false,mode:sap.m.ListMode.SingleSelectMaster,rememberSelections:false,items:{path:"$field>items",template:i,filters:o},selectionChange:c.bind(this)});this._oList.setModel(this._oManagedObjectModel,"$field");this._oList.bindElement({path:"/",model:"$field"});f.call(this,this.getSelectedKey());this._setContent(this._oList);return p;};b.prototype.setParent=function(p,A,s){F.prototype.setParent.apply(this,arguments);var P=this.getAggregation("_popover");if(P){P.setInitialFocus(p);}return this;};function _(C){if(C.name=="items"){this.fireDataUpdate();}if(C.name=="selectedKey"){f.call(this,C.current);}if(C.name=="filterValue"){if(this._oList){var B=this._oList.getBinding("items");B.update();this._oList.updateItems();this._oList.invalidate();f.call(this,this.getSelectedKey());}}}b.prototype.openByTyping=function(){return true;};b.prototype.navigate=function(s){var p=this._getPopover();var S=this._oList.getSelectedItem();var i=this._oList.getItems();var I=i.length;var g=0;if(S){g=this._oList.indexOfItem(S);g=g+s;if(g<0){g=0;}else if(g>=I-1){g=I-1;}}else if(s>=0){g=s-1;}else{g=I+s;}var o=i[g];if(o){var O=d.call(this,o);o.setSelected(true);this.setProperty("selectedKey",O.getKey(),true);if(!p.isOpen()){this.open();}this.fireNavigate({value:o.getLabel(),additionalValue:o.getValue(),key:O.getKey()});}};b.prototype.getTextForKey=function(k){var I=this.getItems();for(var i=0;i<I.length;i++){var o=I[i];if(o.getKey()==k){return o.getText();}}return"";};b.prototype.getKeyForText=function(t){var I=this.getItems();for(var i=0;i<I.length;i++){var o=I[i];if(o.getText()==t){return o.getKey();}}return"";};function c(E){var i=E.getParameter("listItem");var s=E.getParameter("selected");if(s){var o=d.call(this,i);this.setProperty("selectedKey",o.getKey(),true);this.close();this.fireSelect({value:i.getLabel(),additionalValue:i.getValue(),key:o.getKey()});}}function d(i){var p=i.getBindingContextPath();return this._oManagedObjectModel.getProperty(p);}function e(t){var s=this.getFilterValue();if(!s||jQuery.sap.startsWithIgnoreCase(t,s)){return true;}else{return false;}}function f(s){if(this._oList){var I=this._oList.getItems();for(var i=0;i<I.length;i++){var o=I[i];var O=d.call(this,o);if(O.getKey()==s){o.setSelected(true);}else{o.setSelected(false);}}}}return b;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nInternalModel')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nInternalModel');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.ManagedObject');jQuery.sap.require('sap.ui.model.json.JSONModel');jQuery.sap.require('sap.ui.comp.personalization.Util');sap.ui.define("sap/ui/mdc/experimental/P13nInternalModel",['jquery.sap.global','sap/ui/base/ManagedObject','sap/ui/model/json/JSONModel','sap/ui/comp/personalization/Util'],function(q,M,J,P){"use strict";var c=J.extend("sap.ui.mdc.experimental.P13nInternalModel",{constructor:function(i,s){J.apply(this,arguments);this._initialize();}});c.prototype._initialize=function(){var m=this.getProperty("/tableItems").map(function(p){if(typeof p==="string"){p=sap.ui.getCore().byId(p);}return{columnKey:p.getColumnKey(),selected:p.getSelected(),position:p.getPosition(),text:p.getText()};});this._sortBySelectedAndPosition(m);this.setData({items:m});this.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);this.setSizeLimit(1000);};c.prototype.getModelItemByColumnKey=function(C){var m=this.getProperty("/items").filter(function(o){return o.columnKey===C;});return m[0];};c.prototype.getIndexOfModelItem=function(m){return this.getProperty("/items").indexOf(m);};c.prototype.selectModelItem=function(m,i){m.selected=i;var a=this.getProperty("/items");var b=this._getSelectedModelItemsBetween(m,a[0]);if(b.length&&b[0].position>m.position){this.moveModelItemPosition(m,b[0]);}else{b=this._getSelectedModelItemsBetween(m,a[a.length-1]);if(b.length&&b[0].position<m.position){this.moveModelItemPosition(m,b[0]);}}};c.prototype.moveModelItem=function(m,o){if(!m||!o){return;}var a=this.getProperty("/items");var i=a.indexOf(m);var I=a.indexOf(o);if(i<0||I<0||i>a.length-1||I>a.length-1){return;}var b=a.splice(i,1)[0];a.splice(I,0,b);this.setProperty("/items",a);};c.prototype.moveModelItemPosition=function(m,o){var s=this._getSelectedModelItemsBetween(m,o);if(!s.length){return;}var d=this.getProperty("/items");var i=d.indexOf(m);var I=d.indexOf(o);if(i<I){o=s[s.length-1];}else{o=s[s.length-1];}var e=q.extend(true,[],d);e.sort(function(a,b){if(a.position<b.position){return-1;}else if(a.position>b.position){return 1;}else{return 0;}});var f=e.splice(m.position,1)[0];e.forEach(function(a,b){a.position=b;});e.splice(o.position,0,f);e.forEach(function(a,b){a.position=b;});d.forEach(function(a,b){var g=P.getArrayElementByKey("columnKey",a.columnKey,e);this.setProperty("/items/"+b+"/position",g.position);},this);};c.prototype._getSelectedModelItemsBetween=function(m,o){var a=this.getProperty("/items");var i=a.indexOf(m);var I=a.indexOf(o);if(i===I){return[];}var b=[];if(i<I){b=a.slice(i+1,I+1);return b.filter(function(d){return!!d.selected;});}b=a.slice(I,i).reverse();return b.filter(function(d){return!!d.selected;});};c.prototype._sortBySelectedAndPosition=function(m){m.sort(function(a,b){if(a.selected===true&&(b.selected===false||b.selected===undefined)){return-1;}else if((a.selected===false||a.selected===undefined)&&b.selected===true){return 1;}else if(a.selected===true&&b.selected===true){if(a.position<b.position){return-1;}else if(a.position>b.position){return 1;}else{return 0;}}else if((a.selected===false||a.selected===undefined)&&(b.selected===false||b.selected===undefined)){if(a.text<b.text){return-1;}else if(a.text>b.text){return 1;}else{return 0;}}});};return c;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nItem')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nItem');jQuery.sap.require('sap.ui.core.Element');sap.ui.define("sap/ui/mdc/experimental/P13nItem",['sap/ui/core/Element'],function(E){"use strict";var P=E.extend("sap.ui.mdc.experimental.P13nItem",{metadata:{"abstract":true,library:"sap.ui.mdc",properties:{columnKey:{type:"string",defaultValue:undefined},text:{type:"string",defaultValue:undefined},tooltip:{type:"string",defaultValue:undefined}}}});return P;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nPanelFormatter')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nPanelFormatter');sap.ui.define("sap/ui/mdc/experimental/P13nPanelFormatter",[],function(){"use strict";var P={showCount:function(c,C){return sap.ui.getCore().getLibraryResourceBundle("sap.m").getText('COLUMNSPANEL_SELECT_ALL_WITH_COUNTER',[c,C]);},determineCount:function(i){this._updateCounts();return P.showCount(this.getCountOfSelectedItems(),this.getCountOfItems());},isTrue:function(v){return!!v;},showDimMeasureType:function(m){if(m.aggregationRole==="dimension"){return sap.ui.getCore().getLibraryResourceBundle("sap.m").getText('COLUMNSPANEL_TYPE_DIMENSION');}if(m.aggregationRole==="measure"){return sap.ui.getCore().getLibraryResourceBundle("sap.m").getText('COLUMNSPANEL_TYPE_MEASURE');}return;},createChartRoleTypes:function(i,b){var a=b.getObject();return new sap.ui.core.Item({key:a.key,text:a.text});}};return P;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nSelectionItem')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nSelectionItem');sap.ui.define("sap/ui/mdc/experimental/P13nSelectionItem",['sap/ui/mdc/experimental/P13nItem'],function(P){"use strict";var a=P.extend("sap.ui.mdc.experimental.P13nSelectionItem",{metadata:{library:"sap.ui.mdc",properties:{selected:{type:"boolean",defaultValue:false},position:{type:"int"},href:{type:"string",defaultValue:undefined},target:{type:"string",defaultValue:undefined},press:{type:"object",defaultValue:null}}}});return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nSortItem')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nSortItem');sap.ui.define("sap/ui/mdc/experimental/P13nSortItem",['sap/ui/mdc/experimental/P13nItem'],function(P){"use strict";var a=P.extend("sap.ui.mdc.experimental.P13nSortItem",{metadata:{library:"sap.ui.mdc",properties:{selected:{type:"boolean",defaultValue:false},position:{type:"int"},sortOrder:{type:"string"}}}});return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nSortModel')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nSortModel');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.ManagedObject');jQuery.sap.require('sap.ui.model.json.JSONModel');jQuery.sap.require('sap.ui.comp.personalization.Util');sap.ui.define("sap/ui/mdc/experimental/P13nSortModel",['jquery.sap.global','sap/ui/base/ManagedObject','sap/ui/model/json/JSONModel','sap/ui/comp/personalization/Util'],function(q,M,J,P){"use strict";var c=J.extend("sap.ui.mdc.experimental.P13nSortModel",{constructor:function(i,s){J.apply(this,arguments);this._initialize();}});c.prototype._initialize=function(){var t=this.getProperty("/tableItems");var m=t.map(function(p){if(typeof p==="string"){p=sap.ui.getCore().byId(p);}return{columnKey:p.getColumnKey(),selected:p.getSelected(),position:p.getPosition(),text:p.getText(),sortOrder:p.getSortOrder(),comboboxKey:p.getColumnKey(),availableItems:[]};},this);this._sortBySelectedAndPosition(m);this.setProperty("/items",m);this.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);this.setSizeLimit(1000);this._updateMItemsAvailableItems();};c.prototype.insertModelItemOfIndex=function(i){var m=this.getProperty("/items");m.splice(i+1,0,{columnKey:"(none)",comboboxKey:"(none)",text:"(none)",sortOrder:"Ascending",selected:false,position:undefined,availableItems:[]});this.setProperty("/items",m);this._updateMItemsAvailableItems();this._updateAndSyncMItemsPosition();};c.prototype.removeModelItemOfIndex=function(i){this._updateAndSyncProperties(i,{sortOrder:undefined,selected:false,position:undefined});var m=this.getProperty("/items");m.splice(i,1);if(!m.length){m.splice(0,0,{columnKey:"(none)",comboboxKey:"(none)",text:"(none)",sortOrder:"Ascending",selected:false,position:undefined,availableItems:[]});}this.setProperty("/items",m);this._updateMItemsAvailableItems();this._updateAndSyncMItemsPosition();};c.prototype.replaceModelItemOfIndex=function(i){var m=q.extend(true,{},this.getModelItemByIndex(i));this._updateAndSyncProperties(i,{sortOrder:undefined,selected:false,position:undefined});var I=this.getItemByColumnKey(m.comboboxKey);this.setProperty("/items/"+i+"/columnKey",m.comboboxKey?m.comboboxKey:"(none)");this.setProperty("/items/"+i+"/comboboxKey",m.comboboxKey?m.comboboxKey:"(none)");this.setProperty("/items/"+i+"/text",I?I.getText():"(none)");this._updateAndSyncProperties(i,{sortOrder:m.sortOrder,selected:!!I,position:m.position});this._updateMItemsAvailableItems();};c.prototype._updateItemsPosition=function(){this.getProperty("/availableItems").forEach(function(i){var m=this.getModelItemByColumnKey(i.getColumnKey());if(m){i.setPosition(m.position);}else{i.setPosition(undefined);}},this);};c.prototype.updateProperties=function(i,m){this._updateAndSyncProperties(i,m);};c.prototype._updateAndSyncProperties=function(i,m){var o=this.getModelItemByIndex(i);var I=this.getItemByColumnKey(o.columnKey);if(o){if(m.hasOwnProperty("selected")){this.setProperty("/items/"+i+"/selected",m.selected);if(I){I.setSelected(m.selected);}}if(m.hasOwnProperty("sortOrder")){this.setProperty("/items/"+i+"/sortOrder",m.sortOrder);if(I){I.setSortOrder(m.sortOrder);}}if(m.hasOwnProperty("position")){this.setProperty("/items/"+i+"/position",m.position);if(I){I.setPosition(m.position);}}}};c.prototype._updateAndSyncMItemsPosition=function(){var p=-1;var m=this.getProperty("/items");m.forEach(function(o,i){this._updateAndSyncProperties(i,{position:o.selected===true?++p:undefined});},this);};c.prototype._updateMItemsAvailableItems=function(){if(!this.getProperty("/availableItems")){return;}var a=this.getProperty("/availableItems").filter(function(t){return!this.getModelItemByColumnKey(t.getColumnKey());},this).map(function(t){return{comboboxKey:t.getColumnKey(),text:t.getText()};});this.getProperty("/items").forEach(function(m,i){var C=q.extend(true,[],a);C.splice(0,0,{comboboxKey:m.columnKey,text:m.text});this.setProperty("/items/"+i+"/availableItems",C);},this);};c.prototype.getItemByColumnKey=function(C){var i=this.getProperty("/availableItems").filter(function(I){return I.getColumnKey()===C;});return i[0];};c.prototype.getModelItemByColumnKey=function(C){var m=this.getProperty("/items").filter(function(o){return o.columnKey===C;});return m[0];};c.prototype.getModelItemByIndex=function(i){return this.getProperty("/items/"+i);};c.prototype.getIndexOfModelItem=function(m){return this.getProperty("/items").indexOf(m);};c.prototype.selectModelItem=function(i,I){var m=this.getModelItemByIndex(i);this._updateAndSyncProperties(i,{selected:I});this._updateAndSyncMItemsPosition();var a=this.getProperty("/items");var b=this._getSelectedModelItemsBetween(m,a[0]);if(b.length&&b[0].position>m.position){this.moveModelItemPosition(m,b[0]);}else{b=this._getSelectedModelItemsBetween(m,a[a.length-1]);if(b.length&&b[0].position<m.position){this.moveModelItemPosition(m,b[0]);}}};c.prototype.moveModelItem=function(i,I){var m=this.getModelItemByIndex(i);var o=this.getModelItemByIndex(I);if(!m||!o){return;}var a=this.getProperty("/items");var i=a.indexOf(m);var I=a.indexOf(o);if(i<0||I<0||i>a.length-1||I>a.length-1){return;}var b=a.splice(i,1)[0];a.splice(I,0,b);this.setProperty("/items",a);};c.prototype.moveModelItemPosition=function(i,I){var m=this.getModelItemByIndex(i);var o=this.getModelItemByIndex(I);var s=this._getSelectedModelItemsBetween(m,o);if(!s.length){return;}var d=this.getProperty("/items");var e=d.indexOf(m);var f=d.indexOf(o);var g=q.extend(true,[],d);g.sort(function(a,b){if(a.position<b.position){return-1;}else if(a.position>b.position){return 1;}else{return 0;}});var h=g.splice(e,1)[0];var p=-1;g.forEach(function(a){a.position=a.selected===true?++p:undefined;});g.splice(f,0,h);p=-1;g.forEach(function(a){a.position=a.selected===true?++p:undefined;});d.forEach(function(a,b){var j=P.getArrayElementByKey("columnKey",a.columnKey,g);this._updateAndSyncProperties(b,{position:j.position});},this);};c.prototype._getSelectedModelItemsBetween=function(m,o){var a=this.getProperty("/items");var i=a.indexOf(m);var I=a.indexOf(o);if(i===I){return[];}var b=[];if(i<I){b=a.slice(i+1,I+1);return b.filter(function(d){return!!d.selected;});}b=a.slice(I,i).reverse();return b.filter(function(d){return!!d.selected;});};c.prototype._sortBySelectedAndPosition=function(m){if(this.getProperty("/preventInitialSort")){return;}m.sort(function(a,b){if(a.selected===true&&(b.selected===false||b.selected===undefined)){return-1;}else if((a.selected===false||a.selected===undefined)&&b.selected===true){return 1;}else if(a.selected===true&&b.selected===true){if(a.position<b.position){return-1;}else if(a.position>b.position){return 1;}else{return 0;}}else if((a.selected===false||a.selected===undefined)&&(b.selected===false||b.selected===undefined)){if(a.text<b.text){return-1;}else if(a.text>b.text){return 1;}else{return 0;}}});};return c;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.TableFieldHelp')){jQuery.sap.declare('sap.ui.mdc.experimental.TableFieldHelp');jQuery.sap.require('sap.ui.model.base.ManagedObjectModel');jQuery.sap.require('sap.ui.base.ManagedObjectObserver');jQuery.sap.require('sap.m.List');jQuery.sap.require('sap.m.DisplayListItem');sap.ui.define("sap/ui/mdc/experimental/TableFieldHelp",['sap/ui/mdc/experimental/FieldHelpBase','sap/ui/model/base/ManagedObjectModel','sap/ui/base/ManagedObjectObserver','sap/m/List','sap/m/DisplayListItem'],function(F,M,a,L,D){"use strict";var T=F.extend("sap.ui.mdc.experimental.TableFieldHelp",{metadata:{library:"sap.ui.mdc",properties:{keyColumn:{type:"int",group:"Data",defaultValue:0},valueColumn:{type:"int",group:"Data",defaultValue:0}},aggregations:{table:{type:"sap.m.Table",multiple:false}},defaultAggregation:"table",events:{}}});T.prototype.init=function(){F.prototype.init.apply(this,arguments);this._oObserver=new a(_.bind(this));this._oObserver.observe(this,{properties:["selectedKey","filterValue"],aggregations:["table"]});};T.prototype.exit=function(){F.prototype.exit.apply(this,arguments);this._oObserver.disconnect();this._oObserver=undefined;};T.prototype._createPopover=function(){var p=F.prototype._createPopover.apply(this,arguments);var P=this.getParent();if(P){p.setInitialFocus(P);}p.getContent=function(){var P=this.getParent();if(P){return[P.getTable()];}return[];};return p;};T.prototype.setParent=function(p,A,s){F.prototype.setParent.apply(this,arguments);var P=this.getAggregation("_popover");if(P){P.setInitialFocus(p);}return this;};function _(C){if(C.name=="table"){this.fireDataUpdate();var t=C.child;var p=this.getAggregation("_popover");if(C.mutation=="remove"){t.detachEvent("selectionChange",b,this);t.detachEvent("updateFinished",d,this);}else{t.setMode(sap.m.ListMode.SingleSelectMaster);t.setRememberSelections(false);t.attachEvent("selectionChange",b,this);t.attachEvent("updateFinished",d,this);e.call(this,this.getSelectedKey());}if(p){p.invalidate();}}if(C.name=="selectedKey"){e.call(this,C.current);}if(C.name=="filterValue"){}}T.prototype.openByTyping=function(){return true;};T.prototype.navigate=function(s){var t=this.getTable();var p=this._getPopover();var S=t.getSelectedItem();var i=t.getItems();var I=i.length;var f=0;if(S){f=t.indexOfItem(S);f=f+s;if(f<0){f=0;}else if(f>=I-1){f=I-1;}}else if(s>=0){f=s-1;}else{f=I+s;}var o=i[f];if(o){o.setSelected(true);var k=c.call(this,o);this.setProperty("selectedKey",k.key,true);if(!p.isOpen()){this.open();}this.fireNavigate({value:k.value,additionalValue:k.additionalValue,key:k.key});}};T.prototype.getTextForKey=function(k){var K=this.getKeyColumn();var v=this.getValueColumn();var t=this.getTable();if(t){var I=t.getItems();for(var i=0;i<I.length;i++){var o=I[i];if(o.getCells){var C=o.getCells();var f=C[K];var V=C[v];var s;if(f.getText){s=f.getText();}if(k==s){if(V.getText){return V.getText();}else{return"";}}}}}return"";};T.prototype.getKeyForText=function(t){var k=this.getKeyColumn();var v=this.getValueColumn();var o=this.getTable();if(o){var I=o.getItems();for(var i=0;i<I.length;i++){var f=I[i];if(f.getCells){var C=f.getCells();var K=C[k];var V=C[v];var s;if(V.getText){s=V.getText();}if(s==t){if(K.getText){return K.getText();}else{return"";}}}}}return"";};function b(E){var i=E.getParameter("listItem");var s=E.getParameter("selected");if(s){var k=c.call(this,i);this.setProperty("selectedKey",k.key,true);this.close();this.fireSelect({value:k.value,additionalValue:k.additionalValue,key:k.key});}}function c(i){var k=this.getKeyColumn();var v=this.getValueColumn();var K;var V;var A;if(i.getCells){var C=i.getCells();var o=C[k];var f=C[v];if(o.getText){K=o.getText();}if(f.getText){V=f.getText();}}return{key:K,value:V,additionalValue:A};}function d(){e.call(this,this.getSelectedKey());this.fireDataUpdate();}function e(s){var t=this.getTable();if(t){var I=t.getItems();for(var i=0;i<I.length;i++){var o=I[i];var k=c.call(this,o);if(k.key==s){o.setSelected(true);}else{o.setSelected(false);}}}}return T;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.ControlProvider')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.ControlProvider');jQuery.sap.require('sap.ui.base.ManagedObject');jQuery.sap.require('sap.ui.base.BindingParser');sap.ui.define("sap/ui/mdc/experimental/provider/ControlProvider",["sap/ui/base/ManagedObject","sap/ui/base/BindingParser"],function(M,B){"use strict";var C={mProvidedProperties:{},mProvidedFunctions:{}};C.provideAttribute=function(n,a,v){if(v!=null){n.setAttribute(a,v);}};C.provideProperty=function(c,p,v,a){if(v!=null){var b,P=c.getMetadata().getProperty(p);if(!P){return;}if(C.isPropertyAllowedToBeProvided(c,p,v)){c._oProviderData.mProvidedProperties[p]={value:v,info:a};b=C.getAsBinding(v);if(b){c.bindProperty(p,b);}else{P.set(c,v);}}}};C.provideAggregation=function(c,a,v,t,s){if(v!=null){var b,A=c.getMetadata().getAggregation(a);if(!A){return;}if(C.isPropertyAllowedToBeProvided(c,a,v)){c._oProviderData.mProvidedProperties[a]=v;b=C.getAsBinding(v);b.template=t;b.templateShareable=s;c.bindAggregation(a,b);}}};C.providePrepareCloneFunction=function(c,f,F){c._oProviderData.mProvidedFunctions[f]=F;F(c);};C.prepareClone=function(c){var f=c._oProviderData.mProvidedFunctions;for(var i in f){f[i](c);}};C.isPropertyAlreadyProvided=function(c,p,v){if(c._oProviderData.mProvidedProperties[p]&&c._oProviderData.mProvidedProperties[p]===v){return true;}return false;};C.isPropertyAllowedToBeProvided=function(c,p,v){if(c.isPropertyInitial(p)){return true;}if(C.isPropertyAlreadyProvided(c,p,v)&&c._oProviderData.mProvidedProperties[p]!==v){return true;}return false;};C.canControlBeProvided=function(c,p){if(!c){return false;}if(!c._oProviderData){c._oProviderData={mProvidedProperties:{},mProvidedFunctions:{},providedFrom:p};return true;}else if(c._oProviderData.providedFrom&&c._oProviderData.providedFrom===p){return true;}return false;};C.getAsBinding=function(b){if(typeof b=='string'){return M.bindingParser(b);}else if(typeof b=='object'){return b;}return undefined;};C.getAsString=function(b){if(typeof b=='string'){return b;}else if(typeof b=='object'){var r=JSON.stringify(b);r=r.replace(new RegExp("\"path\"","g"),"path");r=r.replace(new RegExp("\"parts\"","g"),"parts");r=r.replace(new RegExp("\"parameters\"","g"),"parameters");r=r.replace(new RegExp("\"expand\"","g"),"expand");r=r.replace(new RegExp("\"","g"),"'");return r;}return undefined;};C.mergeBindings=function(b,f){var s="{ parts: ["+b.join(",")+"] }";var o=C.getAsBinding(s);o.formatter=[f];return o;};C.getProvidedData=function(c){var r={};if(c){r=c._oProviderData?c._oProviderData.mProvidedProperties:{};}return r;};return C;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.adapter.base.BaseAdapter')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.adapter.base.BaseAdapter');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/ui/mdc/experimental/provider/adapter/base/BaseAdapter",["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";var a=B.extend("sap.ui.mdc.experimental.provider.adapter.base.BaseAdapter",{oMetaModel:undefined,sModelName:undefined,_mPropertyBag:{},constructor:function(m,M,c,s,C){this.oModel=m;this.oMetaModel=m.getMetaModel();this.sModelName=M;this.sContextName=c;C=C||false;if(s){this.switchMetaContext(s,C);}this.putProperty("enabled",this.enabled);this.putProperty("label",this.label);this.putProperty("tooltip",this.tooltip);this.putProperty("//",this["//"]);},ready:function(){if(this.oMetaModel.loaded){return this.oMetaModel.loaded();}},kind:function(){throw new Error("sap.ui.mdc.experimental.provider.model.BaseAdapter:  method kind must be redefined");},switchMetaContext:function(m,c){var C;if(c){C=m;}else{this.oMetaContext=this.oMetaModel.getMetaContext(m);C=this.oMetaContext.getPath();}if(C&&C!=this.sMetaContext){this.sMetaContext=C;if(!this._mPropertyBag[this.sMetaContext]){this._mPropertyBag[this.sMetaContext]={};}}this.afterMetaContextSwitch(this.sMetaContext,m);},afterMetaContextSwitch:function(m){throw new Error("sap.ui.mdc.experimental.provider.model.BaseAdapter:  method afterMetaContextSwitch must be redefined");},getModelName:function(){return this.sModelName;},putProperty:function(p,g,A,c){if(!c){c=this;}Object.defineProperty(this,p,{configurable:true,get:function(){if(!this._mPropertyBag[this.sMetaContext].hasOwnProperty(p)){this._mPropertyBag[this.sMetaContext][p]=g.apply(c,A);}return this._mPropertyBag[this.sMetaContext][p];}});},enabled:function(){return true;},disabled:function(){return false;},label:function(){throw new Error("sap.ui.mdc.experimental.provider.model.BaseAdapter:  method getLabel must be redefined");},tooltip:function(){throw new Error("sap.ui.mdc.experimental.provider.model.FieldAdapter:  method getTooltip must be redefined");},asPath:function(v,t){var p="{";if(this.sModelName){p=p+"model: '"+this.sModelName+"',";}p=p+"path: '"+v+"'";if(t){p=p+", type: '"+t+"'";}p=p+"}";return p;},getContext:function(){return this.sContextName;},not:function(p){var n;if(p[0]!="!"){n="!"+p;}else{n=p.substr(1);}return this[n];},setValue:function(p,v){Object.defineProperty(this,p,{configurable:true,get:function(){if(!this._mPropertyBag[this.sMetaContext].hasOwnProperty(p)){this._mPropertyBag[this.sMetaContext][p]=v;}return this._mPropertyBag[this.sMetaContext][p];}});}});return a;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.adapter.base.CollectionAdapter')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.adapter.base.CollectionAdapter');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/mdc/experimental/provider/adapter/base/CollectionAdapter",["jquery.sap.global","./BaseAdapter"],function(q,B){"use strict";var C=B.extend("sap.ui.mdc.experimental.provider.model.CollectionAdapter",{constructor:function(m,M,s,c,a){var S=B;if(a){q.extend(S.prototype,a.prototype);S.prototype.constructor=B;}S.prototype.constructor.apply(this,arguments);this.putProperty("columns",this.columns);this.putProperty("measures",this.measures);this.putProperty("dimensions",this.dimensions);this.putProperty("filterItems",this.filterItems);},columns:function(){throw new Error("ap.ui.mdc.experimental.provider.model.CollectionAdapter:  method columns must be redefined");},measures:function(){throw new Error("ap.ui.mdc.experimental.provider.model.CollectionAdapter:  method measures must be redefined");},dimensions:function(){throw new Error("ap.ui.mdc.experimental.provider.model.CollectionAdapter:  method dimensions must be redefined");},filterItems:function(){throw new Error("ap.ui.mdc.experimental.provider.model.CollectionAdapter:  method filterItems must be redefined");}});return C;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.adapter.base.FieldAdapter')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.adapter.base.FieldAdapter');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/mdc/experimental/provider/adapter/base/FieldAdapter",["jquery.sap.global","./BaseAdapter"],function(q,B){"use strict";var F=B.extend("sap.ui.mdc.experimental.provider.adapter.base.FieldAdapter",{constructor:function(m,M,s,c,a){var S=B;if(a){q.extend(S.prototype,a.prototype);S.prototype.constructor=B;}S.prototype.constructor.apply(this,arguments);this.putProperty("allowEmptyValue",this.allowEmptyValue);this.putProperty("defaultValue",this.defaultValue);this.putProperty("maximum",this.maximum);this.putProperty("exclusiveMaximum",this.exclusiveMaximum);this.putProperty("minimum",this.minimum);this.putProperty("exclusiveMinimum",this.exclusiveMinimum);this.putProperty("maxLength",this.maxLength);this.putProperty("minLength",this.minLength);this.putProperty("multipleOf",this.multipleOf);this.putProperty("pattern",this.pattern);this.putProperty("visible",this.visible);this.putProperty("value",this.value);this.putProperty("required",this.required);this.putProperty("name",this.name);this.putProperty("precision",this.precision);this.putProperty("scale",this.scale);this.putProperty("unit",this.unit);this.putProperty("semantics",this.semantics);this.putProperty("textAlign",this.textAlign);this.putProperty("ui5Type",this.ui5Type);this.putProperty("formatOptions",this.formatOptions);this.putProperty("constraints",this.constraints);this.putProperty("valueHelp",this.valueHelp);this.putProperty("describedBy",this.describedBy);},kind:function(){return'field';},allowEmptyValue:function(){return true;},defaultValue:function(){switch(this.ui5Type){case"sap.ui.model.odata.type.Boolean":return false;case"sap.ui.model.odata.type.Byte":case"sap.ui.model.odata.type.Decimal":case"sap.ui.model.odata.type.Double":case"sap.ui.model.odata.type.Guid":case"sap.ui.model.odata.type.Int16":case"sap.ui.model.odata.type.Int32":case"sap.ui.model.odata.type.Int64":case"sap.ui.model.odata.type.SByte":case"sap.ui.model.odata.type.Single":return 0;case"sap.ui.model.odata.type.Date":case"sap.ui.model.odata.type.DateTimeOffset":case"sap.ui.model.odata.type.TimeOfDay":return new Date();case"Edm.String":return"";default:return"";}},precision:function(){return 1;},scale:function(){return 0;},maximum:function(){return 0;},exclusiveMaximum:function(){return false;},minimum:function(){return 0;},exclusiveMinimum:function(){return false;},maxLength:function(){return 255;},minLength:function(){return-1;},multipleOf:function(){return 1;},pattern:function(){return"/.*?/";},unit:function(){},visible:function(){return true;},hidden:function(){return false;},value:function(){return this.asPath(this.name,this.ui5Type);},name:function(){throw new Error("sap.ui.mdc.experimental.provider.adapter.base.FieldAdapter:  method name must be redefined");},required:function(){return false;},semantics:function(){return F.Semantics.Text;},textAlign:function(){},url:function(){return false;},password:function(){return false;},phoneNumber:function(){return false;},eMail:function(){return false;},ui5Type:function(){return"Text";},constraints:function(){},formatOptions:function(){throw new Error("sap.ui.mdc.experimental.provider.adapter.base.FieldAdapter:  method formatOptions must be redefined");},filterable:function(){return true;},requiredInFilter:function(){return false;},sortable:function(){return true;},valueHelp:function(){return[];},describedBy:function(){return this;}});F.Semantics={text:0,eMail:1,password:2,url:3,phoneNumber:4,currency:5,measure:6};return F;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.adapter.base.ObjectAdapter')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.adapter.base.ObjectAdapter');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/mdc/experimental/provider/adapter/base/ObjectAdapter",["jquery.sap.global","./BaseAdapter"],function(q,B){"use strict";var O=B.extend("sap.ui.mdc.experimental.provider.model.ObjectAdapter",{constructor:function(m,M,s,c,a){var S=B;if(a){q.extend(S.prototype,a.prototype);S.prototype.constructor=B;}S.prototype.constructor.apply(this,arguments);this.putProperty("collection",this.collection);this.putProperty("keys",this.keys);this.putProperty("fields",this.fields);this.putProperty("relations",this.relations);},kind:function(){return'object';},collection:function(){throw new Error("ap.ui.mdc.experimental.provider.model.ObjectAdapter:  method collection must be redefined");},keys:function(){},fields:function(){throw new Error("ap.ui.mdc.experimental.provider.model.ObjectAdapter:  method fields must be redefined");},relations:function(){throw new Error("ap.ui.mdc.experimental.provider.model.ObjectAdapter:  method relations must be redefined");}});return O;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.model.ModelAdapter')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.model.ModelAdapter');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/ui/mdc/experimental/provider/model/ModelAdapter",["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";var M=B.extend("sap.ui.mdc.experimental.provider.model.ModelAdapter",{oMetaModel:undefined,sModelName:undefined,_mPropertyBag:{},constructor:function(m,s,a,c){this.oModel=m;this.oMetaModel=m.getMetaModel();this.sModelName=s;c=c||false;if(a){this.switchMetaContext(a,c);}this.putProperty("propertyValue",this.propertyValue);this.putProperty("key",this.key);this.putProperty("visible",this.visible);this.putProperty("hidden",this.hidden);this.putProperty("enabled",this.enabled);this.putProperty("disabled",this.disabled);this.putProperty("required",this.required);this.putProperty("semantics",this.semantics);this.putProperty("ui5Type",this.ui5Type);this.putProperty("formatOptions",this.formatOptions);this.putProperty("tooltip",this.tooltip);this.putProperty("label",this.label);this.putProperty("filterable",this.filterable);this.putProperty("requiredInFilter",this.requiredInFilter);this.putProperty("sortable",this.sortable);},ready:function(){if(this.oMetaModel.loaded){return this.oMetaModel.loaded();}},switchMetaContext:function(m,c){var C;if(c){C=m;}else{this.oMetaContext=this.oMetaModel.getMetaContext(m);C=this.oMetaContext.getPath();}if(C&&C!=this.sMetaContext){this.sMetaContext=C;if(!this._mPropertyBag[this.sMetaContext]){this._mPropertyBag[this.sMetaContext]={};}}this.afterMetaContextSwitch(this.sMetaContext,m);},afterMetaContextSwitch:function(m){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method afterMetaContextSwitch must be redefined");},getModelName:function(){return this.sModelName;},putProperty:function(p,g,a,c){if(!c){c=this;}Object.defineProperty(this,p,{configurable:true,get:function(){if(!this._mPropertyBag[this.sMetaContext].hasOwnProperty(p)){this._mPropertyBag[this.sMetaContext][p]=g.apply(c,a);}return this._mPropertyBag[this.sMetaContext][p];}});},propertyValue:function(){return this.asPath(this.key);},key:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method key must be redefined");},visible:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method visible must be redefined");},hidden:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method isHidden must be redefined");},enabled:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method isEnabled must be redefined");},disabled:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method isDisabled must be redefined");},required:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method isRequired must be redefined");},semantics:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method semantics must be redefined");},url:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method isURL must be redefined");},password:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method isPassword must be redefined");},phoneNumber:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method isPhoneNumber must be redefined");},eMail:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method isEmail must be redefined");},label:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method getLabel must be redefined");},tooltip:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method getTooltip must be redefined");},ui5Type:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method getUI5Type must be redefined");},formatOptions:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method formatOptions must be redefined");},filterable:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method filterable must be redefined");},requiredInFilter:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method requiredInFilter must be redefined");},sortable:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method sortable must be redefined");},asPath:function(s,w){var p=this.sModelName?this.sModelName+">"+s:s;if(!w){p="{path: '"+p+"'}";}return p;}});M.Semantics={eMail:1,password:2,url:3,phoneNumber:4,currency:5,measure:6};return M;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.model.ODataAdapter')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.model.ODataAdapter');sap.ui.define("sap/ui/mdc/experimental/provider/model/ODataAdapter",["./ModelAdapter"],function(M){"use strict";function s(S){var p=S.indexOf("(");return p>=0?S.slice(0,p):S;}var O=M.extend("sap.ui.mdc.experimental.provider.model.ODataAdapter",{_schemaCache:{},aExpand:[],constructor:function(m,a,b,c,B){M.prototype.constructor.apply(this,arguments);this.putProperty("valueList",this.valueList);this.putProperty("fields",this.fields);this.putProperty("expand",this.expand);this.putProperty("navigationProperties",this.navigationProperties);this.putProperty("filterRestrictions",this.filterRestrictions);}});O.prototype.afterMetaContextSwitch=function(c,p){if(!this._schemaCache[c]){this._schemaCache[c]=this.oMetaModel.getProperty(c);this.schema=this._schemaCache[c];this._precalucateFieldControl();}else{this.schema=this._schemaCache[c];}this.oEntitySet=this.calculateEntitySet(p);};O.prototype.calculateEntitySet=function(p){var a,n,e,q,E,P=p.split("/");if(P[0]!==""){return null;}P.shift();E=this.oMetaModel.getODataEntitySet(s(P[0]));if(!E){return null;}P.shift();while(P.length){q=E.entityType;e=this.oMetaModel.getODataEntityType(q);n=s(P[0]);a=this.oMetaModel.getODataAssociationEnd(e,n);if(a){E=this.oMetaModel.getODataEntitySet(a.entitySet);}else{return null;}}return E;};O.prototype.resolveNavi=function(n){var p=n.split("/"),N=p[0];var a=this.oMetaModel.getODataAssociationSetEnd(this.schema,N);var o=this.oMetaModel.getODataEntitySet(a.entitySet);var b="/"+o.name+"/"+p[1];var m=this.oMetaModel.getMetaContext(b);var c=m.getPath();if(this.aExpand.indexOf(N)==-1){this.aExpand.push(N);}var d=new O(this.oModel,this.ModelName,c,true);d.oEntitySet=o;return d;};O.prototype.ui5Type=function(){if(this.oMetaModel.getUI5Type){return this.oMetaModel.getUI5Type(this.sMetaContext);}switch(this.schema.type){case"Edm.Boolean":return"sap.ui.model.odata.type.Boolean";case"Edm.Byte":return"sap.ui.model.odata.type.Byte";case"Edm.Date":return"sap.ui.model.odata.type.Date";case"Edm.DateTimeOffset":return"sap.ui.model.odata.type.DateTimeOffset";case"Edm.Decimal":return"sap.ui.model.odata.type.Decimal";case"Edm.Double":return"sap.ui.model.odata.type.Double";case"Edm.Guid":return"sap.ui.model.odata.type.Guid";case"Edm.Int16":return"sap.ui.model.odata.type.Int16";case"Edm.Int32":return"sap.ui.model.odata.type.Int32";case"Edm.Int64":return"sap.ui.model.odata.type.Int64";case"Edm.SByte":return"sap.ui.model.odata.type.SByte";case"Edm.Single":return"sap.ui.model.odata.type.Single";case"Edm.String":return"sap.ui.model.odata.type.String";case"Edm.TimeOfDay":return"sap.ui.model.odata.type.TimeOfDay";default:return"sap.ui.model.odata.type.String";}};O.prototype.formatOptions=function(){var f="";switch(this.ui5Type){case"sap.ui.model.odata.type.Boolean":break;case"sap.ui.model.odata.type.Byte":break;case"sap.ui.model.odata.type.Date":break;case"sap.ui.model.odata.type.DateTimeOffset":break;case"sap.ui.model.odata.type.Decimal":break;case"sap.ui.model.odata.type.Double":break;case"sap.ui.model.odata.type.Guid":break;case"sap.ui.model.odata.type.Int16":break;case"sap.ui.model.odata.type.Int32":break;case"sap.ui.model.odata.type.Int64":break;case"sap.ui.model.odata.type.SByte":break;case"sap.ui.model.odata.type.Single":break;case"sap.ui.model.odata.type.String":break;case"sap.ui.model.odata.type.TimeOfDay":break;default:break;}return f;};O.prototype.semantics=function(){if(this.getAnnotation("com.sap.vocabularies.Common.v1.Masked")!=null){return M.Semantics.password;}if(this.getAnnotation("com.sap.vocabularies.Communication.v1.IsEmailAddress")!=null){return M.Semantics.eMail;}if(this.getAnnotation("com.sap.vocabularies.Communication.v1.IsPhoneNumber")!=null){return M.Semantics.phoneNumber;}if(this.getAnnotation("com.sap.vocabularies.Communication.v1.IsUrl")!=null){return M.Semantics.url;}if(this.getAnnotation("Org.OData.Measures.V1.Unit")!=null){return M.Semantics.currency;}if(this.getAnnotation("Org.OData.Measures.V1.ISOCurrency")!=null){return M.Semantics.measure;}};O.prototype.key=function(){return this.schema.name;};O.prototype.visible=function(){var h=this._isAnnotationBoolean("com.sap.vocabularies.UI.v1.Hidden");var v=h?!h:true;if(v&&this.schema._fieldControl){v=this.schema._fieldControl.visible;}return v;};O.prototype.hidden=function(){var h=this._isAnnotationBoolean("com.sap.vocabularies.UI.v1.Hidden");var H=h?h:false;if(!H&&this.schema._fieldControl){H=this.schema._fieldControl.hidden;}return H;};O.prototype.enabled=function(){var u=this.getAnnotation("Org.OData.Core.V1.Immutable/Bool")||this.getAnnotation("Org.OData.Core.V1.Computed/Bool");var e=u?u=="false":true;if(e&&this.schema._fieldControl){e=this.schema._fieldControl.editable;}return e;};O.prototype.disabled=function(){var u=this.getAnnotation("Org.OData.Core.V1.Immutable/Bool")||this.getAnnotation("Org.OData.Core.V1.Computed/Bool");var d=u?u=="true":false;if(!d&&this.schema._fieldControl){d=this.schema._fieldControl.readonly;}return d;};O.prototype.required=function(){var r=this.getAnnotation("nullable");var R=r?r=="false":false;if(this.schema._fieldControl){R=this.schema._fieldControl.required;}else{R=R&&this.enabled;}return R;};O.prototype.tooltip=function(){return this.getAnnotation("com.sap.vocabularies.Common.v1.QuickInfo/String");};O.prototype.label=function(){return this.getAnnotation("com.sap.vocabularies.Common.v1.Label/String");};O.prototype.filterable=function(){return(this.filterRestrictions.NonFilterableProperties.indexOf(this.schema.name)===-1);};O.prototype.requiredInFilter=function(){return(this.filterRestrictions.RequiredProperties.indexOf(this.schema.name)!==-1);};O.prototype.sortable=function(){return true;};O.prototype.navigationProperties=function(){var i,n,N=this.getAnnotation("navigationProperty"),a=[];for(i=0;i<N.length;i++){n=N[i];a[n.name]=n;}return a;};O.prototype.expand=function(){return this.aExpand;};O.prototype.valueList=function(){var r=null;var v=this.getAnnotation("com.sap.vocabularies.Common.v1.ValueList");if(v){r={};var e="/"+v.CollectionPath.String;r.valuesPath=this.asPath(e);r.parameters=[];var p,i,l,V,m,a;for(i=0;i<v.Parameters.length;i++){p=v.Parameters[i];l=p.LocalDataProperty?p.LocalDataProperty.PropertyPath:null;V=p.ValueListProperty.PropertyPath;m=this.oMetaModel.getMetaContext(e+"/"+V);a=m.getPath();var o=new O(this.oModel,this.ModelName,a,true);r.parameters.push({targetProperty:l,sourceAdapter:o});}}return r;};O.prototype.fields=function(){var i,f,F=this.getAnnotation("property"),a=[];for(i=0;i<F.length;i++){f=F[i];a[f.name]=new O(this.oModel,this.ModelName,this.sMetaContext+"/property/"+i,true);a[f.name].oEntitySet=this.oEntitySet;}return a;};O.prototype.filterRestrictions=function(){var i,a,f={NonFilterableProperties:[],RequiredProperties:[]};if(this.oEntitySet){a=this.getAnnotation("Org.OData.Capabilities.V1.FilterRestrictions",this.oEntitySet);if(a){if(a.NonFilterableProperties){for(i=0;i<a.NonFilterableProperties.length;i++){f.NonFilterableProperties.push(a.NonFilterableProperties[i].PropertyPath);}}if(a.RequiredProperties){for(i=0;i<a.RequiredProperties.length;i++){f.RequiredProperties.push(a.RequiredProperties[i].PropertyPath);}}}}return f;};O.prototype.getAnnotation=function(a,A){A=A||this.schema;var p=a.split("/");var i=0;while(A&&p[i]){A=A[p[i]];i++;}return A;};O.prototype._isAnnotationBoolean=function(a){var A=this.getAnnotation(a);var i=false;if(A!=null){i=A.Bool?(A.Bool=="true"):true;}return i;};O.prototype._precalucateFieldControl=function(){var f=this.getAnnotation("com.sap.vocabularies.Common.v1.FieldControl");if(f){var a={};this._schemaCache[this.sMetaContext]._fieldControl=a;if(f.EnumMember){switch(f.EnumMember){case"com.sap.vocabularies.Common.v1.FieldControlType/Hidden":a.visible=false;a.hidden=true;a.editable=false;a.readonly=true;a.required=false;break;case"com.sap.vocabularies.Common.v1.FieldControlType/Mandatory":a.visible=true;a.hidden=false;a.editable=true;a.readonly=false;a.required=true;break;case"com.sap.vocabularies.Common.v1.FieldControlType/ReadOnly":a.visible=true;a.hidden=false;a.editable=false;a.readonly=true;a.required=false;break;default:a.visible=true;a.hidden=false;a.editable=true;a.readonly=true;a.required=false;break;}}else{var p=f.Path;if(this.getModelName()){p=this.getModelName()+">"+p;}a.visible="{= ${"+p+"} !== 0}";a.hidden="{= ${"+p+"} === 0}";a.editable="{= ${"+p+"} !== 1}";a.readonly="{= ${"+p+"} === 1}";a.required="{= ${"+p+"} === 7}";}}};O.prototype._enrichFromEntitySet=function(f,e){var i,F=this._getAnnotation("Org.OData.Capabilities.V1.FilterRestrictions",e);f.filterable=true;f.requiredInFilter=false;if(F){for(i=0;i<F.NonFilterableProperties;i++){if(f.name===F.NonFilterableProperties.PropertyPath){f.filterable=false;}}}};O.prototype.metadataContextOfField=function(f){var i=Object.keys(this.fields).indexOf(f.name);if(i>-1){return this.sMetaContext+"/property/"+i;}else{return"";}};return O;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.registry.Utils')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.registry.Utils');jQuery.sap.require('sap.ui.core.Control');jQuery.sap.require('sap.m.library');sap.ui.define("sap/ui/mdc/experimental/provider/registry/Utils",["sap/ui/core/Control","sap/m/library","sap/ui/mdc/experimental/provider/model/ModelAdapter"],function(C,l,M){"use strict";var I=l.InputType;return{convertToInputType:function(a){switch(a.semantics){case M.Semantics.password:return I.Password;case M.Semantics.eMail:return I.Email;case M.Semantics.phoneNumber:return I.Tel;case M.Semantics.url:return I.Url;default:var u=a.ui5Type;switch(u){case"sap.ui.model.odata.type.Int16":case"sap.ui.model.odata.type.Int32":case"sap.ui.model.odata.type.Int64":case"sap.ui.model.odata.type.Decimal":case"sap.ui.model.odata.type.Double":return I.Number;case"sap.ui.model.odata.type.TimeOfDay":return I.Time;case"sap.ui.model.odata.type.DateTime":case"sap.ui.model.odata.type.DateTimeBase":return I.DateTime;case"sap.ui.model.odata.type.DateTimeOffset":case"sap.ui.model.odata.type.Date":return I.Date;default:return I.Text;}}},getNameSpaceInfo:function(c){var n={};n.className=c;var m=c.split(".");n.localName=m.pop();n.nameSpace=m.join(".");return n;},className:function(x){var a=x.localName||x.baseName||x.nodeName;if(!a){return undefined;}return x.namespaceURI+"."+a;}};});};if(!jQuery.sap.isDeclared('sap.ui.mdc.internal.common.Helper')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
(function(){"use strict";jQuery.sap.declare("sap.ui.mdc.internal.common.Helper");sap.ui.mdc.internal.common.Helper={isSemanticKey:function(c,v){var e=c.getPath().split('/')[1];var s=c.getModel().getObject("/"+e+"/@com.sap.vocabularies.Common.v1.SemanticKey");if(s){for(var i=0;i<s.length;i++){if(s[i].$PropertyPath===v.$Path){return true;}}}return false;},replaceSpecialCharsInId:function(i){if(i.indexOf(" ")>=0){jQuery.sap.log.error("Annotation Helper: Spaces are not allowed in ID parts. Please check the annotations, probably something is wrong there.");}return i.replace(/@/g,"").replace(/\//g,"::").replace(/#/g,"::");},_getEntitySetPath:function(m,p){var l;var e=p.slice(0,p.indexOf("/",1));if(m.getObject(e+"/$kind")==="EntityContainer"){l=e.length+1;e=p.slice(l,p.indexOf("/",l));}return e;}};sap.ui.mdc.internal.common.Helper.isSemanticKey.requiresIContext=true;})();};if(!jQuery.sap.isDeclared('sap.ui.mdc.internal.field.Field.controller')){jQuery.sap.declare('sap.ui.mdc.internal.field.Field.controller');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/ui/mdc/internal/field/Field.controller",["jquery.sap.global","sap/ui/base/Object","sap/ui/mdc/experimental/Action"],function(q,B,A){"use strict";var F=B.extend("sap.ui.mdc.internal.field.Field.controller",{constructor:function(f,t){B.apply(this,arguments);this.oField=f;this.oTable=t;}});F.prototype.onContactDetails=function(e){var p;if(e.getSource().data("Location")==="Header"){p=e.getSource().getParent().getAggregation("items")[0];}else if(e.getSource().data("Location")==="Section"){p=e.getSource().getParent().getAggregation("items")[0];}else if(e.getSource().data("Location")==="SmartTable"){p=e.getSource().getParent().getAggregation("items")[0];}else{p=e.getSource().getParent().getParent().getParent().getParent().getParent().getAggregation("items")[1];}p.setBindingContext(e.getSource().getBindingContext());p.openBy(e.getSource());};F.prototype.onDraftLinkPressed=function(e){var b=e.getSource();var o=b.getBindingContext();var p;if(!this._oDraftInfoPopover){p=this.oField||this.oTable;this._oDraftInfoPopover=sap.ui.xmlfragment("sap.ui.mdc.internal.common.DraftInfoPopover",this);p.addDependent(this._oDraftInfoPopover);}this._oDraftInfoPopover.setBindingContext(o);this._oDraftInfoPopover.openBy(b);};F.prototype.closeDraftAdminPopover=function(e){this._oDraftInfoPopover.close();};F.prototype.onDataFieldWithIntentBasedNavigationPressed=function(e){var l=e.getSource();var s=l.data('SemanticObject');var a=l.data('Action');var d=l.getParent().getBindingContext().getObject();var p={};for(var P in d){if(P&&P[0]!=="@"&&typeof d[P]==='string'){p[P]=d[P];}}var c=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation");if(c){c.toExternal({target:{semanticObject:s,action:a},params:p});}};return F;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.internal.table.p13nsettings.P13nSettings.controller')){jQuery.sap.declare('sap.ui.mdc.internal.table.p13nsettings.P13nSettings.controller');jQuery.sap.require('sap.ui.core.mvc.Controller');jQuery.sap.require('sap.ui.model.Sorter');jQuery.sap.require('sap.ui.model.json.JSONModel');sap.ui.define("sap/ui/mdc/internal/table/p13nsettings/P13nSettings.controller",["sap/ui/core/mvc/Controller","sap/ui/model/Sorter","sap/ui/model/json/JSONModel"],function(C,S,J){"use strict";return C.extend("sap.ui.mdc.internal.table.p13nsettings.P13nSettings",{onCancel:function(e){e.getSource().close();this.getView().destroy();},onConfirm:function(e){var p=e.getSource().getPanels(),c=[],s=[],P,d,i;for(i in p){var a=p[i].getMetadata().getName();if(a==="sap.m.P13nSortPanel"){c.sortCondition=p[i]._getConditions();}if(a==="sap.m.P13nGroupPanel"){c.groupCondition=p[i]._getConditions();}}var g=function(o){P=(c.groupCondition&&c.groupCondition[0].keyField);var k=o.getProperty(P);var n=(c.groupCondition[0]&&c.groupCondition[0].text);if(n.indexOf(":")>0){n=n.substr(0,n.indexOf(":"));}return{key:k,text:n+" : "+k};};if(c.groupCondition&&c.groupCondition.length>0){P=c.groupCondition[0]&&c.groupCondition[0].keyField;d=!!(c[0]&&c[0].operation==="GroupDescending");var G=new S(P,d,g);s.push(G);}if(c.sortCondition){for(i in c.sortCondition){P=c.sortCondition[i].keyField;d=!!(c.sortCondition[i].operation==="Descending");s.push(new S(P,d));}}this._saveP13DialogState(c);this.oTableController.applyGroupAndSort(s);e.getSource().close();this.getView().destroy();},_saveP13DialogState:function(c){var p=this.oView.getModel().getData(),i,_;var P=[];for(i in c.sortCondition){_={"columnKey":c.sortCondition[i].keyField,"operation":c.sortCondition[i].operation};P.push(_);}p.p13nSortItems=P;if(c.groupCondition!=undefined&&c.groupCondition!=null){var a=[];for(i in c.groupCondition){_={"columnKey":c.groupCondition[i].keyField,"operation":c.groupCondition[i].operation};a.push(_);}p.p13nGroupItems=a;}this.oTableController.oP13nSettingsPropertyModel=new J(p);}});});};if(!jQuery.sap.isDeclared('sap.ui.mdc.model.GenericType')){jQuery.sap.declare('sap.ui.mdc.model.GenericType');jQuery.sap.require('sap.ui.model.SimpleType');jQuery.sap.require('sap.ui.model.FormatException');jQuery.sap.require('sap.ui.model.ParseException');jQuery.sap.require('sap.ui.model.base.ManagedObjectModel');jQuery.sap.require('sap.ui.model.json.JSONPropertyBinding');sap.ui.define("sap/ui/mdc/model/GenericType",['sap/ui/model/SimpleType','sap/ui/model/FormatException','sap/ui/model/ParseException','sap/ui/model/base/ManagedObjectModel','sap/ui/model/json/JSONPropertyBinding'],function(S,F,P,M,J){"use strict";sap.ui.model.base.ManagedObjectModelPropertyBinding.prototype.setType=function(t,i){if(t&&typeof t._setBinding==="function"){t=t._clone();t._setBinding(this);}J.prototype.setType.apply(this,[t,i]);};function _(t,h){if(typeof h==="function"){return{object:window,fnFunc:h};}else if(typeof h==="string"){if(jQuery.sap.startsWith(h,".")){if(t.oBinding){var o=t.oBinding.getModel().getRootObject();return{object:o,fnFunc:o[h.slice(1)]};}}else{return{object:window,fnFunc:jQuery.sap.getObject(h)};}}return null;}var G=S.extend("sap.ui.mdc.model.GenericType",{constructor:function(f,c){S.apply(this,arguments);this.sName="Generic";this.oBinding=null;}});G.prototype.formatValue=function(v,t){var h=_(this,this.oFormatOptions.formatter);if(h){return h.fnFunc.call(h.object,v,t,this.getPrimitiveType(t),this.oBinding);}return v;};G.prototype.parseValue=function(v,s){var h=_(this,this.oFormatOptions.parser);if(h){return h.fnFunc.call(h.object,v,s,this.getPrimitiveType(s),this.oBinding);}return v;};G.prototype.validateValue=function(v){var h=_(this,this.oFormatOptions.validator);if(h){return h.fnFunc.call(h.object,v);}return undefined;};G.prototype._setBinding=function(b){this.oBinding=b;};G.prototype._clone=function(){return new G(this.oFormatOptions,this.oConstaints);};return G;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.base.ConditionModel')){jQuery.sap.declare('sap.ui.mdc.base.ConditionModel');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.model.json.JSONModel');jQuery.sap.require('sap.ui.model.Filter');sap.ui.define("sap/ui/mdc/base/ConditionModel",['jquery.sap.global','sap/ui/model/json/JSONModel','sap/ui/model/Filter','sap/ui/mdc/base/FilterOperatorConfig'],function(q,J,F,c){"use strict";var C=J.extend("sap.ui.mdc.base.ConditionModel",{constructor:function(){J.apply(this,arguments);this.setSizeLimit(1000);this._oMessageBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");sap.ui.getCore().attachLocalizationChanged(function(){this._oMessageBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");}.bind(this));if(!this.getProperty("/conditions")){this.setProperty("/conditions",[]);}if(!this.getProperty("/fieldPath")){this.setProperty("/fieldPath",{});}}});C._mModels={};C.prototype.destroy=function(){J.prototype.destroy.apply(this,arguments);delete this._mFieldPath;delete this._oMessageBundle;};C.prototype.clone=function(f){var o=new C();o._oListBinding=this._oListBinding;o.addFilterField(this.getFilterField(f));var a=this.getConditions(f);var b=[];a.forEach(function(e,i){b.push(q.extend(true,{},e));});o.setConditions(b);return o;};C.prototype.merge=function(f,o,s){this.removeAllConditions(f);var a=sap.ui.mdc.base.ConditionModel.removeEmptyConditions(o.getConditions(s));this.setConditions(a);this.checkUpdate(true,true);};C.mapConditions=function(a,t){if(t){for(var i=0;i<a.length;i++){a[i].fieldPath=t;}}return a;};C.cloneConditions=function(a){return q.extend(true,[],a);};C.removeEmptyConditions=function(a){for(var i=a.length-1;i>-1;i--){if(a[i].isEmpty){a.splice(parseInt(i,10),1);}}return a;};C.getFor=function(l,n){var k=C._createKey(l,n);var o=C._mModels[k];if(!o){o=new C();o._oListBinding=l;C._mModels[k]=o;}else if(o._oListBinding!==l){o._oListBinding=l;}return o;};C._createKey=function(l,n){return l.getModel().getId()+"--"+l.getPath()+"#"+(n===undefined?"":n);};C.prototype.setFor=function(l,n){delete C._mModels[C._createKey(this._oListBinding,n)];this._oListBinding=l;C._mModels[C._createKey(this._oListBinding,n)]=this;return this;};C.destroyCM=function(o,n){delete C._mModels[C._createKey(o._oListBinding,n)];o.destroy();};C._getAll=function(l){var o=[];var k=C._createKey(l);k=k.slice(0,k.length-1);for(var m in C._mModels){if(m.indexOf(k)===0){var a=C._mModels[m];o.push(a);}}return o;};C._getAllKeys=function(l){var o=[];var k=C._createKey(l);k=k.slice(0,k.length-1);for(var m in C._mModels){if(m.indexOf(k)===0){o.push(m);}}return o;};C.prototype.getConditions=function(f){var r=[];var a=this.getProperty("/conditions");a.forEach(function(o){if(!f||o.fieldPath===f){r.push(o);}});return r;};C.prototype.indexOf=function(o){var a=-1;var b=this.getProperty("/conditions");var s=JSON.stringify(o);var f=o.fieldPath;b.some(function(o,i){if(o.fieldPath===f){if(JSON.stringify(o)===s){a=i;return true;}}return false;});return a;};C.prototype.exist=function(o,f){return this.indexOf(o,f)>=0;};C.prototype.setConditions=function(a){for(var i=0;i<a.length;i++){this.insertCondition(-1,a[i],true);}};C.prototype.addCondition=function(o,f){return this.insertCondition(-1,o,f);};C.prototype.insertCondition=function(a,o,f){var s=o.fieldPath,b;this._checkIsEmpty(o);this._updateValues(o);if(!f){var i=this.indexOf(o);if(i>=0){return this.getConditions()[i];}}b=this.getProperty("/conditions");if(a==-1){b.push(o);}else{b.splice(a,0,o);}this.checkUpdate(true,true);this._checkMaxConditions(s);return o;};C.prototype.createItemCondition=function(f,k,d){return this.createCondition(f,"EEQ",[k,d]);};C.prototype.createCondition=function(f,o,v){var a={fieldPath:f,operator:o,values:v};this._checkIsEmpty(a);this._updateValues(a);return a;};C.prototype.removeCondition=function(f,i){if(typeof f==="object"&&i===undefined){var o=f;f=o.fieldPath;i=this.indexOf(o);}var a=this.getProperty("/conditions");if(a.some(function(p,b,a){if(p.fieldPath===f){if(i===0){a.splice(b,1);return true;}i--;return false;}return false;})){this.checkUpdate(true,true);this._checkMaxConditions(f);}};C.prototype.removeAllConditions=function(f){var I=[];var d=this.getProperty("/conditions");d.forEach(function(p,i){if(!f||p.fieldPath===f){I.push(i);}});I.sort(function(a,b){return a-b;});for(var i=I.length-1;i>-1;i--){d.splice(I[i],1);}this.checkUpdate(true,true);};C.prototype.deleteConditions=function(o,B){var f;if(!o||!B){return;}if(!q.isArray(o)){o=[o];}var d=B.oModel.getProperty(B.getPath(),B.getContext())||[];if(q.isArray(o)&&d.length>0){var I=[],e,i,n;if(Array.isArray(d)){for(i=0;i<o.length;i++){I.push(d.indexOf(o[i].getProperty()));}I.sort(function(a,b){return a-b;});e=function(a){f=d[a].fieldPath;d.splice(a,1);};}else if(typeof oData==="object"){for(n in d){var s=o[i].getPath();s=s.substring(o[i].getPath().lastIndexOf("/")+1);I.push(n);}e=function(s){delete d[s];};}for(i=I.length-1;i>-1;i--){e(I[i]);}}B.getModel().checkUpdate(true,true);this._checkMaxConditions(f);};C.prototype._checkIsEmpty=function(a){var f=this.getFilterOperatorConfig();a=a||this.getConditions();if(!Array.isArray(a)){a=[a];}a.forEach(function(o){var O=f.getOperator(o.operator);o.isEmpty=O.isEmpty(o);});};C.prototype._updateValues=function(a){var f=this.getFilterOperatorConfig();a=a||this.getConditions();if(!Array.isArray(a)){a=[a];}a.forEach(function(o){var O=f.getOperator(o.operator);if(o.operator!=="EEQ"){while(o.values.length!=O.valueTypes.length){if(o.values.length<O.valueTypes.length){o.values.push("");}if(o.values.length>O.valueTypes.length){o.values=o.values.slice(0,o.values.length-1);}}}});};C.prototype._checkRequiredConditions=function(s,f){var a=f?[f]:Object.keys(this._mFieldPath||{});var e=false;var m=this._oMessageBundle.getText("conditionmodel.REQUIRED_CONDITION_MISSING");a.forEach(function(f){if(this._mFieldPath&&this._mFieldPath[f]){var o=this._mFieldPath[f];if(o.getRequired()&&this.getConditions(f).length<=0){if(s){this.addFieldPathMessage(f,m);}e=true;}else{this.removeFieldPathMessage(f,m);}}},this);return!e;};C.prototype._checkMaxConditions=function(f){var a=f?[f]:Object.keys(this._mFieldPath||{});var e=false;a.forEach(function(f){if(this._mFieldPath&&this._mFieldPath[f]){var o=this._mFieldPath[f];var m=this._oMessageBundle.getText("conditionmodel.TOO_MANY_CONDITIONS");if(o.getMaxConditions()>=0&&this.getConditions(f).length>o.getMaxConditions()){this.addFieldPathMessage(f,m);e=true;}else{this.removeFieldPathMessage(f,m);}}},this);return!e;};C.prototype.addFilterField=function(f){var s=f.getFieldPath();if(!this._mFieldPath){this._mFieldPath={};}this._mFieldPath[s]=f;var o=this.getProperty("/fieldPath");if(!o[s]){o[s]={valueState:"None",valueStateText:"",messages:[]};}};C.prototype.getFilterField=function(f){var a=Object.keys(this._mFieldPath||{});return this._mFieldPath[f||a[0]];};C.prototype.getFilterFields=function(){var f=Object.keys(this._mFieldPath||{});var a=[];f.forEach(function(s){a.push(this._mFieldPath[s]);},this);return a;};C.prototype.removeFilterField=function(f){var s=f.getFieldPath();if(this._mFieldPath&&this._mFieldPath[s]){delete this._mFieldPath[s];}var o=this.getProperty("/fieldPath");if(o[s]){delete o[s];}};C.prototype._getFieldPathProperty=function(f){return this.getProperty("/fieldPath/")[f];};C.prototype.addFieldPathMessage=function(f,m){var o=this._getFieldPathProperty(f);if(!o.messages.some(function(I,i){if(I===m){return true;}return false;})){o.messages.push(m);}this._updateValueState(f);};C.prototype.setUIMessage=function(f,m){var o=this._getFieldPathProperty(f);o.uiMessage=m;this._updateValueState(f);};C.prototype.removeFieldPathMessage=function(f,m){var I;var o=this._getFieldPathProperty(f);if(o.messages.some(function(s,i){if(s===m){I=i;return true;}return false;})){o.messages.splice(I,1);}this._updateValueState(f);};C.prototype.removeUIMessage=function(f){var o=this._getFieldPathProperty(f);delete o.uiMessage;this._updateValueState(f);};C.prototype._updateValueState=function(f){var u=false,o=this._getFieldPathProperty(f),v="None",V="";if(o.uiMessage){v="Error";V=o.uiMessage;}else if(o.messages.length>0){v="Error";V=o.messages[o.messages.length-1];}if(o.valueState!==v){o.valueState=v;u=true;}if(o.valueStateText!==V){o.valueStateText=V;u=true;}if(u){this.checkUpdate(true,true);}};C.prototype.isValid=function(v,f){var a=f?[f]:Object.keys(this._mFieldPath||{});var V=this._checkRequiredConditions(v);a.forEach(function(f){var o=this._getFieldPathProperty(f);V=V&&o.valueState=="None";},this);return V;};C.prototype.applyFilters=function(v){if(this.isValid(v)){var f=this.getAllFilters();if(f){this._oListBinding.filter(f);}else{this._oListBinding.filter();}return true;}return false;};C.prototype.getAllFilters=function(){var o=C._getAll(this._oListBinding);var O=[];o.forEach(function(a){var f=a.getFilters();if(f){O.push(f);}});var f=null;if(O.length===1){f=O[0];}else if(O.length>1){f=new F({filters:O,and:true});}return f;};C.prototype.getFilterOperatorConfig=function(){var m=this._oListBinding&&this._oListBinding.getModel();return c.getFor(m);};C.prototype.getFilters=function(f){var i,l,o=[],a,t,s,n,p;var b=this.getFilterOperatorConfig();var d={};if(f===undefined){a=this.getConditions();}else if(typeof f==="string"){a=this.getConditions(f);}else{a=f||[];}for(i=0;i<a.length;i++){d[a[i].fieldPath]=true;}for(var e in d){l=[];t=null;for(i=0;i<a.length;i++){if(a[i].fieldPath===e){var O=b.getOperator(a[i].operator);var g=O.getModelFilter(a[i]);if(g.sPath.indexOf('*/')>-1){s=g.sPath.split('*/');if(s.length===2){n=s[0];p=s[1];g.sPath='L1/'+p;if(!t){t={path:n,operator:'Any',variable:'L1'};}l.push(g);}else{throw new Error("Not Implemented");}}else{l.push(g);}}}if(t){if(l.length===1){t.condition=l[0];}else if(l.length>1){t.condition=new F({filters:l,and:false});}l=[new F(t)];}if(l.length===1){o.push(l[0]);}else if(l.length>1){o.push(new F({filters:l,and:false}));}}if(o.length===1){return o[0];}else if(o.length>1){return new F({filters:o,and:true});}else{return null;}};C.prototype.serialize=function(){var a=q.extend(true,[],this.getData().conditions);a.forEach(function(o){delete o.isEmpty;},this);return'{"conditions":'+JSON.stringify(a)+"}";};C.prototype.serializeMeta=function(){var f=Object.keys(this._mFieldPath||{});var r="";f.forEach(function(s){if(this.getData().fieldPath[s].valueState!=="None"){r+=JSON.stringify(this.getData().fieldPath[s]);}},this);return'{"fieldPath":'+r+"}";};C.prototype.parse=function(o){var d=function(k,v){var a;if(!isNaN(parseInt(k,10))&&(typeof v==='string')){a=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}).(\d{3})Z$/.exec(v);if(a){return new Date(v);}}return v;};var r=this.getData();r.conditions=JSON.parse(o,d).conditions;this.setData(r);};C.serialize=function(l){var o=C._getAllKeys(l);var r="";o.forEach(function(a){var b=C._mModels[a];if(b.getData().conditions&&b.getData().conditions.length>0){r+=">>>"+a+"<<<";r+=b.serialize();}});return r;};C.serializeMeta=function(l){var o=C._getAllKeys(l);var r="";o.forEach(function(a){var b=C._mModels[a];r+=b.serializeMeta();});return r;};C.parse=function(o){var a=o.split(">>>");a.forEach(function(s){var p=s.split("<<<");if(p.length>1){if(C._mModels[p[0]]){C._mModels[p[0]].parse(p[1]);}else{var b=new C();b.parse(p[1]);C._mModels[p[0]]=b;}}});};C.createControl=function(d,o,p,i){var t=d;if(o.valueTypes[i]!=="self"&&o.valueTypes[i]){t=o._createLocalType(o.valueTypes[i]);}if(t&&t.sName==="Date"){return new sap.m.DatePicker({value:{path:p,type:t,mode:'TwoWay'}});}else{return new sap.m.Input({value:{path:p,type:t,mode:'TwoWay'}});}};return C;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.CustomFieldHelp')){
/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.experimental.CustomFieldHelp');sap.ui.define("sap/ui/mdc/experimental/CustomFieldHelp",['sap/ui/mdc/experimental/FieldHelpBase'],function(F){"use strict";var C=F.extend("sap.ui.mdc.experimental.CustomFieldHelp",{metadata:{library:"sap.ui.mdc",properties:{},aggregations:{content:{type:"sap.ui.core.Control",multiple:false}},defaultAggregation:"content",events:{beforeOpen:{parameters:{value:{type:"any"}}}}}});C.prototype._createPopover=function(){var p=F.prototype._createPopover.apply(this,arguments);p._getAllContent=function(){var f=this.getParent();if(f){var c=[];c.push(f.getContent());return c;}else{return this.getContent();}};return p;};C.prototype.fireSelectEvent=function(v,a){this.close();this.fireSelect({value:v,additionalValue:a});};C.prototype.open=function(){var f=this.getParent();var v;if(f){v=f.getValue();}this.fireBeforeOpen({value:v});F.prototype.open.apply(this,arguments);};return C;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.DataObject')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.experimental.DataObject');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.EventProvider');sap.ui.define("sap/ui/mdc/experimental/DataObject",['jquery.sap.global','sap/ui/base/EventProvider','sap/ui/mdc/experimental/DataObjectMetadata'],function(q,E,D){"use strict";var a=E.extend("sap.ui.mdc.experimental.DataObject",{constructor:function(s,p){E.call(this);this._aLayers=[];this._aLayerImpl=[];this._aLayerContext=[];this._aInactiveLayers=[];this._sActiveLayer="";this._mLayeredProperties={};this._mProperties=null;this._mDefaultProperties={};this.addLayer("base");this.applySettings(s);},metadata:{properties:{name:{type:"string",mandatory:true,unique:true,defaultValue:""},parent:{type:"any",defaultValue:{}},extensions:{type:"any",defaultValue:{}}},events:{change:{}}}},D);a.prototype.getAdapter=function(){return this._oImpl;};a.prototype.hideLayer=function(n){var i=this._aLayers.indexOf(n);if(i>0){this._aInactiveLayers.push(i);}else if(i==0){q.sap.log.debug("Layer 'base' cannot be hidden");}};a.prototype.showLayer=function(n){var i=this._aLayers.indexOf(n);if(i>0){this._aInactiveLayers.splice(this._aInactiveLayers.indexOf(i));}else if(i==0){q.sap.log.debug("Layer 'base' is always shown");}};a.prototype.setLayer=function(n,i,c){if(!this._mLayeredProperties[n]){this.addLayer(n,i,c);}this._sActiveLayer=n;};a.prototype.addLayer=function(n,i,c){if(this._aLayers.indexOf(n)>-1){q.sap.log.debug("Layer with "+n+" already exists");return;}this._aLayers.push(n);this._aLayerImpl.push(i);this._aLayerContext.push(c);this._mLayeredProperties[n]={};this._sActiveLayer=n;this._mProperties=this._mLayeredProperties[this._sActiveLayer];};a.prototype.isValid=function(p,v){return true;};a.prototype.setProperty=function(p,v,l){if(typeof p==="string"){this.addLayer("api");p=this.getMetadata().getProperty(p);}if(this.isValid(p,v)){if(l){var i=this._aLayers.indexOf(l);if(i===-1){return;}this._mLayeredProperties[this._aLayers[i]][p.name]=v;}else{this._mProperties[p.name]=v;}}};a.prototype.getLayeredProperty=function(p,l,r){var v,i;if(typeof p==="string"){p=this.getMetadata().getProperty(p);}if(!l){l=this._sActiveLayer;}i=this._aLayers.indexOf(l)||this._aLayers.length-1;while(v===undefined&&i>-1){if(this._aInactiveLayers.indexOf(i)>-1){i--;continue;}v=this._mLayeredProperties[this._aLayers[i]][p.name];this._iActiveContextLayer=i;if(v===undefined){var I=this._aLayerImpl[i];if(I&&I[p.name]){v=I[p.name].apply(this,[v]);}}if(v===undefined&&i==0){if(typeof p.defaultValue==="function"){v=p.defaultValue.apply(this);}else{this._mLayeredProperties[this._aLayers[i]][p.name]=v=JSON.parse(JSON.stringify(p.defaultValue));}}i--;if(r){break;}}return v;};a.prototype.getProperty=function(p){return this.getLayeredProperty(p);};a.prototype.getContext=function(){return this._aLayerContext[this._iActiveContextLayer];};a.prototype.getProperties=function(){var p=this._mProperties;var r={};for(var n in p){r[n]=p[n];if(typeof p[n]==="object"&&p[n].hasOwnProperty("length")){r[n]=[];for(var i=0;i<p[n].length;i++){if(p[n][i]instanceof a){r[n][i]=p[n][i].getProperties();}}}}return r;};a.prototype.applySettings=function(s){if(!s||q.isEmptyObject(s)){return this;}var m=this.getMetadata(),v=m.getJSONKeys(),k,V,K;for(k in s){V=s[k];if((K=v[k])!==undefined){switch(K._iKind){case 0:this[K.name]=V;break;case 5:if(typeof V=="function"){this[K._sMutator](V);}else{this[K._sMutator](V[0],V[1],V[2]);}break;case-1:default:break;}}else{}}return this;};a.prototype.toJSON=function(l){var c=this._sActiveLayer,p=this.getMetadata().getAllProperties(),r={};if(l){this._sActiveLayer=l;}for(var n in p){if(n==="parent"){continue;}r[n]=this[n];}this._sActiveLayer=c;return r;};return a;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nColumnItem')){
/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.experimental.P13nColumnItem');sap.ui.define("sap/ui/mdc/experimental/P13nColumnItem",['sap/ui/mdc/experimental/P13nItem'],function(P){"use strict";var a=P.extend("sap.ui.mdc.experimental.P13nColumnItem",{metadata:{library:"sap.ui.mdc",properties:{selected:{type:"boolean",defaultValue:false},position:{type:"int"}}}});return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nFilterItem')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nFilterItem');sap.ui.define("sap/ui/mdc/experimental/P13nFilterItem",['sap/ui/mdc/experimental/P13nItem'],function(P){"use strict";var a=P.extend("sap.ui.mdc.experimental.P13nFilterItem",{metadata:{library:"sap.ui.mdc",properties:{selected:{type:"boolean",defaultValue:false},position:{type:"int"},required:{type:"boolean"},control:{type:"sap.ui.core.Control"}}}});return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nPanel')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nPanel');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.m.library');jQuery.sap.require('sap.ui.core.XMLComposite');jQuery.sap.require('sap.ui.model.ChangeReason');sap.ui.define("sap/ui/mdc/experimental/P13nPanel",['jquery.sap.global','sap/m/library','sap/ui/core/XMLComposite','./P13nPanelFormatter','sap/ui/model/ChangeReason'],function(q,M,X,P,C){"use strict";var a=X.extend("sap.ui.mdc.experimental.P13nPanel",{formatter:P,metadata:{"abstract":true,library:"sap.ui.mdc",defaultAggregation:"items",aggregations:{items:{type:"sap.ui.mdc.experimental.P13nItem",multiple:true,singularName:"item"}}}});a.prototype.init=function(){this._bInternalModelToBeUpdated=true;this.setModel(new sap.ui.model.resource.ResourceModel({bundleUrl:sap.ui.getCore().getLibraryResourceBundle("sap.m").oUrlInfo.url}),"i18n");};a.prototype.addItem=function(i){this._bInternalModelToBeUpdated=true;this.addAggregation("items",i);return this;};a.prototype.insertItem=function(i,I){this._bInternalModelToBeUpdated=true;this.insertAggregation("items",i,I);return this;};a.prototype.updateItems=function(r){this.updateAggregation("items");if(r===C.Change){this._bInternalModelToBeUpdated=true;}};a.prototype.removeItem=function(i){this._bInternalModelToBeUpdated=true;return this.removeAggregation("items",i);};a.prototype.removeAllItems=function(){this._bInternalModelToBeUpdated=true;return this.removeAllAggregation("items");};a.prototype.destroyItems=function(){this._bInternalModelToBeUpdated=true;this.destroyAggregation("items");return this;};a.prototype.onSearchFieldLiveChange=function(e){this._filterTableItems();};a.prototype._filterTableItems=function(){var f=[];var s=this._getSearchText();if(s){f.push(new sap.ui.model.Filter([new sap.ui.model.Filter("text",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("tooltip",sap.ui.model.FilterOperator.Contains,s)],false));}this._getTable().getBinding("items").filter(f);};a.prototype._getTable=function(){return sap.ui.getCore().byId(this.getId()+"--IDTable")||null;};a.prototype._getSearchField=function(){return sap.ui.getCore().byId(this.getId()+"--IDSearchField")||null;};a.prototype._getSearchText=function(){var s=this._getSearchField();return s?s.getValue():"";};a.prototype._isFilteredBySearchText=function(){return!!this._getSearchText().length;};return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nSelectionPanel')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nSelectionPanel');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/mdc/experimental/P13nSelectionPanel",['jquery.sap.global','./P13nPanel'],function(q,P){"use strict";var a=P.extend("sap.ui.mdc.experimental.P13nSelectionPanel",{metadata:{library:"sap.ui.mdc"}});return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nSortPanel')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nSortPanel');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.m.library');sap.ui.define("sap/ui/mdc/experimental/P13nSortPanel",['jquery.sap.global','sap/m/library','./P13nPanel','./P13nSortModel'],function(q,M,P,a){"use strict";var b=P.extend("sap.ui.mdc.experimental.P13nSortPanel",{metadata:{library:"sap.ui.mdc"}});b.prototype.init=function(){P.prototype.init.apply(this,arguments);this._sColumnKeyOfMarkedItem=undefined;this._oInternalModel=undefined;this._proxyOnModelContextChange=q.proxy(this._onModelContextChange,this);this.attachModelContextChange(this._proxyOnModelContextChange);};b.prototype.refreshInitialState=function(){this._bInternalModelToBeUpdated=true;this.invalidate();};b.prototype._onModelContextChange=function(){if(!this.getModel()){return;}this._updateInternalModel();};b.prototype.onBeforeRendering=function(){this._updateInternalModel();};b.prototype.exit=function(){this.detachModelContextChange(this._proxyOnModelContextChange);};b.prototype.onSelectionChange=function(e){e.getParameter("listItems").forEach(function(t){this._selectTableItem(t);},this);};b.prototype._selectTableItem=function(t){var i=this._getTable().indexOfItem(t);this._oInternalModel.selectModelItem(i,t.getSelected());this._oInternalModel.updateProperties(i,{sortOrder:t.getSelected()?t.getCells()[1].getSelectedKey():undefined});this._toggleMarkedTableItem(t);this._updateControlLogic();};b.prototype.onItemPressed=function(e){this._toggleMarkedTableItem(e.getParameter('listItem'));this._updateControlLogic();};b.prototype.onPressButtonMoveToTop=function(){this._moveTableItem(this._getMarkedTableItem(),this._getVisibleTableItems()[0]);};b.prototype.onPressButtonMoveUp=function(){var v=this._getVisibleTableItems();this._moveTableItem(this._getMarkedTableItem(),v[v.indexOf(this._getMarkedTableItem())-1]);};b.prototype.onPressButtonMoveDown=function(){var v=this._getVisibleTableItems();this._moveTableItem(this._getMarkedTableItem(),v[v.indexOf(this._getMarkedTableItem())+1]);};b.prototype.onPressButtonMoveToBottom=function(){var v=this._getVisibleTableItems();this._moveTableItem(this._getMarkedTableItem(),v[v.length-1]);};b.prototype._moveTableItem=function(t,T){var i=this._getTable().indexOfItem(t);var I=this._getTable().indexOfItem(T);this._oInternalModel.moveModelItemPosition(i,I);this._oInternalModel.moveModelItem(i,I);this._removeStyleFromTableItem(this._getMarkedTableItem());this._sortTableItemsAccordingToInternalModel();this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};b.prototype.onSwitchButtonShowSelected=function(){this.setShowOnlySelectedItems(!this.getShowOnlySelectedItems());this._removeStyleFromTableItem(this._getMarkedTableItem());this._filterTableItems();this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};b.prototype.onSearchFieldLiveChange=function(){this._removeStyleFromTableItem(this._getMarkedTableItem());this._filterTableItems();this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};b.prototype._filterTableItems=function(){var f=[];if(this._isFilteredByShowSelected()===true){f.push(new sap.ui.model.Filter("selected","EQ",true));}var s=this._getSearchText();if(s){f.push(new sap.ui.model.Filter([new sap.ui.model.Filter("text",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("tooltip",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("role",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("aggregationRole",sap.ui.model.FilterOperator.Contains,s)],false));}this._getTable().getBinding("items").filter(f);};b.prototype._sortTableItemsAccordingToInternalModel=function(){var c=function(i,I){var m=this._oInternalModel.getModelItemByColumnKey(i.getColumnKey());var o=this._oInternalModel.getModelItemByColumnKey(I.getColumnKey());var d=this._oInternalModel.getIndexOfModelItem(m);var e=this._oInternalModel.getIndexOfModelItem(o);if(d<e){return-1;}else if(d>e){return 1;}return 0;};this._getTable().getBinding("items").sort(new sap.ui.model.Sorter({path:'',descending:false,group:false,comparator:c.bind(this)}));};b.prototype._getVisibleTableItems=function(){return this._getTable().getItems().filter(function(t){return!!t.getVisible();});};b.prototype._getMarkedTableItem=function(){return this._getTableItemByColumnKey(this._sColumnKeyOfMarkedItem);};b.prototype._toggleMarkedTableItem=function(t){this._removeStyleFromTableItem(this._getMarkedTableItem());var c=this._getColumnKeyByTableItem(t);if(c){this._sColumnKeyOfMarkedItem=c;this._addStyleToTableItem(t);}};b.prototype._getStyledAsMarkedTableItem=function(){var d=this._getTable().$().find(".sapMP13nColumnsPanelItemSelected");return d.length?q(d[0]).control()[0]:undefined;};b.prototype._getTableItemByColumnKey=function(c){var C=this._getTable().getBinding("items").getContexts();var t=this._getTable().getItems().filter(function(T,i){return C[i].getObject().getColumnKey()===c;});return t[0];};b.prototype._getColumnKeyByTableItem=function(t){var i=this._getTable().indexOfItem(t);if(i<0){return null;}return this._getTable().getBinding("items").getContexts()[i].getObject().getColumnKey();};b.prototype._addStyleToTableItem=function(t){if(t){t.addStyleClass("sapMP13nColumnsPanelItemSelected");}};b.prototype._removeStyleFromTableItem=function(t){if(t){t.removeStyleClass("sapMP13nColumnsPanelItemSelected");}};b.prototype._isFilteredByShowSelected=function(){return false;};b.prototype._getTable=function(){return sap.ui.getCore().byId(this.getId()+"--IDTable")||null;};b.prototype._updateControlLogic=function(){var v=this._getVisibleTableItems();this._getManagedObjectModel().setProperty("/@custom/isMoveUpButtonEnabled",v.indexOf(this._getMarkedTableItem())>0);this._getManagedObjectModel().setProperty("/@custom/isMoveDownButtonEnabled",v.indexOf(this._getMarkedTableItem())>-1&&v.indexOf(this._getMarkedTableItem())<v.length-1);};b.prototype._updateInternalModel=function(){if(!this._bInternalModelToBeUpdated){return;}this._bInternalModelToBeUpdated=false;this._removeStyleFromTableItem(this._getMarkedTableItem());this._oInternalModel=new a({preventInitialSort:false,tableItems:this.getItems().filter(function(i){return i;}),availableItems:this.getItems().filter(function(i){return i;})});this._sortTableItemsAccordingToInternalModel();this._filterTableItems();if(!this._sColumnKeyOfMarkedItem){this._sColumnKeyOfMarkedItem=this._getColumnKeyByTableItem(this._getVisibleTableItems()[0]);}this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};return b;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nSortQBGridPanel')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nSortQBGridPanel');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.m.library');jQuery.sap.require('sap.ui.model.json.JSONModel');sap.ui.define("sap/ui/mdc/experimental/P13nSortQBGridPanel",['jquery.sap.global','sap/m/library','./P13nPanel','./P13nSortModel','sap/ui/model/json/JSONModel'],function(q,M,P,a,J){"use strict";var b=P.extend("sap.ui.mdc.experimental.P13nSortQBGridPanel",{metadata:{library:"sap.ui.mdc"}});b.prototype.init=function(){P.prototype.init.apply(this,arguments);this._oInternalModel=undefined;this._proxyOnModelContextChange=q.proxy(this._onModelContextChange,this);this.attachModelContextChange(this._proxyOnModelContextChange);};b.prototype.refreshInitialState=function(){this._bInternalModelToBeUpdated=true;this.invalidate();};b.prototype._onModelContextChange=function(){if(!this.getModel()){return;}this._updateInternalModel();};b.prototype.onBeforeRendering=function(){this._updateInternalModel();};b.prototype.exit=function(){this.detachModelContextChange(this._proxyOnModelContextChange);};b.prototype.onChangeSortOrderBySelection=function(e){var t=e.getSource().getParent();var i=this._getTable().indexOfContent(t);this._oInternalModel.updateProperties(i,{sortOrder:this._getSelectedSortOrder(e.getParameter("selectedItem"))});};b.prototype.onSelectionChange=function(e){if(!e.getParameter("selectedItem")){return;}var t=e.getSource().getParent();this._selectTableItem(t);};b.prototype.onChangeComboBox=function(e){var t=e.getSource().getParent();this._selectTableItem(t);};b.prototype._selectTableItem=function(t){var i=this._getTable().indexOfContent(t);this._oInternalModel.replaceModelItemOfIndex(i);};b.prototype.onPressAdd=function(e){var t=e.getSource().getParent().getParent();var i=this._getTable().indexOfContent(t);this._oInternalModel.insertModelItemOfIndex(i);};b.prototype.onPressRemove=function(e){var t=e.getSource().getParent().getParent();var i=this._getTable().indexOfContent(t);this._oInternalModel.removeModelItemOfIndex(i);};b.prototype.onPressDown=function(e){var t=e.getSource().getParent().getParent();var v=this._getVisibleTableItems();this._moveTableItem(t,v[v.indexOf(t)+1]);};b.prototype.onPressUp=function(e){var t=e.getSource().getParent().getParent();var v=this._getVisibleTableItems();this._moveTableItem(t,v[v.indexOf(t)-1]);};b.prototype._moveTableItem=function(t,T){var i=this._getTable().indexOfContent(t);var I=this._getTable().indexOfContent(T);this._oInternalModel.moveModelItemPosition(i,I);this._oInternalModel.moveModelItem(i,I);};b.prototype._getVisibleTableItems=function(){return this._getTable().getContent().filter(function(t){return!!t.getVisible();});};b.prototype._getTable=function(){return sap.ui.getCore().byId(this.getId()+"--IDVerticalLayout")||null;};b.prototype._getSelectedSortOrder=function(c){return c.getKey();};b.prototype._updateInternalModel=function(){if(!this._bInternalModelToBeUpdated){return;}this._bInternalModelToBeUpdated=false;this._oInternalModel=new a({tableItems:this.getItems().filter(function(i){return i.getSelected();}),availableItems:this.getItems().filter(function(i){return i;})});this._getTable().setModel(this._oInternalModel,"JSONItems");};return b;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nSortQBPanel')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nSortQBPanel');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.m.library');jQuery.sap.require('sap.ui.model.json.JSONModel');sap.ui.define("sap/ui/mdc/experimental/P13nSortQBPanel",['jquery.sap.global','sap/m/library','./P13nPanel','./P13nSortModel','sap/ui/model/json/JSONModel'],function(q,M,P,a,J){"use strict";var b=P.extend("sap.ui.mdc.experimental.P13nSortQBPanel",{metadata:{library:"sap.ui.mdc"}});b.prototype.init=function(){P.prototype.init.apply(this,arguments);this._oInternalModel=undefined;this._proxyOnModelContextChange=q.proxy(this._onModelContextChange,this);this.attachModelContextChange(this._proxyOnModelContextChange);};b.prototype.refreshInitialState=function(){this._bInternalModelToBeUpdated=true;this.invalidate();};b.prototype._onModelContextChange=function(){if(!this.getModel()){return;}this._updateInternalModel();};b.prototype.onBeforeRendering=function(){this._updateInternalModel();};b.prototype.exit=function(){this.detachModelContextChange(this._proxyOnModelContextChange);};b.prototype.onChangeSortOrderBySelection=function(e){var t=e.getSource().getParent();var i=this._getTable().indexOfItem(t);this._oInternalModel.updateProperties(i,{sortOrder:this._getSelectedSortOrder(e.getParameter("selectedItem"))});};b.prototype.onSelectionChange=function(e){var t=e.getSource().getParent();this._selectTableItem(t);};b.prototype._selectTableItem=function(t){var i=this._getTable().indexOfItem(t);this._oInternalModel.replaceModelItemOfIndex(i);};b.prototype.onPressAdd=function(e){var t=e.getSource().getParent().getParent();var i=this._getTable().indexOfItem(t);this._oInternalModel.insertModelItemOfIndex(i);};b.prototype.onPressRemove=function(e){var t=e.getSource().getParent().getParent();var i=this._getTable().indexOfItem(t);this._oInternalModel.removeModelItemOfIndex(i);};b.prototype.onPressDown=function(e){var t=e.getSource().getParent().getParent();var v=this._getVisibleTableItems();this._moveTableItem(t,v[v.indexOf(t)+1]);};b.prototype.onPressUp=function(e){var t=e.getSource().getParent().getParent();var v=this._getVisibleTableItems();this._moveTableItem(t,v[v.indexOf(t)-1]);};b.prototype._moveTableItem=function(t,T){var i=this._getTable().indexOfItem(t);var I=this._getTable().indexOfItem(T);this._oInternalModel.moveModelItemPosition(i,I);this._oInternalModel.moveModelItem(i,I);};b.prototype._getVisibleTableItems=function(){return this._getTable().getItems().filter(function(t){return!!t.getVisible();});};b.prototype._getTable=function(){return sap.ui.getCore().byId(this.getId()+"--IDTable")||null;};b.prototype._getSelectedSortOrder=function(c){return c.getKey();};b.prototype._updateInternalModel=function(){if(!this._bInternalModelToBeUpdated){return;}this._bInternalModelToBeUpdated=false;this._oInternalModel=new a({tableItems:this.getItems().filter(function(i){return i.getSelected();}),availableItems:this.getItems().filter(function(i){return i;})});this._getTable().setModel(this._oInternalModel,"JSONItems");};return b;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nSortSimplePanel')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nSortSimplePanel');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.m.library');sap.ui.define("sap/ui/mdc/experimental/P13nSortSimplePanel",['jquery.sap.global','sap/m/library','./P13nPanel','./P13nSortModel'],function(q,M,P,a){"use strict";var b=P.extend("sap.ui.mdc.experimental.P13nSortSimplePanel",{metadata:{library:"sap.ui.mdc",properties:{internalModel:{type:"sap.ui.mdc.experimental.P13nSortModel",visibility:"hidden"}}}});b.prototype.init=function(){P.prototype.init.apply(this,arguments);this._proxyOnModelContextChange=q.proxy(this._onModelContextChange,this);this.attachModelContextChange(this._proxyOnModelContextChange);};b.prototype.refreshInitialState=function(){this._bInternalModelToBeUpdated=true;this.invalidate();};b.prototype._onModelContextChange=function(){if(!this.getModel()){return;}this._updateInternalModel();};b.prototype.onBeforeRendering=function(){this._updateInternalModel();};b.prototype.exit=function(){this.detachModelContextChange(this._proxyOnModelContextChange);};b.prototype.onChangeSortOrderBySelection=function(e){var t=this._getTable().getSelectedItems()[0];var i=this._getTable().indexOfItem(t);this.getInternalModel().updateProperties(i,{sortOrder:this._getSelectedSortOrder()});};b.prototype.onChangeSortOrderByItemPress=function(e){var s=e.getParameter('listItem')===this.byId("IDAscendingItem")?"Ascending":"Descending";var t=this._getTable().getSelectedItems()[0];var i=this._getTable().indexOfItem(t);this._getManagedObjectModel().setProperty("/@custom/sortOrder",s);this.getInternalModel().updateProperties(i,{sortOrder:s});};b.prototype.onSelectionChange=function(e){e.getParameter("listItems").forEach(function(t){this._selectTableItem(t);},this);};b.prototype.onItemPress=function(e){var t=e.getParameter('listItem');this._selectTableItem(t);};b.prototype._selectTableItem=function(t){var i=this._getTable().indexOfItem(t);var s=this._getSelectedSortOrder();this._getTable().getItems().forEach(function(t,I){this.getInternalModel().updateProperties(I,{sortOrder:(I===i?s:undefined),selected:(I===i),position:(I===i?0:undefined)});},this);};b.prototype._getTableItemByColumnKey=function(c){var C=this._getTable().getBinding("items").getContexts();var t=this._getTable().getItems().filter(function(T,i){return C[i].getObject().columnKey===c;});return t[0];};b.prototype._getSelectedSortOrder=function(){var t=this.byId("IDSortOrderTable").getSelectedItems()[0];return t===this.byId("IDAscendingItem")?"Ascending":"Descending";};b.prototype._getTable=function(){return sap.ui.getCore().byId(this.getId()+"--IDTable")||null;};b.prototype._updateInternalModel=function(){if(!this._bInternalModelToBeUpdated){return;}this._bInternalModelToBeUpdated=false;var s=this.getItems().filter(function(i){return i.getSelected();});this.setInternalModel(new a({preventInitialSort:true,tableItems:this.getItems().filter(function(i){return i;}),availableItems:this.getItems().filter(function(i){return i;})}));this._getTable().setModel(this.getInternalModel(),"JSONItems");if(s.length>1){var m=this.getInternalModel().getModelItemByColumnKey(s[0].getColumnKey());var t=this._getTableItemByColumnKey(m.columnKey);this._selectTableItem(t);this._getManagedObjectModel().setProperty("/@custom/sortOrder",s[0].getSortOrder());}};return b;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.adapter.ODataBaseAdapter')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.adapter.ODataBaseAdapter');sap.ui.define("sap/ui/mdc/experimental/provider/adapter/ODataBaseAdapter",["./base/BaseAdapter"],function(B){"use strict";function s(S){var p=S.indexOf("(");return p>=0?S.slice(0,p):S;}var O=B.extend("sap.ui.mdc.experimental.provider.adapter.ODataBaseAdapter",{_schemaCache:{},aExpand:[],constructor:function(m,M,a,c){B.prototype.constructor.apply(this,arguments);}});O.prototype.afterMetaContextSwitch=function(c,p){if(!this._schemaCache[c]){this._schemaCache[c]=this.oMetaModel.getProperty(c);this.schema=this._schemaCache[c];this._precalucateFieldControl();}else{this.schema=this._schemaCache[c];}this.oEntitySet=this.calculateEntitySet(p);};O.prototype.calculateEntitySet=function(p){var a,n,e,q,E,P=p.split("/");if(P[0]!==""){return null;}P.shift();E=this.oMetaModel.getODataEntitySet(s(P[0]));if(!E){return null;}P.shift();while(P.length){q=E.entityType;e=this.oMetaModel.getODataEntityType(q);n=s(P[0]);a=this.oMetaModel.getODataAssociationEnd(e,n);if(a){E=this.oMetaModel.getODataEntitySet(a.entitySet);}else{return null;}}return E;};O.prototype.resolveNavi=function(n,T){var p=n.split("/"),N=this.oEntitySet,a;while(p.length>1){a=this.oMetaModel.getODataAssociationSetEnd(this.schema,p[0]);N=this.oMetaModel.getODataEntitySet(a.entitySet);if(this.aExpand.indexOf(p[0])==-1){this.aExpand.push(p[0]);}p.shift(-1);}var b="/"+N.name+"/"+p[0];var m=this.oMetaModel.getMetaContext(b);var M=m.getPath();var o=new T(this.oModel,this.sModelName,this.sContextName,M,true);o.oEntitySet=N;return o;};O.prototype.enabled=function(){var u=this.getAnnotation("Org.OData.Core.V1.Immutable/Bool")||this.getAnnotation("Org.OData.Core.V1.Computed/Bool");var e=u?u=="false":true;if(e&&this.schema._fieldControl){e=this.schema._fieldControl.editable;this.setValue("!enabled",this.schema._fieldControl.readonly);}else{this.setValue("!enabled",!e);}return e;};O.prototype.tooltip=function(){return this.getAnnotation("com.sap.vocabularies.Common.v1.QuickInfo/String");};O.prototype.label=function(){return this["//"]["com.sap.vocabularies.Common.v1.Label"]["String"];};O.prototype.navigationProperties=function(){var i,n,N=this.getAnnotation("navigationProperty"),a=[];for(i=0;i<N.length;i++){n=N[i];a[n.name]=n;}return a;};O.prototype.expand=function(){return this.aExpand;};O.prototype["//"]=function(){return this.schema;};O.prototype.getAnnotation=function(a,A){A=A||this.schema;var p=a.split("/");var i=0;while(A&&p[i]){A=A[p[i]];i++;}return A;};O.prototype._isAnnotationBoolean=function(a){var A=this.getAnnotation(a);var i=false;if(A!=null){i=A.Bool?(A.Bool=="true"):true;}return i;};O.prototype._precalucateFieldControl=function(){var f=this["//"]["com.sap.vocabularies.Common.v1.FieldControl"];if(f){var a={};this._schemaCache[this.sMetaContext]._fieldControl=a;if(f.EnumMember){switch(f.EnumMember){case"com.sap.vocabularies.Common.v1.FieldControlType/Hidden":a.visible=false;a.hidden=true;a.editable=false;a.readonly=true;a.required=false;break;case"com.sap.vocabularies.Common.v1.FieldControlType/Mandatory":a.visible=true;a.hidden=false;a.editable=true;a.readonly=false;a.required=true;break;case"com.sap.vocabularies.Common.v1.FieldControlType/ReadOnly":a.visible=true;a.hidden=false;a.editable=false;a.readonly=true;a.required=false;break;default:a.visible=true;a.hidden=false;a.editable=true;a.readonly=true;a.required=false;break;}}else{var p=f.Path;if(this.getModelName()){p=this.getModelName()+">"+p;}a.visible="{= ${"+p+"} !== 0}";a.hidden="{= ${"+p+"} === 0}";a.editable="{= ${"+p+"} !== 1}";a.readonly="{= ${"+p+"} === 1}";a.required="{= ${"+p+"} === 7}";}}};O.prototype._enrichFromEntitySet=function(f,e){var i,F=this._getAnnotation("Org.OData.Capabilities.V1.FilterRestrictions",e);f.filterable=true;f.requiredInFilter=false;if(F){for(i=0;i<F.NonFilterableProperties;i++){if(f.name===F.NonFilterableProperties.PropertyPath){f.filterable=false;}}}};O.prototype.metadataContextOfField=function(f){var i=Object.keys(this.fields).indexOf(f.name);if(i>-1){return this.sMetaContext+"/property/"+i;}else{return"";}};return O;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.adapter.ODataFieldAdapter')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.adapter.ODataFieldAdapter');sap.ui.define("sap/ui/mdc/experimental/provider/adapter/ODataFieldAdapter",["./base/FieldAdapter","./ODataBaseAdapter"],function(F,O){"use strict";var a=F.extend("sap.ui.mdc.experimental.provider.adapter.ODataFieldAdapter",{constructor:function(m,M,s,c){F.prototype.constructor.apply(this,[m,M,s,c,O]);}});a.prototype.allowEmptyValue=function(){return true;};a.prototype.defaultValue=function(){switch(this.ui5Type){case"sap.ui.model.odata.type.Boolean":return false;case"sap.ui.model.odata.type.Byte":case"sap.ui.model.odata.type.Decimal":case"sap.ui.model.odata.type.Double":case"sap.ui.model.odata.type.Guid":case"sap.ui.model.odata.type.Int16":case"sap.ui.model.odata.type.Int32":case"sap.ui.model.odata.type.Int64":case"sap.ui.model.odata.type.SByte":case"sap.ui.model.odata.type.Single":return 0;case"sap.ui.model.odata.type.Date":case"sap.ui.model.odata.type.DateTimeOffset":case"sap.ui.model.odata.type.TimeOfDay":return new Date();case"Edm.String":return"";default:return"";}};a.prototype.precision=function(){return this["//"]["Precision"];};a.prototype.scale=function(){return this["//"]["Scale"];};a.prototype.maximum=function(){return 0;};a.prototype.exclusiveMaximum=function(){return false;};a.prototype.minimum=function(){return 0;};a.prototype.exclusiveMinimum=function(){return false;};a.prototype.maxLength=function(){var m=this["//"]["maxLength"];return isNaN(m)?undefined:parseInt(m,10);};a.prototype.minLength=function(){var m=this["//"]["minLength"];return isNaN(m)?undefined:parseInt(m,10);};a.prototype.multipleOf=function(){return 1;};a.prototype.pattern=function(){return"/.*?/";};a.prototype.unit=function(){};a.prototype.textAlign=function(){};a.prototype.visible=function(){var h=this._isAnnotationBoolean("com.sap.vocabularies.UI.v1.Hidden");var v=h?!h:true;if(v&&this.schema._fieldControl){v=this.schema._fieldControl.visible;this.setValue("!visible",this.schema._fieldControl.hidden);}else{this.setValue("!visible",!v);}return v;};a.prototype.ui5Type=function(){if(this.oMetaModel.getUI5Type){return this.oMetaModel.getUI5Type(this.sMetaContext);}switch(this.schema.type){case"Edm.Boolean":return"sap.ui.model.odata.type.Boolean";case"Edm.Byte":return"sap.ui.model.odata.type.Byte";case"Edm.Date":return"sap.ui.model.odata.type.Date";case"Edm.DateTime":return"sap.ui.model.odata.type.DateTime";case"Edm.DateTimeOffset":return"sap.ui.model.odata.type.DateTimeOffset";case"Edm.Decimal":return"sap.ui.model.odata.type.Decimal";case"Edm.Double":return"sap.ui.model.odata.type.Double";case"Edm.Guid":return"sap.ui.model.odata.type.Guid";case"Edm.Int16":return"sap.ui.model.odata.type.Int16";case"Edm.Int32":return"sap.ui.model.odata.type.Int32";case"Edm.Int64":return"sap.ui.model.odata.type.Int64";case"Edm.SByte":return"sap.ui.model.odata.type.SByte";case"Edm.Single":return"sap.ui.model.odata.type.Single";case"Edm.String":return"sap.ui.model.odata.type.String";case"Edm.TimeOfDay":return"sap.ui.model.odata.type.TimeOfDay";default:if(this["//"]["sap:display-format"]=="Date"){return"sap.ui.model.odata.type.Date";}return"sap.ui.model.odata.type.String";}};a.prototype.formatOptions=function(){var f="";switch(this.ui5Type){case"sap.ui.model.odata.type.Boolean":break;case"sap.ui.model.odata.type.Byte":break;case"sap.ui.model.odata.type.Date":break;case"sap.ui.model.odata.type.DateTimeOffset":break;case"sap.ui.model.odata.type.Decimal":break;case"sap.ui.model.odata.type.Double":break;case"sap.ui.model.odata.type.Guid":break;case"sap.ui.model.odata.type.Int16":break;case"sap.ui.model.odata.type.Int32":break;case"sap.ui.model.odata.type.Int64":break;case"sap.ui.model.odata.type.SByte":break;case"sap.ui.model.odata.type.Single":break;case"sap.ui.model.odata.type.String":break;case"sap.ui.model.odata.type.TimeOfDay":break;default:break;}return f;};a.prototype.semantics=function(){if(this.getAnnotation("com.sap.vocabularies.Common.v1.Masked")!=null){return F.Semantics.password;}if(this.getAnnotation("com.sap.vocabularies.Communication.v1.IsEmailAddress")!=null){return F.Semantics.eMail;}if(this.getAnnotation("com.sap.vocabularies.Communication.v1.IsPhoneNumber")!=null){return F.Semantics.phoneNumber;}if(this.getAnnotation("com.sap.vocabularies.Communication.v1.IsUrl")!=null){return F.Semantics.url;}if(this.getAnnotation("Org.OData.Measures.V1.Unit")!=null){return F.Semantics.currency;}if(this.getAnnotation("Org.OData.Measures.V1.ISOCurrency")!=null){return F.Semantics.measure;}return F.Semantics.text;};a.prototype.name=function(){return this.schema.name;};a.prototype.required=function(){var r=this.getAnnotation("nullable");var R=r?r=="false":false;if(this.schema._fieldControl){R=this.schema._fieldControl.required;}else{R=R&&this.enabled;}return R;};a.prototype.filterable=function(){return(this.filterRestrictions.NonFilterableProperties.indexOf(this.schema.name)===-1);};a.prototype.requiredInFilter=function(){return(this.filterRestrictions.RequiredProperties.indexOf(this.schema.name)!==-1);};a.prototype.sortable=function(){return true;};a.prototype.valueHelp=function(){var r=null;var v=this.getAnnotation("com.sap.vocabularies.Common.v1.ValueList");if(v){r={};var e="/"+v.CollectionPath.String;r.valuesPath=this.asPath(e);r.parameters=[];var p,i,l,V,m,M;for(i=0;i<v.Parameters.length;i++){p=v.Parameters[i];l=p.LocalDataProperty?p.LocalDataProperty.PropertyPath:null;V=p.ValueListProperty.PropertyPath;m=this.oMetaModel.getMetaContext(e+"/"+V);M=m.getPath();var o=new a(this.oModel,this.sModelName,this.sContextName,M,true);r.parameters.push({targetProperty:l,sourceAdapter:o});}}return r;};a.prototype.describedBy=function(){var t=this["//"]["com.sap.vocabularies.Common.v1.Text"];if(!t){return this;}return this.resolveNavi(t.Path,a);};return a;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.adapter.ODataObjectAdapter')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.adapter.ODataObjectAdapter');sap.ui.define("sap/ui/mdc/experimental/provider/adapter/ODataObjectAdapter",["./base/ObjectAdapter","./ODataBaseAdapter","./ODataFieldAdapter"],function(O,a,b){"use strict";var c=O.extend("sap.ui.mdc.experimental.provider.adapter.ODataObjectAdapter",{_schemaCache:{},aExpand:[],constructor:function(m,M,s,C){O.prototype.constructor.apply(this,[m,M,s,C,a]);}});c.prototype.collection=function(){return this.asPath("/"+this.oEntitySet.name);};c.prototype.keys=function(){var i,k=this["//"]["key"]["propertyRef"],K={};for(i=0;i<k.length;i++){K[k[i].name]=this.fields[k[i].name];}return K;};c.prototype.fields=function(){var i,f,F=this["//"]["property"],o={};for(i=0;i<F.length;i++){f=F[i];o[f.name]=new b(this.oModel,this.sModelName,this.sContextName,this.sMetaContext+"/property/"+i,true);o[f.name].oEntitySet=this.oEntitySet;}return o;};c.prototype.relations=function(){};return c;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.internal.table.Table.flexibility')){jQuery.sap.declare('sap.ui.mdc.internal.table.Table.flexibility');sap.ui.define("sap/ui/mdc/internal/table/Table.flexibility",["sap/ui/mdc/base/ConditionModel"],function(C){"use strict";function a(M,i,l,t,o,b){var c=b.getMetaModel(),d=c.requestObject(M);return d.then(function(){var I=t.getInnerTable(),p=c.createBindingContext(M),T=o.getProperty(t,"type"),f,v;if(T==='ResponsiveTable'){f="sap.ui.mdc.internal.table.responsivetable.AddColumnChange";}else if(T==='GridTable'){f="sap.ui.mdc.internal.table.gridtable.AddGridTableColumnChange";}try{var v=sap.ui.view({viewContent:'<core:View xmlns:core="sap.ui.core"><core:Fragment fragmentName="'+f+'" type="XML"/></core:View>',type:"XML",async:true,preprocessors:{xml:{bindingContexts:{dataField:p},models:{dataField:c}}}});}catch(e){jQuery.sap.log.error(e);}return v.loaded().then(function(){var g=v.getContent()[0].getColumns()[0],h,L,j,k,n,q;g.sId=t.getId()+'--'+g.getId().split('--')[1];if(l){if(T==='ResponsiveTable'){j=g.getHeader();}else if(T==='GridTable'){var j=g.getLabel();}j.setText(l);}o.insertAggregation(I,"columns",g,i);if(T==='ResponsiveTable'){h=v.getContent()[1];L=o.getBindingTemplate(I,"items");o.insertAggregation(L,"cells",h,i);}n=t.getListBinding();q=C.getFor(n);k=t.getListBindingInfo();n.getModel().unregisterNamedBinding(n);t.getInnerTable().bindItems({path:k.path,template:k.template,parameters:k.parameters});if(q){q.setFor(t.getListBinding());q.applyFilters();}return g;});});}function r(e,t,M){var I=t.getInnerTable(),T=M.getProperty(t,"type"),l,b=M.getAggregation(I,"columns"),d,R={},o,f,g;for(var i=0;i<b.length;i++){if(M.getId(b[i])===e){f=b[i];g=M.getAggregation(f,"customData");for(var c=0;c<g.length;c++){if(M.getProperty(g[c],"key")==="metaContextPath"){R.metaContextPath=M.getProperty(g[c],"value");}}R.index=i;if(T==='ResponsiveTable'){o=M.getAggregation(f,"header");}else if(T==='GridTable'){o=M.getAggregation(f,"label");}R.label=M.getProperty(o,"text");M.removeAggregation(I,"columns",f);if(T==='ResponsiveTable'){l=M.getBindingTemplate(I,"items");d=M.getAggregation(l,"cells");M.removeAggregation(l,"cells",d[i]);}return R;}}}function m(e,t,T,M){var I=T.getInnerTable(),c=M.getAggregation(I,"columns"),s=M.getProperty(T,"type"),l,b;for(var i=0;i<c.length;i++){if(M.getId(c[i])===e){M.removeAggregation(I,"columns",c[i]);M.insertAggregation(I,"columns",c[i],t);if(s==='ResponsiveTable'){l=M.getBindingTemplate(I,"items");b=M.getAggregation(l,"cells");M.removeAggregation(l,"cells",b[i]);M.insertAggregation(l,"cells",b[i],t);}}}}return{"addColumn":{applyChange:function(c,t,p){var o=c.getDefinition(),M=o.content.bindingString,l=o.content.label,i=o.content.index,b=p.modifier,d=p.appComponent||p.view,e=d?d.getModel():undefined;if(!e instanceof sap.ui.model.odata.v4.ODataModel){jQuery.sap.log.error("Change can't be applied without a container having a Odata v4 model assigned");return false;}return a(M,i,l,t,b,e).then(function(f){c.setRevertData({elementId:b.getId(f)});});},revertChange:function(c,t,p){var R=c.getRevertData();if(R){r(R.elementId,t,p.modifier);c.resetRevertData();}else{jQuery.sap.log.error("Attempt to revert an unapplied change.");return false;}return true;}},"moveColumns":{applyChange:function(c,t,p){var o=c.getDefinition(),M=o.content.movedElements;for(var x=0;x<M.length;x++){m(M[x].element,M[x].targetIndex,t,p.modifier);}return true;},revertChange:function(c,t,p){var o=c.getDefinition(),M=o.content.movedElements;for(var x=0;x<M.length;x++){m(M[x].element,M[x].sourceIndex,t,p.modifier);}return true;}},"removeColumn":{applyChange:function(c,t,p){var o=c.getDefinition(),R;R=r(o.content.removedElement,t,p.modifier);c.setRevertData(R);return true;},revertChange:function(c,t,p){var R=c.getRevertData(),M=p.appComponent||p.view,o=M?M.getModel():undefined;if(R){return a(R.metaContextPath,R.index,R.label,t,p.modifier,o).then(function(){c.resetRevertData();});}else{jQuery.sap.log.error("Attempt to revert an unapplied change.");return false;}}},"setTableType":{applyChange:function(c,t,p){var o=c.getDefinition(),s=t.getType(),M=p.modifier;M.setProperty(t,"type",o.content.tableType);c.setRevertData({originalTableType:s});return true;},revertChange:function(c,t,p){var R=c.getRevertData(),M=p.modifier;if(R){M.setProperty(t,"type",R.originalTableType);}else{jQuery.sap.log.error("Attempt to revert an unapplied change.");return false;}}}};},false);};if(!jQuery.sap.isDeclared('sap.ui.mdc.internal.valuehelp.ValueHelp.controller')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.internal.valuehelp.ValueHelp.controller');jQuery.sap.require('sap.ui.core.mvc.Controller');jQuery.sap.require('sap.m.SearchField');jQuery.sap.require('sap.ui.model.json.JSONModel');sap.ui.define("sap/ui/mdc/internal/valuehelp/ValueHelp.controller",["sap/ui/core/mvc/Controller","sap/ui/mdc/base/ConditionModel","sap/ui/mdc/base/ODataSuggestProvider","sap/ui/mdc/base/OperatorSuggestProvider","sap/m/SearchField","sap/ui/model/json/JSONModel"],function(C,a,O,b,S,J){"use strict";return C.extend("sap.ui.mdc.internal.valuehelp.ValueHelp",{handleSearch:function(e){var v=this.getView().byId("valueListTable");var s=e.getParameter("query")||e.getParameter("newValue");v.getBinding("items").changeParameters({$search:s||undefined});},onInit:function(){var f=new J({visible:"HideMode",listView:false,tableView:true,sSelectedRowCount:0,sSearchFieldValue:""});this.oValueListTable=this.getView().byId("valueListTable");var l=this.oValueListTable.getBinding("items");this.oValueListTableConditionModel=a.getFor(l);var t=this.oValueListTableConditionModel.bindProperty("/",this.oValueListTableConditionModel.getContext("/"));t.attachChange(this.handleTableChange.bind(this));l.attachChange(this.updateTableSelections.bind(this));this.getView().setModel(this.oValueListTableConditionModel,"vltcm");this.getView().setModel(f,"FilterLayoutFlag");if(!this.oConditionModel){this.oConditionModel=this.oView.getModel("cm");var c=this.oConditionModel.bindProperty("/",this.oConditionModel.getContext("/"));c.attachChange(function(e){this.updateTableSelections();}.bind(this));}var s=this.getView().byId("template::ValueHelpTableSearchField");s.attachBrowserEvent("focusout",function(e){s.fireSearch({query:s.getValue(),id:s.getId()});});},onBeforeRendering:function(){},onAfterRendering:function(){},handleFilter:function(){var s=this.getView().byId("SplitCont");if(s.getMode()==="HideMode"){s.setMode("ShowHideMode");this.getView().getModel("FilterLayoutFlag").setProperty("/visible","ShowHideMode");}else{s.setMode("HideMode");this.getView().getModel("FilterLayoutFlag").setProperty("/visible","HideMode");}},handleTableChange:function(){this.oValueListTableConditionModel.applyFilters();},handleConditionButtonVisibility:function(){var g=this.getView().byId("template::DefineConditions");var c=this.getView().getModel("cm");var l=c.getConditions().length;var o=[];for(var i=0;i<l;i++){if(c.getConditions()[i].operator!=="EEQ"){o.push(c.getConditions()[i]);}}if(o.length===0){c.addCondition(c.createCondition(this.getView().getController().fieldPath,"EQ",[]));}else{var d=g.getContent();d[d.length-1].getContent()[4].getContent()[1].setVisible(true);}},onResetValueHelp:function(c,m){var v=this.getView();v.setModel(m,"cm");},handleToggleButton:function(e){var i=e.getSource().getId();if(i.indexOf("template::ListView")!==-1){this.getView().getModel("FilterLayoutFlag").setProperty("/listView",true);this.getView().getModel("FilterLayoutFlag").setProperty("/tableView",false);}else if(i.indexOf("template::TableView")!==-1){this.getView().getModel("FilterLayoutFlag").setProperty("/tableView",true);this.getView().getModel("FilterLayoutFlag").setProperty("/listView",false);}},showSelected:function(e){var t;t=this.getView().byId("valueListTable");if(!this.oTableBindingInfo){this.oTableBindingInfo=t.getBindingInfo("items");}if(e.getParameter("pressed")===true){var f=jQuery.sap.extend({},t.getBindingInfo("items"),{filters:this.getFiltersFromConditions()});t.bindItems(f);}else{t.bindItems(this.oTableBindingInfo);}t.getBinding("items").attachChange(this.updateTableSelections.bind(this));},getFiltersFromConditions:function(){var c,d,f,e,v,s,m,k,K,I;c=this.getView().getModel("cm");d=c.getConditions();f=[];I=[];e=d.filter(function(o){return o.operator==="EEQ";});v=this.getView().getModel("valueList");s=v.getProperty("/CollectionPath");m=v.getProperty('/$model').getMetaModel();k=m.getObject('/'+s+'/').$Key;K=k[0];var g=[];var h=[];var V=[];for(var i=0;i<e.length;i++){g[i]=e[i].values[2];}for(var j=0;j<g.length;j++){V[j]=g[j].split(/\((.*?)\)/)[1];}V.forEach(function(n,o){h=V[o].split(',');f=[];if(h.length===1){f.push(new sap.ui.model.Filter({path:K,operator:sap.ui.model.FilterOperator.EQ,value1:e[o].values[0]}));I.push(new sap.ui.model.Filter({filters:f,and:false}));}else{for(var l=0;l<h.length;l++){f.push(new sap.ui.model.Filter({path:h[l].substr(0,h[l].indexOf('=')),operator:sap.ui.model.FilterOperator.EQ,value1:h[l].indexOf("'")===-1?h[l].slice(h[l].indexOf("=")+1,h[l].length):h[l].slice(h[l].indexOf("'")+1,-1)}));}I.push(new sap.ui.model.Filter({filters:f,and:true}));}});return new sap.ui.model.Filter({filters:I,and:false});},onChange:function(){var c=this.oView.getModel("cm");c._checkIsEmpty();c._updateValues();c.refresh();c.checkUpdate(true,true);},removeCondition:function(e){var s=e.oSource;var c=s.getBindingContext("cm").getObject();var o=this.oView.getModel("cm");o.removeCondition(c);},addCondition:function(e){var s=e.oSource;var c=s.getBindingContext("cm").getObject();var o=this.oView.getModel("cm");var i=o.indexOf(c);this.addDummyCondition(i+1);},handleSelectionChange:function(e){var v=this.getView();var c=v.getModel("cm");var V=v.getModel("valueList").getObject("/");var I,k,d,B;for(var i=0;i<e.getParameter("listItems").length;i++){B=e.getParameter("listItems")[i].getBindingContext();I=B.getObject();k=I[V.__sapfe.keyPath];d=I[V.__sapfe.descriptionPath];var o=c.createCondition(this.sFieldPath,"EEQ",[k,d,B.getCanonicalPath()]);var f=c.indexOf(o,this.sFieldPath);if(f===-1){c.addCondition(o);}else{c.removeCondition(this.sFieldPath,f);}}},handleTokenUpdate:function(e){if(e.getParameter("type")==="removed"){var r=e.getParameter("removedTokens");var t=r[0];var c=t.getBindingContext("cm").getObject();var o=this.oView.getModel("cm");var i=o.indexOf(c);o.removeCondition(this.sFieldPath,i);}},updateTableSelections:function(e){var t,I;t=this.getView().byId("valueListTable");t.removeSelections(true);I=t.getItems();var c,d,f;c=this.getView().getModel("cm");d=c.getConditions();f=d.filter(function(o){return o.operator==="EEQ";});var i,j,o,g;for(i=0;i<f.length;i++){o=f[i];for(j=0;j<I.length;j++){g=I[j];if(g.getBindingContext().getCanonicalPath()===o.values[2]){t.setSelectedItem(g,true);break;}}}},addDummyCondition:function(i){var c=this.oView.getModel("cm");var o=c.createCondition(this.sFieldPath,"EQ",[]);if(i!==undefined){c.insertCondition(i,o,true);}else{c.addCondition(o,true);}},valueCtrlFactory:function(i,c){var o=c.oModel;var p=c.sPath;var d=parseInt(p.split("/")[p.split("/").length-1],10);var e=parseInt(p.split("/")[2],10);p=p.slice(0,p.lastIndexOf("/")-1);p=p.slice(0,p.lastIndexOf("/")-1);var f=o.getProperty(p)[e];var g=o.getFilterOperatorConfig().getOperator(f.operator);var F=o.getFilterField();var D=F._getDataType();var v=a.createControl(D,g,"cm>",d);v.setLayoutData(new sap.m.FlexItemData({shrinkFactor:0,growFactor:0.5}));if(d){v.addStyleClass("sapUiSmallMarginBegin");}v.attachChange(this.onChange.bind(this));return v;}});});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nColumnPanel')){
/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.experimental.P13nColumnPanel');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.m.library');sap.ui.define("sap/ui/mdc/experimental/P13nColumnPanel",['jquery.sap.global','sap/m/library','./P13nPanel','./P13nInternalModel'],function(q,M,P,a){"use strict";var b=P.extend("sap.ui.mdc.experimental.P13nColumnPanel",{metadata:{library:"sap.ui.mdc"}});b.prototype.init=function(){P.prototype.init.apply(this,arguments);this._sColumnKeyOfMarkedItem=undefined;this._bShowOnlySelectedItems=false;this._oInternalModel=undefined;this._proxyOnModelContextChange=q.proxy(this._onModelContextChange,this);this.attachModelContextChange(this._proxyOnModelContextChange);};b.prototype.refreshInitialState=function(){this._bInternalModelToBeUpdated=true;this.invalidate();};b.prototype._onModelContextChange=function(){if(!this.getModel()){return;}this._updateInternalModel();};b.prototype.onBeforeRendering=function(){this._updateInternalModel();};b.prototype.exit=function(){this.detachModelContextChange(this._proxyOnModelContextChange);};b.prototype._selectTableItem=function(t){this._oInternalModel.selectModelItem(this._oInternalModel.getModelItemByColumnKey(this._getColumnKeyByTableItem(t)),t.getSelected());this._syncPosition();this._toggleMarkedTableItem(t);this._updateControlLogic();this._updateCounts();};b.prototype._moveTableItem=function(t,T){var m=this._oInternalModel.getModelItemByColumnKey(this._getColumnKeyByTableItem(t));var o=this._oInternalModel.getModelItemByColumnKey(this._getColumnKeyByTableItem(T));this._oInternalModel.moveModelItemPosition(m,o);this._syncPosition();this._oInternalModel.moveModelItem(m,o);this._removeStyleFromTableItem(this._getMarkedTableItem());this._sortTableItemsAccordingToInternalModel();this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};b.prototype.onPressButtonMoveToTop=function(){this._moveTableItem(this._getMarkedTableItem(),this._getVisibleTableItems()[0]);};b.prototype.onPressButtonMoveUp=function(){var v=this._getVisibleTableItems();this._moveTableItem(this._getMarkedTableItem(),v[v.indexOf(this._getMarkedTableItem())-1]);};b.prototype.onPressButtonMoveDown=function(){var v=this._getVisibleTableItems();this._moveTableItem(this._getMarkedTableItem(),v[v.indexOf(this._getMarkedTableItem())+1]);};b.prototype.onPressButtonMoveToBottom=function(){var v=this._getVisibleTableItems();this._moveTableItem(this._getMarkedTableItem(),v[v.length-1]);};b.prototype.onItemPressed=function(e){this._toggleMarkedTableItem(e.getParameter('listItem'));this._updateControlLogic();};b.prototype.onSelectionChange=function(e){e.getParameter("listItems").forEach(function(t){this._selectTableItem(t);},this);};b.prototype.onSwitchButtonShowSelected=function(){this._bShowOnlySelectedItems=!this._bShowOnlySelectedItems;this._removeStyleFromTableItem(this._getMarkedTableItem());this._filterTableItems();this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};b.prototype.onSearchFieldLiveChange=function(){this._removeStyleFromTableItem(this._getMarkedTableItem());this._filterTableItems();this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};b.prototype._filterTableItems=function(){var f=[];if(this._isFilteredByShowSelected()===true){f.push(new sap.ui.model.Filter("selected","EQ",true));}var s=this._getSearchText();if(s){f.push(new sap.ui.model.Filter([new sap.ui.model.Filter("text",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("tooltip",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("role",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("aggregationRole",sap.ui.model.FilterOperator.Contains,s)],false));}this._getTable().getBinding("items").filter(f);};b.prototype._sortTableItemsAccordingToInternalModel=function(){var c=function(i,I){var m=this._oInternalModel.getModelItemByColumnKey(i.getColumnKey());var o=this._oInternalModel.getModelItemByColumnKey(I.getColumnKey());var d=this._oInternalModel.getIndexOfModelItem(m);var e=this._oInternalModel.getIndexOfModelItem(o);if(d<e){return-1;}else if(d>e){return 1;}return 0;};this._getTable().getBinding("items").sort(new sap.ui.model.Sorter({path:'',descending:false,group:false,comparator:c.bind(this)}));};b.prototype._getVisibleTableItems=function(){return this._getTable().getItems().filter(function(t){return!!t.getVisible();});};b.prototype._getMarkedTableItem=function(){return this._getTableItemByColumnKey(this._sColumnKeyOfMarkedItem);};b.prototype._toggleMarkedTableItem=function(t){this._removeStyleFromTableItem(this._getMarkedTableItem());var c=this._getColumnKeyByTableItem(t);if(c){this._sColumnKeyOfMarkedItem=c;this._addStyleToTableItem(t);}};b.prototype._getStyledAsMarkedTableItem=function(){var d=this._getTable().$().find(".sapMP13nColumnsPanelItemSelected");return d.length?q(d[0]).control()[0]:undefined;};b.prototype._getTableItemByColumnKey=function(c){var C=this._getTable().getBinding("items").getContexts();var t=this._getTable().getItems().filter(function(T,i){return C[i].getObject().getColumnKey()===c;});return t[0];};b.prototype._getColumnKeyByTableItem=function(t){var i=this._getTable().indexOfItem(t);if(i<0){return null;}return this._getTable().getBinding("items").getContexts()[i].getObject().getColumnKey();};b.prototype._syncPosition=function(){this.getItems().forEach(function(i){var m=this._oInternalModel.getModelItemByColumnKey(i.getColumnKey());i.setPosition(m.position);},this);};b.prototype._addStyleToTableItem=function(t){if(t){t.addStyleClass("sapMP13nColumnsPanelItemSelected");}};b.prototype._removeStyleFromTableItem=function(t){if(t){t.removeStyleClass("sapMP13nColumnsPanelItemSelected");}};b.prototype._isFilteredByShowSelected=function(){return!!this._bShowOnlySelectedItems;};b.prototype._updateControlLogic=function(){var v=this._getVisibleTableItems();this._getManagedObjectModel().setProperty("/@custom/isMoveUpButtonEnabled",v.indexOf(this._getMarkedTableItem())>0);this._getManagedObjectModel().setProperty("/@custom/isMoveDownButtonEnabled",v.indexOf(this._getMarkedTableItem())>-1&&v.indexOf(this._getMarkedTableItem())<v.length-1);};b.prototype._updateCounts=function(){var c=0;this.getItems().forEach(function(i){if(i.getSelected()){c++;}});this._getManagedObjectModel().setProperty("/@custom/countOfSelectedItems",c);this._getManagedObjectModel().setProperty("/@custom/countOfItems",this.getItems().length);};b.prototype._updateInternalModel=function(){if(!this._bInternalModelToBeUpdated){return;}this._bInternalModelToBeUpdated=false;this._removeStyleFromTableItem(this._getMarkedTableItem());this._oInternalModel=new a({tableItems:this.getItems()});this._sortTableItemsAccordingToInternalModel();this._filterTableItems();if(!this._sColumnKeyOfMarkedItem){this._sColumnKeyOfMarkedItem=this._getColumnKeyByTableItem(this._getVisibleTableItems()[0]);}this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();this._updateCounts();};return b;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nFilterPanel')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nFilterPanel');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.m.library');sap.ui.define("sap/ui/mdc/experimental/P13nFilterPanel",['jquery.sap.global','sap/m/library','./P13nPanel','./P13nInternalModel'],function(q,M,P,a){"use strict";var b=P.extend("sap.ui.mdc.experimental.P13nFilterPanel",{metadata:{library:"sap.ui.mdc"}});b.prototype.init=function(){P.prototype.init.apply(this,arguments);this._sColumnKeyOfMarkedItem=undefined;this._bShowOnlySelectedItems=false;this._oInternalModel=undefined;this._proxyOnModelContextChange=q.proxy(this._onModelContextChange,this);this.attachModelContextChange(this._proxyOnModelContextChange);};b.prototype.refreshInitialState=function(){this._bInternalModelToBeUpdated=true;this.invalidate();};b.prototype._onModelContextChange=function(){if(!this.getModel()){return;}this._updateInternalModel();};b.prototype.onBeforeRendering=function(){this._updateInternalModel();};b.prototype.exit=function(){this.detachModelContextChange(this._proxyOnModelContextChange);};b.prototype._selectTableItem=function(t){this._oInternalModel.selectModelItem(this._oInternalModel.getModelItemByColumnKey(this._getColumnKeyByTableItem(t)),t.getSelected());this._syncPosition();this._toggleMarkedTableItem(t);this._updateControlLogic();this._updateCounts();};b.prototype._moveTableItem=function(t,T){var m=this._oInternalModel.getModelItemByColumnKey(this._getColumnKeyByTableItem(t));var o=this._oInternalModel.getModelItemByColumnKey(this._getColumnKeyByTableItem(T));this._oInternalModel.moveModelItemPosition(m,o);this._syncPosition();this._oInternalModel.moveModelItem(m,o);this._removeStyleFromTableItem(this._getMarkedTableItem());this._sortTableItemsAccordingToInternalModel();this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};b.prototype.onPressButtonMoveToTop=function(){this._moveTableItem(this._getMarkedTableItem(),this._getVisibleTableItems()[0]);};b.prototype.onPressButtonMoveUp=function(){var v=this._getVisibleTableItems();this._moveTableItem(this._getMarkedTableItem(),v[v.indexOf(this._getMarkedTableItem())-1]);};b.prototype.onPressButtonMoveDown=function(){var v=this._getVisibleTableItems();this._moveTableItem(this._getMarkedTableItem(),v[v.indexOf(this._getMarkedTableItem())+1]);};b.prototype.onPressButtonMoveToBottom=function(){var v=this._getVisibleTableItems();this._moveTableItem(this._getMarkedTableItem(),v[v.length-1]);};b.prototype.onItemPressed=function(e){this._toggleMarkedTableItem(e.getParameter('listItem'));this._updateControlLogic();};b.prototype.onSelectionChange=function(e){e.getParameter("listItems").forEach(function(t){this._selectTableItem(t);},this);};b.prototype.onSwitchButtonShowSelected=function(){this._bShowOnlySelectedItems=!this._bShowOnlySelectedItems;this._removeStyleFromTableItem(this._getMarkedTableItem());this._filterTableItems();this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};b.prototype.onSearchFieldLiveChange=function(){this._removeStyleFromTableItem(this._getMarkedTableItem());this._filterTableItems();this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};b.prototype._filterTableItems=function(){var f=[];if(this._isFilteredByShowSelected()===true){f.push(new sap.ui.model.Filter("selected","EQ",true));}var s=this._getSearchText();if(s){f.push(new sap.ui.model.Filter([new sap.ui.model.Filter("text",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("tooltip",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("role",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("aggregationRole",sap.ui.model.FilterOperator.Contains,s)],false));}this._getTable().getBinding("items").filter(f);};b.prototype._sortTableItemsAccordingToInternalModel=function(){var c=function(i,I){var m=this._oInternalModel.getModelItemByColumnKey(i.getColumnKey());var o=this._oInternalModel.getModelItemByColumnKey(I.getColumnKey());var d=this._oInternalModel.getIndexOfModelItem(m);var e=this._oInternalModel.getIndexOfModelItem(o);if(d<e){return-1;}else if(d>e){return 1;}return 0;};this._getTable().getBinding("items").sort(new sap.ui.model.Sorter({path:'',descending:false,group:false,comparator:c.bind(this)}));};b.prototype._getVisibleTableItems=function(){return this._getTable().getItems().filter(function(t){return!!t.getVisible();});};b.prototype._getMarkedTableItem=function(){return this._getTableItemByColumnKey(this._sColumnKeyOfMarkedItem);};b.prototype._toggleMarkedTableItem=function(t){this._removeStyleFromTableItem(this._getMarkedTableItem());var c=this._getColumnKeyByTableItem(t);if(c){this._sColumnKeyOfMarkedItem=c;this._addStyleToTableItem(t);}};b.prototype._getStyledAsMarkedTableItem=function(){var d=this._getTable().$().find(".sapMP13nColumnsPanelItemSelected");return d.length?q(d[0]).control()[0]:undefined;};b.prototype._getTableItemByColumnKey=function(c){var C=this._getTable().getBinding("items").getContexts();var t=this._getTable().getItems().filter(function(T,i){return C[i].getObject().getColumnKey()===c;});return t[0];};b.prototype._getColumnKeyByTableItem=function(t){var i=this._getTable().indexOfItem(t);if(i<0){return null;}return this._getTable().getBinding("items").getContexts()[i].getObject().getColumnKey();};b.prototype._syncPosition=function(){this.getItems().forEach(function(i){var m=this._oInternalModel.getModelItemByColumnKey(i.getColumnKey());i.setPosition(m.position);},this);};b.prototype._addStyleToTableItem=function(t){if(t){t.addStyleClass("sapMP13nColumnsPanelItemSelected");}};b.prototype._removeStyleFromTableItem=function(t){if(t){t.removeStyleClass("sapMP13nColumnsPanelItemSelected");}};b.prototype._isFilteredByShowSelected=function(){return!!this._bShowOnlySelectedItems;};b.prototype._updateControlLogic=function(){var v=this._getVisibleTableItems();this._getManagedObjectModel().setProperty("/@custom/isMoveUpButtonEnabled",v.indexOf(this._getMarkedTableItem())>0);this._getManagedObjectModel().setProperty("/@custom/isMoveDownButtonEnabled",v.indexOf(this._getMarkedTableItem())>-1&&v.indexOf(this._getMarkedTableItem())<v.length-1);};b.prototype._updateCounts=function(){var c=0;this.getItems().forEach(function(i){if(i.getSelected()){c++;}});this._getManagedObjectModel().setProperty("/@custom/countOfSelectedItems",c);this._getManagedObjectModel().setProperty("/@custom/countOfItems",this.getItems().length);};b.prototype._updateInternalModel=function(){if(!this._bInternalModelToBeUpdated){return;}this._bInternalModelToBeUpdated=false;this._removeStyleFromTableItem(this._getMarkedTableItem());this._oInternalModel=new a({tableItems:this.getItems()});this._sortTableItemsAccordingToInternalModel();this._filterTableItems();if(!this._sColumnKeyOfMarkedItem){this._sColumnKeyOfMarkedItem=this._getColumnKeyByTableItem(this._getVisibleTableItems()[0]);}this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();this._updateCounts();};return b;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.adapter.AdapterFactory')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.adapter.AdapterFactory');jQuery.sap.require('sap.ui.model.MetaModel');sap.ui.define("sap/ui/mdc/experimental/provider/adapter/AdapterFactory",["sap/ui/model/MetaModel","sap/ui/mdc/experimental/provider/adapter/ODataFieldAdapter","sap/ui/mdc/experimental/provider/adapter/ODataObjectAdapter"],function(M,O,a){"use strict";var F={adapterCache:{},promiseCache:{},defaultAdapter:{"field":"sap/ui/mdc/experimental/provider/adapter/ODataFieldAdapter","object":"sap/ui/mdc/experimental/provider/adapter/ODataObjectAdapter"},adapterClassCache:{"sap/ui/mdc/experimental/provider/adapter/ODataFieldAdapter":O,"sap/ui/mdc/experimental/provider/adapter/ODataObjectAdapter":a}};F.requestAdapter=function(m,o){var k=F._getKeyInfo(o);if(!m.getMetaModel()){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapterFactory: Only models with meta model are allowed");}if(!F.promiseCache[k.key]){F.promiseCache[k.key]=new Promise(function(r,b){var A=F.getAdapter(m,o);if(A){r(A);}else{sap.ui.require([o.adapter],function(c){var A=new c(m,o.model,o.name);if(A){F.adapterCache[k.key]=A;r(A);}else{b("Invalid class");}});}});}return F.promiseCache[k.key];};F.getAdapter=function(m,o){var k=F._getKeyInfo(o);var c=F.adapterClassCache[k.adapter];if(!m.getMetaModel()){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapterFactory: Only models with meta model are allowed");}if(F.adapterCache[k.key]){return F.adapterCache[k.key];}else if(c){F.adapterCache[k.key]=new c(m,o.model,o.name);return F.adapterCache[k.key];}return null;};F._getKeyInfo=function(m){if(!m.adapter){m.adapter=F.defaultAdapter[m.kind];}var k={adapter:m.adapter,modelName:m.model,context:m.name,key:m.model+">"+m.name+">"+m.adapter};return k;};F.cacheAdapterClass=function(A,b){F.adapterClassCache[A]=b;};return F;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.registry.ControlRegistry')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.registry.ControlRegistry');sap.ui.define("sap/ui/mdc/experimental/provider/registry/ControlRegistry",["./Utils","sap/ui/mdc/experimental/provider/ControlProvider","sap/ui/mdc/experimental/provider/adapter/AdapterFactory"],function(U,C,A){"use strict";var a={ControlProvider:C,Utils:U,AdapterFactory:A};a.getTemplateNodes=function(){return Object.keys(a._mTemplatingFunctions);};a.getProviderFunction=function(c){var n="";if(typeof c==='string'){n=c;}else{n=c.getMetadata().getName();}var p=a._mProviderFunctions[n];if(p!=null){return p;}else{return a._mProviderFunctions["sap.ui.mdc.Base"];}};a.getTemplatingFunction=function(n){var N="";if(typeof n==='string'){N=n;}else{N=U.className(n);}var v=a._mTemplatingFunctions[N];if(v!=null){return v;}else{return a._mTemplatingFunctions["sap.ui.mdc.Base"];}};a.cleanRegistry=function(p,t){p=(p==null)?true:p;if(p){a._mProviderFunctions={};}t=(t==null)?true:t;if(t){a._mTemplatingFunctions={};}};a.registerControl=function(c,p,t,s){a._mProviderFunctions[c]=p;a._mTemplatingFunctions[c]=t;if(s){var b=s.replace(new RegExp("/","g"),".");jQuery.sap.require(b);A.cacheAdapterClass(s,jQuery.sap.getObject(b));}};a._mTemplatingFunctions={"sap.ui.mdc.Base":function(n,c,o){var i=n.getAttribute("id");n.removeAttribute("id");n.setAttribute("id",o.key+"---"+i);var l=n.getAttribute("labelFor");if(l){n.setAttribute("labelFor",o.key+"---"+l);}},"sap.m.Label":function(n,c,o){a._mTemplatingFunctions["sap.ui.mdc.Base"](n,c,o);C.provideAttribute(n,"text",o.label);},"sap.ui.mdc.base.FilterField":function(n,c,o){a._mTemplatingFunctions["sap.ui.mdc.Base"](n,c,o);C.provideAttribute(n,"required",o.required);C.provideAttribute(n,"type",o.type);C.provideAttribute(n,"fieldPath",o.path);}};a._mProviderFunctions={"sap.ui.mdc.Base":function(c,o){C.provideProperty(c,"visible",o.visible);C.provideProperty(c,"tooltip",o.tooltip);},"sap.m.InputBase":function(c,o){a._mProviderFunctions["sap.ui.mdc.Base"](c,o);C.provideProperty(c,"editable",o.enabled);C.provideProperty(c,"required",o.required);var l=c.getLabels();for(var i=0;i<l.length;i++){if(C.canControlBeProvided(l[i],c)){a.getProviderFunction(l[i])(l[i],o);}}},"sap.m.Input":function(c,o){a._mProviderFunctions["sap.m.InputBase"](c,o);var t=U.convertToInputType(o);C.provideProperty(c,"type",t);},"sap.m.Label":function(c,o){a._mProviderFunctions["sap.ui.mdc.Base"](c,o);C.provideProperty(c,"text",o.label);},"sap.ui.layout.form.FormElement":function(c,o){var l=c.getLabel();if(l&&C.canControlBeProvided(l,c)){a.getProviderFunction(l)(l,o);}var f=c.getFields();for(var i=0;i<f.length;i++){if(C.canControlBeProvided(f[i],c)){a.getProviderFunction(f[i])(f[i],o);}}},"sap.ui.mdc.base.FilterField":function(c,o){C.provideProperty(c,"required",o.required);C.provideProperty(c,"type",o.type);C.provideProperty(c,"fieldPath",o.path);C.provideAggregation(c,"conditions",o.conditions);C.providePrepareCloneFunction(c,"suggestion",o.suggestion.bind(o));}};a.resolveMetadataContextsDeep=function(n,c,o,m){var b=n.children,i=0;for(i=0;i<b.length;i++){var s=U.className(b[i]);if(s&&!b[i].getAttribute("metadataContexts")&&a._mTemplatingFunctions[s]){b[i].setAttribute("metadataContexts",m);}else{a.resolveMetadataContextsDeep(b[i],c,o,m);}}};a.determineWithModel=function(n){var p=n;while(p&&!p.hasAttribute("var")){p=p.parentElement;}if(p){return p.getAttribute("var");}return null;};return a;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.ProviderHook')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.ProviderHook');jQuery.sap.require('sap.ui.base.ManagedObject');jQuery.sap.require('sap.ui.core.XMLTemplateProcessor');jQuery.sap.require('sap.ui.core.util.XMLPreprocessor');sap.ui.define("sap/ui/mdc/experimental/provider/ProviderHook",["sap/ui/base/ManagedObject","sap/ui/mdc/experimental/provider/registry/ControlRegistry","sap/ui/core/XMLTemplateProcessor","sap/ui/core/util/XMLPreprocessor"],function(M,C,X,a){"use strict";var P={};P.apply=function(){X._preprocessMetadataContexts=function(c,s,o){if(s.metadataContexts){for(var k in s.metadataContexts){for(var i=0;i<s.metadataContexts[k].length;i++){P._resolveMetadataContextPath(s.metadataContexts[k][i]);}}}};P._resolveMetadataContextPath=function(m){if(!m){return;}m.path=m.path||'';m.relative=m.path[0]!=='/';if(m.model==''){m.model=undefined;}if(!m.kind){m.kind='field';}m.name=m.name||m.model;};M.prototype._processMetadataContexts=function(m,s){var b,o,k;this._oProviderData={contexts:null,mProvidedProperties:{},mProvidedFunctions:{}};for(var c in m){b=m[c];for(var i=0;i<b.length;i++){o=b[i];if(!P._sanityChecks(o)){return;}k={};k.metadata=o;k.relative=o.relative;this._oProviderData.contexts=this._oProviderData.contexts||{};this._oProviderData.contexts[o.name]=k;}}if(this._oProviderData.contexts){this.attachModelContextChange(P._handleModelContextChange,P);}};M.prototype._cloneMetadataContexts=function(c){if(this._oProviderData){c._oProviderData=this._oProviderData;C.ControlProvider.prepareClone(c);}};};P.registerVisitors=function(A){for(var i=0;i<A.length;i++){var c=A[i].replace(new RegExp("/","g"),".");jQuery.sap.require(c);C.AdapterFactory.cacheAdapterClass(A[i],jQuery.sap.getObject(c));}P.registerTemplating();};P.registerTemplating=function(){var i,n=C.getTemplateNodes();var p=function(o,c){var m=o.getAttribute("metadataContexts");if(m){var b=M.bindingParser(m,null);var r=P._resolveMetadataContextPath(b);if(!r&&b.preprocessModel){P.resolveContexts(o,c,b);}}else{c.visitAttributes(o);}};for(i=0;i<n.length;i++){var N=C.Utils.getNameSpaceInfo(n[i]);a.plugIn(p,N.nameSpace,N.localName);}};P.resolveContexts=function(n,c,m){var o,b=c.getSettings().models[m.preprocessModel];if(!b){var v=c.getViewInfo();var d=sap.ui.getCore().getComponent(v.componentId);b=d?d.oModels[m.preprocessModel]:null;var V={};V[m.model]=b?b.getContext("/"):null;o=c["with"](V,false);}else{o=c;}if(b){var p=m.path;var A=C.AdapterFactory.getAdapter(b,m);A.switchMetaContext(p);var t=C.getTemplatingFunction(n);t(n,o,A);var s=n.getAttribute("metadataContexts");o.visitAttributes(n);if(s){n.setAttribute("metadataContexts",s);}}};P._handleModelContextChange=function(e){var c=e.getSource();for(var k in c._oProviderData.contexts){P._driveWithMetadata(c._oProviderData.contexts[k],c);}};P._driveWithMetadata=function(p,c){if(!p.model){p.model=c.getModel(p.metadata.model);}if(!p.model){jQuery.sap.log.debug("Metadata context cannot be resolved yet");return;}if(p.relative){var s=c.getBindingContext(p.metadata.model);if(!s){jQuery.sap.log.debug("Metadata context cannot be resolved yet");return;}else{p.metadata.path=s+"/"+p.metadata.path;delete p.relative;}}var f=C.getProviderFunction(c);if(f){C.AdapterFactory.requestAdapter(p.model,p.metadata).then(function(A){var r=A.ready();if(r){r.then(function(){A.switchMetaContext(p.metadata.path);f(c,A);});}});}};P._sanityChecks=function(m){if(!m){jQuery.sap.log.warning("No metadata context available");return false;}if(typeof m=="string"){m=M.bindingParser(m);}if(!m.hasOwnProperty("path")||typeof m.path!=="string"){jQuery.sap.log.warning("Metadata context is missing a path or path is not a string");return false;}if(!m.hasOwnProperty("relative")){m.relative=!m.hasOwnProperty("context");}else if(typeof m.relative!=="boolean"){jQuery.sap.log.warning("Metadata relative information must be a boolean");return false;}if(m.hasOwnProperty("context")&&typeof m.context!=="string"){jQuery.sap.log.warning("Metadata context needs no context or a context path of type string");return false;}if(!m.hasOwnProperty("model")){m.model=undefined;jQuery.sap.log.debug("Metadata context is missing a model, assuming undefined model");}if(!m.hasOwnProperty("name")){m.name=m.model;jQuery.sap.log.debug("Metadata context is missing a contexts name, assuming the name of the model");}return true;};return P;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.library')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.library');jQuery.sap.require('sap.ui.core.XMLComposite');jQuery.sap.require('sap.ui.core.util.XMLPreprocessor');sap.ui.define("sap/ui/mdc/library",['sap/ui/mdc/model/GenericType','sap/ui/mdc/experimental/provider/ProviderHook','sap/ui/core/XMLComposite','sap/ui/core/util/XMLPreprocessor'],function(G,P,X,a){"use strict";sap.ui.getCore().initLibrary({version:"1.52.7",name:"sap.ui.mdc",dependencies:["sap.ui.core","sap.m"],types:["sap.ui.mdc.FieldDisplay","sap.ui.mdc.EditMode"],interfaces:[],controls:["sap.ui.mdc.Table","sap.ui.mdc.FilterBar","sap.ui.mdc.experimental.Field","sap.ui.mdc.base.FilterField","sap.ui.mdc.base.FilterToken"],elements:["sap.ui.mdc.experimental.FieldHelpBase","sap.ui.mdc.experimental.CustomFieldHelp","sap.ui.mdc.experimental.ListFieldHelp","sap.ui.mdc.experimental.TableFieldHelp"],extensions:{flChangeHandlers:{"sap.ui.mdc.Table":"sap/ui/mdc/internal/table/Table"}},noLibraryCSS:false});sap.ui.mdc.FieldDisplay={Value:"Value",Description:"Description",ValueDescription:"ValueDescription",DescriptionValue:"DescriptionValue"};sap.ui.mdc.EditMode={Display:"Display",Editable:"Editable",ReadOnly:"ReadOnly",Disabled:"Disabled"};P.apply();function v(n,V){var b=n.getAttribute('metadataContexts');if(b){n.removeAttribute('metadataContexts');}V.visitAttributes(n);if(b){if(b.indexOf('sap.fe.deviceModel')<0){b+=",{model: 'sap.fe.deviceModel', path: '/', name: 'sap.fe.deviceModel'}";}n.setAttribute('metadataContexts',b);}}function r(n,V){v(n,V);X.initialTemplating(n,V,this);n.removeAttribute('metadataContexts');}a.plugIn(r.bind("sap.ui.mdc.Table"),"sap.ui.mdc","Table");a.plugIn(r.bind("sap.ui.mdc.Field"),"sap.ui.mdc","Field");a.plugIn(r.bind("sap.ui.mdc.FilterField"),"sap.ui.mdc","FilterField");a.plugIn(r.bind("sap.ui.mdc.FilterBar"),"sap.ui.mdc","FilterBar");var R=new sap.ui.model.resource.ResourceModel({bundleName:"sap.ui.mdc.messageBundle",async:true});var o=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");sap.ui.mdc.getResourceModel=function(){return R;};sap.ui.mdc.getText=function(t,p){return o.getText(t,p);};return sap.ui.mdc;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.ValueHelpDialog')){jQuery.sap.declare('sap.ui.mdc.ValueHelpDialog');jQuery.sap.require('sap.ui.model.json.JSONModel');sap.ui.define("sap/ui/mdc/ValueHelpDialog",["./library",'sap/ui/mdc/base/ValueHelpDialog',"sap/ui/model/json/JSONModel"],function(L,b,J){"use strict";var V=b.extend("sap.ui.mdc.ValueHelpDialog",{metadata:{properties:{entitySet:"string",fieldPath:"string"},aggregations:{},events:{},publicMethods:[]},fragment:"sap.ui.mdc.base.ValueHelpDialog"});V.prototype.init=function(){this.attachModelContextChange(c);};var c=function(){var t=this;this.detachModelContextChange(c);this._requestValueListMetadata(this.getEntitySet(),this.getFieldPath()).then(function(v){var o=new J(v);var a=sap.ui.view({viewName:"sap.ui.mdc.internal.valuehelp.ValueHelp",type:"XML",height:"100%",async:true,preprocessors:{xml:{bindingContexts:{valueList:o.createBindingContext("/")},models:{valueList:o}}}});var C=t.getConditionModel();var d=C.clone(t.getFieldPath());a.setModel(d,"cm");a.setBindingContext(d.createBindingContext("/"),"cm");a.setModel(o,"valueList");a.setModel(v.$model);return a.loaded().then(function(a){t.setTitle(a.getModel("valueList").getProperty("/sTitle"));a.getController().sFieldPath=t.getFieldPath();var T=a.byId("valueListTable");var n=T.getColumns().length;var e=Math.max(1080,n*130);t.get_content().setContentWidth(e+"px");t.addContent(a);});});};V.prototype._requestValueListMetadata=function(e,f){var m=this.getModel().getMetaModel();return m.requestValueListInfo('/'+e+'/'+f).then(function(v){var p;if(v[""]){p=v[""].Parameters;var l=m.getObject('/'+e+'/'+f+"@sapui.name");var F=m.getObject("/"+e+"@com.sap.vocabularies.Common.v1.FilterExpressionRestrictions");var o=F&&F.filter(function(a){return a.Property.$PropertyPath===f;});v[""].sTitle=m.getObject("/"+e+"/$Type/"+f+"@com.sap.vocabularies.Common.v1.Label");if(o&&(o.length>0)&&(o[0].AllowedExpressions.$EnumMember.indexOf("SingleValue")>-1)){v[""].sSelectionMode="SingleSelectLeft";v[""].sTitle=L.getText("valuehelp.SINGLE_ITEM_SELECT")+v[""].sTitle;}else{v[""].sSelectionMode="MultiSelect";}for(var i=0;i<p.length;i++){if(p[i].LocalDataProperty&&p[i].LocalDataProperty.$PropertyPath===l){v[""].__sapfe={keyPath:p[i].ValueListProperty,descriptionPath:v[""].$model.getMetaModel().getObject("/"+v[""].CollectionPath+"/"+p[i].ValueListProperty+"@com.sap.vocabularies.Common.v1.Text/$Path")};break;}}return v[""];}else{throw("no unqualified value list found - currently qualified value lists are not considered");}},function(E){throw(E.message);});};return V;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.XMLComposite')){jQuery.sap.declare('sap.ui.mdc.XMLComposite');jQuery.sap.require('sap.ui.core.XMLComposite');sap.ui.define("sap/ui/mdc/XMLComposite",['sap/ui/core/XMLComposite','./library'],function(X,L){"use strict";var M=X.extend("sap.ui.mdc.XMLComposite",{defaultMetaModel:'sap.ui.mdc.metaModel',alias:"this","abstract":true});M.prototype.init=function(){this.setModel(L.getResourceModel(),"$i18n");};return M;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.base.FilterField')){jQuery.sap.declare('sap.ui.mdc.base.FilterField');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Control');jQuery.sap.require('sap.ui.model.json.JSONModel');jQuery.sap.require('sap.m.MultiInput');jQuery.sap.require('sap.m.Token');jQuery.sap.require('sap.ui.model.Filter');jQuery.sap.require('sap.ui.model.Sorter');jQuery.sap.require('sap.ui.model.base.ManagedObjectModel');sap.ui.define("sap/ui/mdc/base/FilterField",['jquery.sap.global','sap/ui/core/Control','sap/ui/model/json/JSONModel','./FilterFieldRenderer','sap/m/MultiInput','sap/m/Token','sap/ui/model/Filter','sap/ui/model/Sorter',"sap/ui/model/base/ManagedObjectModel","sap/ui/mdc/base/type/DateRange",'sap/ui/mdc/library'],function(q,C,J,F,M,T,a,S,b,D,l){"use strict";var E=l.EditMode;var c=C.extend("sap.ui.mdc.base.FilterField",{constructor:function(i,s){this._oManagedObjectModel=null;this._oActiveDelegate=null;C.apply(this,arguments);},metadata:{properties:{showValueHelp:{type:"boolean",group:"Data",defaultValue:true},dataType:{type:"any",group:"Data",defaultValue:"sap.ui.model.type.String"},dataTypeConstraints:{type:"object",group:"Data",defaultValue:null},dataTypeFormatOptions:{type:"object",group:"Data",defaultValue:null},fieldPath:{type:"string",group:"Data",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"15rem"},editable:{type:"boolean",group:"Data",defaultValue:true},editMode:{type:"sap.ui.mdc.EditMode",group:"Data",defaultValue:E.Editable},maxConditions:{type:"int",group:"Behavior",defaultValue:-1},placeholder:{type:"string",group:"Behavior",defaultValue:""},required:{type:"boolean",group:"Misc",defaultValue:false},valueState:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:sap.ui.core.ValueState.None},valueStateText:{type:"string",group:"Misc",defaultValue:null}},events:{valueHelpRequest:{},change:{parameters:{value:{type:"object"},type:{type:"string"},valid:{type:"boolean"}}},liveChange:{parameters:{value:{type:"string"},escPressed:{type:"boolean"}}}},aggregations:{_input:{type:"sap.ui.core.Control",multiple:false,hidden:true},conditions:{type:"sap.ui.mdc.Condition",multiple:true,_doesNotRequireFactory:true},content:{type:"sap.ui.core.Control",multiple:false}},publicMethods:[],defaultAggregation:"content"}});c.prototype.getFilterOperatorConfig=function(){if(!this._oFilterOpConfig&&this.getBinding("conditions")){var o=this.getBinding("conditions").getModel();this._oFilterOpConfig=o.getFilterOperatorConfig();}return this._oFilterOpConfig;};c.prototype.updateConditions=function(){var B=this.getBinding("conditions");if(B&&this._oManagedObjectModel){this._oManagedObjectModel.checkUpdate(true,true);B.getModel().addFilterField(this);}return this;};c.prototype.setWidth=function(w){var o=this.getWidth();this.setProperty("width",w,true);if(o!=this.getWidth()){var i=this.getAggregation("_input");if(i){i.setWidth(w);}}return this;};c.prototype.setEditable=function(e){var o=this.getEditable();this.setProperty("editable",e,true);if(o!=this.getEditable()){var i=this.getAggregation("_input");if(i){i.setEditable(e);}}return this;};c.prototype.setPlaceholder=function(p){var o=this.getPlaceholder();this.setProperty("placeholder",p,true);if(o!=this.getPlaceholder()){var i=this.getAggregation("_input");if(i){i.setPlaceholder(p);}}return this;};c.prototype.setMaxConditions=function(m){this.setProperty("maxConditions",m,true);return this;};c.prototype.setRequired=function(r){var o=this.getRequired();this.setProperty("required",r,true);if(o!=this.getRequired()){var i=this.getAggregation("_input");if(i){i.setRequired(r);}}return this;};c.prototype.bindAggregation=function(n,B){if(n==="conditions"){var s=this.getFieldPath();if(s&&!B.filters){B.filters=new sap.ui.model.Filter({path:"fieldPath",test:this._matchFieldPath.bind(this)});}if(!B.sorter){B.sorter=new sap.ui.model.Sorter("position",false);}}return C.prototype.bindAggregation.apply(this,[n,B]);};c.prototype._matchFieldPath=function(v){var s=this.getFieldPath().toUpperCase();return s===v;};c.prototype.setFieldPath=function(v){var o=this.getFieldPath();this.setProperty("fieldPath",v);if(o!==this.getFieldPath()&&this.mBindingInfos["conditions"]){var e=new a({path:"fieldPath",test:this._matchFieldPath.bind(this)});var B=this.getBinding("conditions");if(B){B.filter(e);}else{this.mBindingInfos["conditions"].filters=e;}}return this;};c.prototype._handleTokenChange=function(e){var s=e.getId(),v,B,g,O,n,h;if(s==="tokenUpdate"){if(e.getParameter("type")==="added"){s="change";v=e.getParameter("addedTokens")[0].getText().trim();}if(e.getParameter("type")==="removed"){var r=e.getParameter("removedTokens"),j=[];r.forEach(function(o){j.push(o.getBindingContext("$filterField"));});B=this.getBinding("conditions");B.getModel().deleteConditions(j,B);}}if(s==="change"){q.sap.log.info("mdc:FilterField","_handleTokenChange for "+s);var k=e.getSource(),t=this._getDataType(),m=t.getMetadata().getName();if(k._getIsSuggestionPopupOpen&&k._getIsSuggestionPopupOpen()){var p=k.getSuggestionRows();var i=0;p.forEach(function(I){if(I.getVisible()){i++;}});if(i===1){return;}}B=this.getBinding("conditions");if(k instanceof sap.m.Select){v=e.getParameter("selectedItem").getText();}else{v=v||e.getParameter("value");v=v.trim();}q.sap.log.info("mdc:FilterField","_handleTokenChange sValue "+v);if(!v){if(k instanceof sap.m.MultiInput){}else if(this.getMaxConditions()>=0&&B.getModel().getConditions(this.getFieldPath()).length>0){B.getModel().removeCondition(this.getFieldPath(),0);}B.getModel().removeUIMessage(this.getFieldPath());return;}if(k instanceof sap.m.DateRangeSelection){h=this.getFilterOperatorConfig().getOperator("BT");v=v.replace(" - ","...");g=h.getCondition(v,t);if(g){g.fieldPath=this.getFieldPath();B.getModel().addCondition(g);this.fireChange({value:g,type:"added",valid:true});if(this.getMaxConditions()>=0&&B.getModel().getConditions(this.getFieldPath()).length>1){B.getModel().removeCondition(this.getFieldPath(),0);}return;}}O=this.getFilterOperatorConfig().getMatchingOperators(m,v);if(O.length===0){var u=this.getFilterOperatorConfig().getDefaultOperator(m);n=this.getFilterOperatorConfig().getOperator(u);v=n.format([v]);}else{n=O[0];}try{if(n&&n.test(v,t)){h=n;B.getModel().removeUIMessage(this.getFieldPath());}}catch(w){B.getModel().setUIMessage(this.getFieldPath(),w.message);}if(h){g=h.getCondition(v,t);if(g){g.fieldPath=this.getFieldPath();B.getModel().addCondition(g);this.fireChange({value:g,type:"added",valid:true});if(k instanceof sap.m.MultiInput){k.setValue("");}if(k instanceof sap.m.Select||k instanceof sap.m.DatePicker||k instanceof sap.m.TimePicker){if(this.getMaxConditions()>=0&&B.getModel().getConditions(this.getFieldPath()).length>1){B.getModel().removeCondition(this.getFieldPath(),0);}}}}}};c.prototype.getConditions=function(){if(this.getBinding("conditions")){var e=this.getBinding("conditions").getContexts(),g=[];for(var i=0;i<e.length;i++){g.push(e[i].getProperty());}return g;}return[];};var f=function(o){var r="";if(o){var O=this.getFilterOperatorConfig().getOperator(o.operator);var v=o.values;r=O.format(v,o,this._getDataType());}return r;};c.prototype._getDefaultInput=function(){var o;if(!this.getAggregation("_input")){if(this.getProperty("dataType").indexOf("Boolean")>-1&&this.getMaxConditions()===1){o=new sap.m.Select(this.getId()+"-inner",{width:this.getWidth(),selectedKey:"{$filterField>conditions/0/values/0}",valueState:{path:"$filterField>/valueState",mode:"OneWay"},valueStateText:{path:"$filterField>/valueStateText",mode:"OneWay"},items:[new sap.ui.core.Item({key:"",text:""}),new sap.ui.core.Item({key:false,text:this._getDataType().formatValue(false,"string")}),new sap.ui.core.Item({key:true,text:this._getDataType().formatValue(true,"string")})]});}else if(this.getProperty("dataType").indexOf(".Time")>-1&&this.getMaxConditions()===1){o=new sap.m.TimePicker(this.getId()+"-inner",{editable:{path:"$filterField>editMode",formatter:_},enabled:{path:"$filterField>editMode",formatter:d},width:"{$filterField>width}",required:"{$filterField>required}",value:{path:"$filterField>conditions/0/values/0",type:this._getDataType(),mode:"OneWay"},valueState:{path:"$filterField>/valueState",mode:"OneWay"},valueStateText:{path:"$filterField>/valueStateText",mode:"OneWay"}});}else if(this.getProperty("dataType").indexOf("Date")>-1&&this.getMaxConditions()===1){o=new sap.m.DatePicker(this.getId()+"-inner",{editable:{path:"$filterField>editMode",formatter:_},enabled:{path:"$filterField>editMode",formatter:d},width:"{$filterField>width}",required:"{$filterField>required}",value:{path:"$filterField>conditions/0/values/0",type:this._getDataType(),mode:"OneWay"},valueState:{path:"$filterField>/valueState",mode:"OneWay"},valueStateText:{path:"$filterField>/valueStateText",mode:"OneWay"}});}else if(this.getProperty("dataType").indexOf("Date")>-1&&this.getMaxConditions()===2){o=new sap.m.DateRangeSelection(this.getId()+"-inner",{editable:{path:"$filterField>editMode",formatter:_},enabled:{path:"$filterField>editMode",formatter:d},width:"{$filterField>width}",required:"{$filterField>required}",value:{parts:[{path:"$filterField>conditions/0/values/0",type:this._getDataType()},{path:"$filterField>conditions/0/values/1",type:this._getDataType()}],mode:"OneWay",type:"sap.ui.mdc.base.type.DateRange"},valueState:{path:"$filterField>/valueState",mode:"OneWay"},valueStateText:{path:"$filterField>/valueStateText",mode:"OneWay"}});}else{var t={};t.path="conditions";t.model="$filterField";t.template=new T({text:{path:'$filterField>',formatter:f.bind(this)},tooltip:{path:'$filterField>',formatter:f.bind(this)}});t.templateShareable=false;o=new M(this.getId()+"-inner",{tokens:t,editable:{path:"$filterField>editMode",formatter:_},enabled:{path:"$filterField>editMode",formatter:d},width:"{$filterField>width}",required:"{$filterField>required}",placeholder:"{$filterField>placeholder}",enableMultiLineMode:true,showSuggestion:false,valueState:{path:"$filterField>/valueState",mode:"OneWay"},valueStateText:{path:"$filterField>/valueStateText",mode:"OneWay"},showValueHelp:"{$filterField>showValueHelp}"});o.attachTokenUpdate(this._handleTokenChange,this);o.attachTokenChange(this._handleTokenChange,this);o.attachValueHelpRequest(this.fireValueHelpRequest,this);o.attachLiveChange(this._handleContentLiveChange,this);o.updateTokens=null;}o.attachChange(this._handleTokenChange,this);this.setAggregation("_input",o);this._input=o;this._activateManagedObjectModel();}return this.getAggregation("_input");};function _(e){if(e&&e==E.Editable){return true;}else{return false;}}function d(e){if(e&&e!=E.Disabled){return true;}else{return false;}}c.prototype._handleContentLiveChange=function(e){var v;var g=false;if("value"in e.getParameters()){v=e.getParameter("value");}if("escPressed"in e.getParameters()){g=e.getParameter("escPressed");}this.fireLiveChange({value:v,escPressed:g});};c.prototype.getContent=function(){if(!this.getAggregation("content")){return this._getDefaultInput();}return this.getAggregation("content");};c.prototype.clone=function(){if(this._input){this._input.detachChange(this._handleTokenChange,this);this._input.detachTokenUpdate(this._handleTokenChange,this);this._input.detachTokenChange(this._handleTokenChange,this);this._input.detachValueHelpRequest(this.fireValueHelpRequest,this);var t=this._input.getBindingInfo("tokens").template;if(t){}var o=C.prototype.clone.apply(this,arguments);if(t){}this._input.attachChange(this._handleTokenChange,this);this._input.attachTokenUpdate(this._handleTokenChange,this);this._input.attachTokenChange(this._handleTokenChange,this);this._input.attachValueHelpRequest(this.fireValueHelpRequest,this);var e=o.getAggregation("_input");e.attachChange(o._handleTokenChange,o);e.attachTokenUpdate(o._handleTokenChange,o);e.attachTokenChange(o._handleTokenChange,o);e.attachValueHelpRequest(o.fireValueHelpRequest,o);var g=e.getBindingInfo("tokens").template;if(g){}}return o;};c.prototype.setContent=function(o){this._deactivateManagedObjectModel();this.setAggregation("content",o);this._activateManagedObjectModel();return this;};c.prototype.destroyContent=function(){this._deactivateManagedObjectModel();this.destroyAggregation("content");this._activateManagedObjectModel();return this;};c.prototype._updateConditionModel=function(e){var B=this.getBinding("conditions");if(B&&e.getParameter("resolvedPath").indexOf("/conditions")===0){B.getModel().checkUpdate(true,true);}};c.prototype._activateManagedObjectModel=function(){var o=this.getContent();if(o){if(!this._oManagedObjectModel){this._oManagedObjectModel=new b(this);this._oManagedObjectModel.setSizeLimit(1000);this._oManagedObjectModel.attachEvent("propertyChange",this._updateConditionModel.bind(this));}o.setModel(this._oManagedObjectModel,"$filterField");o.bindElement({path:"/",model:"$filterField"});}};c.prototype._deactivateManagedObjectModel=function(){var o=this.getContent();if(o){o.unbindElement("$filterField");this._oManagedObjectModel.destroy();this._oManagedObjectModel=null;}};c.prototype.setParent=function(){C.prototype.setParent.apply(this,arguments);if(!this.getParent()){this._deactivateManagedObjectModel();}else{this._activateManagedObjectModel();}};c.prototype.setDataType=function(v){delete this._oDataType;this.setProperty("dataType",v,true);};c.mapEdmTypes={"Edm.Boolean":"sap.ui.model.odata.type.Boolean","Edm.Byte":"sap.ui.model.odata.type.Byte","Edm.Date":"sap.ui.model.odata.type.Date","Edm.DateTime":"sap.ui.model.odata.type.DateTime","Edm.DateTimeOffset":"sap.ui.model.odata.type.DateTimeOffset","Edm.Decimal":"sap.ui.model.odata.type.Decimal","Edm.Double":"sap.ui.model.odata.type.Double","Edm.Float":"sap.ui.model.odata.type.Single","Edm.Guid":"sap.ui.model.odata.type.Guid","Edm.Int16":"sap.ui.model.odata.type.Int16","Edm.Int32":"sap.ui.model.odata.type.Int32","Edm.Int64":"sap.ui.model.odata.type.Int64","Edm.SByte":"sap.ui.model.odata.type.SByte","Edm.Single":"sap.ui.model.odata.type.Single","Edm.String":"sap.ui.model.odata.type.String","Edm.Time":"sap.ui.model.odata.type.Time","Edm.TimeOfDay":"sap.ui.model.odata.type.TimeOfDay"};c.prototype._createDataType=function(t){var O=q.sap.getObject(t);if(!O){var o=this.getFilterOperatorConfig(),n;if(o){n=o.getParentType(t);}else{n=c.mapEdmTypes[t];}if(!n){q.sap.log.error("FilterField","dataType for "+t+" can not be created!");return null;}return this._createDataType(n);}return new O(this.getDataTypeFormatOptions(),this.getDataTypeConstraints());};c.prototype._getDataType=function(t){if(!this._oDataType){this._oDataType=this.getProperty("dataType");if(typeof this._oDataType==="string"){this._oDataType=this._createDataType(this._oDataType);}}return this._oDataType;};return c;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.Field')){jQuery.sap.declare('sap.ui.mdc.experimental.Field');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Control');jQuery.sap.require('sap.ui.model.base.ManagedObjectModel');jQuery.sap.require('sap.ui.base.ManagedObjectObserver');jQuery.sap.require('sap.ui.model.BindingMode');jQuery.sap.require('sap.m.Input');jQuery.sap.require('sap.m.Text');jQuery.sap.require('sap.m.Link');jQuery.sap.require('sap.m.TextArea');sap.ui.define("sap/ui/mdc/experimental/Field",['jquery.sap.global','sap/ui/core/Control','sap/ui/model/base/ManagedObjectModel','sap/ui/base/ManagedObjectObserver','sap/ui/model/BindingMode','sap/m/Input','sap/m/Text','sap/m/Link','sap/m/TextArea','sap/ui/mdc/library'],function(q,C,M,a,B,I,T,L,b,l){"use strict";var D;var c;var d;var E=l.EditMode;var F=l.FieldDisplay;var e=C.extend("sap.ui.mdc.experimental.Field",{metadata:{interfaces:["sap.ui.core.IFormContent"],library:"sap.ui.mdc",properties:{value:{type:"any",defaultValue:null},additionalValue:{type:"any",defaultValue:null},dataType:{type:"string",group:"Data",defaultValue:'sap.ui.model.type.String'},dataTypeConstraints:{type:"object",group:"Data",defaultValue:null},dataTypeFormatOptions:{type:"object",group:"Data",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:""},editMode:{type:"sap.ui.mdc.EditMode",group:"Data",defaultValue:E.Editable},required:{type:"boolean",group:"Data",defaultValue:false},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},display:{type:"sap.ui.mdc.FieldDisplay",defaultValue:F.Value},textAlign:{type:"sap.ui.core.TextAlign",group:"Appearance",defaultValue:sap.ui.core.TextAlign.Initial},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:sap.ui.core.TextDirection.Inherit},placeholder:{type:"string",group:"Misc",defaultValue:null},valueState:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:sap.ui.core.ValueState.None},valueStateText:{type:"string",group:"Misc",defaultValue:null},multipleLines:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{content:{type:"sap.ui.core.Control",multiple:false},_content:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},fieldHelp:{type:"sap.ui.mdc.experimental.FieldHelpBase",multiple:false},displayFieldHelp:{type:"sap.ui.mdc.experimental.FieldHelpBase",multiple:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{change:{parameters:{value:{type:"string"},valid:{type:"boolean"}}},liveChange:{parameters:{value:{type:"string"},escPressed:{type:"boolean"},previousValue:{type:"string"}}},dataChanged:{},press:{}},publicMethods:[],defaultAggregation:"content",defaultProperty:"value"},_oManagedObjectModel:null});e.prototype.init=function(){this._oManagedObjectModel=new M(this);this._oObserver=new a(i.bind(this));this._oObserver.observe(this,{properties:["value","additionalValue","display","editMode","dataType","multipleLines"],aggregations:["fieldHelp","displayFieldHelp","content"]});};e.prototype.exit=function(){this._oManagedObjectModel.destroy();delete this._oManagedObjectModel;this._oObserver.disconnect();this._oObserver=undefined;};e.prototype.onBeforeRendering=function(){f.call(this);};e.prototype.onAfterRendering=function(){if(this.getFieldHelp()&&this.getEditMode()!=E.Display){var H=this.getAggregation("_content");if(H){var J=H.getFocusDomRef();q(J).attr("autocomplete","off");}}};function _(K){if(!this.isBound("additionalValue")){var H=this.getFieldHelp();if(H&&this.getDisplay()==sap.ui.mdc.FieldDisplay.Description){var J;if(K){J=H.getTextForKey(K);H.setSelectedKey(K);}this.setAdditionalValue(J);}}}e.formatText=n;function f(){if(!this._getContent()){var H=this.getEditMode();var J=this.getDataType();var K;var N=this.getId()+"-inner";switch(H){case E.Display:var O=this.getDisplayFieldHelp();if(O){if(O.showLink()){J="Link";}else if(J=="Link"){J="";}}switch(J){case"Edm.Date":case"Edm.DateTimeOffset":case"Edm.TimeOfDay":K=new T(N,{text:{path:"$field>value",type:this._getDataType()},textAlign:"{$field>textAlign}",textDirection:"{$field>textDirection}",wrapping:false});break;case"Link":K=new L(N,{text:{path:"$field>value"},href:{path:"$field>additionalValue"},textAlign:"{$field>textAlign}",textDirection:"{$field>textDirection}",press:x.bind(this)});break;default:K=new T(N,{text:"{$field>/@custom/formattedValue}",textAlign:"{$field>textAlign}",textDirection:"{$field>textDirection}",wrapping:this.getMultipleLines()});break;}break;default:switch(J){case"Edm.Date":K=r.call(this,N);break;case"Edm.DateTimeOffset":K=s.call(this,N);break;case"Edm.TimeOfDay":K=t.call(this,N);break;default:var P="$field>value";if(this.getDisplay()==sap.ui.mdc.FieldDisplay.Description){P="$field>additionalValue";}if(this.getMultipleLines()&!this.getFieldHelp()){K=new b(N,{value:{path:P},placeholder:"{$field>placeholder}",textAlign:"{$field>textAlign}",textDirection:"{$field>textDirection}",required:"{$field>required}",editable:{path:"$field>editMode",formatter:g},enabled:{path:"$field>editMode",formatter:h},valueState:"{$field>valueState}",valueStateText:"{$field>valueStateText}",width:"100%",change:v.bind(this),liveChange:w.bind(this)});}else{K=new I(N,{value:{path:P},placeholder:"{$field>placeholder}",textAlign:"{$field>textAlign}",textDirection:"{$field>textDirection}",required:"{$field>required}",editable:{path:"$field>editMode",formatter:g},enabled:{path:"$field>editMode",formatter:h},valueState:"{$field>valueState}",valueStateText:"{$field>valueStateText}",showValueHelp:!!this.getFieldHelp(),change:v.bind(this),liveChange:w.bind(this),valueHelpRequest:y.bind(this)});}break;}break;}if(K){this.setAggregation("_content",K,true);u.call(this,K);}}}e.prototype._getContent=function(){return this.getContent()||this.getAggregation("_content");};function g(H){if(H&&H==E.Editable){return true;}else{return false;}}function h(H){if(H&&H!=E.Disabled){return true;}else{return false;}}function i(H){if(H.name=="value"||H.name=="additionalValue"||H.name=="display"){var J=n(this.getValue(),this.getAdditionalValue(),this.getDisplay());this._oManagedObjectModel.setProperty("/@custom/formattedValue",J);}if(H.name=="value"||H.name=="display"){_.call(this,this.getValue());}if(H.name=="editMode"){if(H.old!=H.current){if(this.getAggregation("_content")){this.destroyAggregation("_content");f.call(this);}}}if(H.name=="multipleLines"){if(H.old!=H.current){if(this.getAggregation("_content")){this.destroyAggregation("_content");f.call(this);}}}if(H.name=="dataType"){if(H.old!=H.current){delete this._oDataType;if(this.getAggregation("_content")){this.destroyAggregation("_content");f.call(this);}}}if(H.name=="fieldHelp"&&H.child){j.call(this,H.child,H.mutation);}if(H.name=="displayFieldHelp"&&H.child){k.call(this,H.child,H.mutation);}if(H.name=="content"&&H.child){m.call(this,H.child,H.mutation);}}function j(H,J){var K=false;if(J=="remove"){H.detachEvent("select",z,this);H.detachEvent("navigate",A,this);H.detachEvent("dataUpdate",G,this);}else if(J=="insert"){H.attachEvent("select",z,this);H.attachEvent("navigate",A,this);H.attachEvent("dataUpdate",G,this);_.call(this,this.getValue());K=true;}var N=this.getAggregation("_content");if(N&&N.setShowValueHelp){N.setShowValueHelp(K);}}function k(H,J){if(J=="remove"){H.detachEvent("dataUpdate",G,this);}else if(J=="insert"){H.attachEvent("dataUpdate",G,this);}}function m(H,J){if(J=="remove"){H.unbindElement("$field");if(H.getMetadata().getEvents().change){H.detachEvent("change",v,this);}if(H.getMetadata().getEvents().liveChange){H.detachEvent("liveChange",w,this);}if(H.getMetadata().getEvents().press){H.detachEvent("press",x,this);}}else if(J=="insert"){u.call(this,H);if(H.getMetadata().getEvents().change){H.attachEvent("change",v,this);}if(H.getMetadata().getEvents().liveChange){H.attachEvent("liveChange",w,this);}if(H.getMetadata().getEvents().press){H.attachEvent("press",x,this);}if(this.getAggregation("_content")){this.destroyAggregation("_content");}}}function n(V,H,J){var K=V?V:"";var N=H?H:"";var O="";switch(J){case F.Description:O=N;break;case F.ValueDescription:O=K+" ("+N+")";break;case F.DescriptionValue:O=N+" ("+K+")";break;default:O=K;}if(O.replace){O=O.replace(" ()","");}return O;}function o(D,H){var J=new D(H,{value:{path:"$field>value",type:this._getDataType()},placeholder:"{$field>placeholder}",textAlign:"{$field>textAlign}",textDirection:"{$field>textDirection}",required:"{$field>required}",editable:{path:"$field>editMode",formatter:g},enabled:{path:"$field>editMode",formatter:h},valueState:"{$field>valueState}",valueStateText:"{$field>valueStateText}",width:"100%",change:v.bind(this)});return J;}function p(P){if(this._bIsBeingDestroyed){return;}var H=this.getAggregation("_content");if(H&&H instanceof P){return;}var J=this.getId()+"-inner";var K=o.call(this,P,J);this.setAggregation("_content",K);u.call(this,K);}function r(H){if(!D){D=sap.ui.require("sap/m/DatePicker");if(!D){sap.ui.require(["sap/m/DatePicker"],p.bind(this));return null;}}return o.call(this,D,H);}function s(H){if(!c){c=sap.ui.require("sap/m/DateTimePicker");if(!c){sap.ui.require(["sap/m/DateTimePicker"],p.bind(this));return null;}}return o.call(this,c,H);}function t(H){if(!d){d=sap.ui.require("sap/m/TimePicker");if(!d){sap.ui.require(["sap/m/TimePicker"],p.bind(this));return null;}}return o.call(this,d,H);}function u(H){H.setModel(this._oManagedObjectModel,"$field");H.bindElement({path:"/",model:"$field"});}function v(H){var V;var J=true;if("value"in H.getParameters()){V=H.getParameter("value");}else{V=this.getValue();}if("valid"in H.getParameters()){J=H.getParameter("valid");}var K=this.getFieldHelp();if(K){K.close();if(this.getDisplay()==sap.ui.mdc.FieldDisplay.Description){V=K.getKeyForText(V);K.setSelectedKey(V);this.setProperty("value",V,true);}}this.fireChange({value:V,valid:J});}function w(H){var V;var P;var J=false;if("value"in H.getParameters()){V=H.getParameter("value");}if("escPressed"in H.getParameters()){J=H.getParameter("escPressed");}if("previousValue"in H.getParameters()){P=H.getParameter("previousValue");}else{P=this.getValue();}var K=this.getFieldHelp();if(K){K.setFilterValue(V);if(this.getDisplay()==sap.ui.mdc.FieldDisplay.Description){K.setSelectedKey("");}if(K.openByTyping()){K.open();}}this.fireLiveChange({value:V,escPressed:J,previousValue:P});}function x(H){var J=this.getDisplayFieldHelp();if(J){J.open();}this.firePress();}e.prototype.getFocusDomRef=function(){var H=this._getContent();if(H){return H.getFocusDomRef();}else{return this.getDomRef();}};e.prototype.getIdForLabel=function(){var H;var J=this._getContent();if(J){H=J.getIdForLabel();}else{H=this.getId();}return H;};e.mapEdmTypes={"Edm.Boolean":"sap.ui.model.odata.type.Boolean","Edm.Byte":"sap.ui.model.odata.type.Byte","Edm.Date":"sap.ui.model.odata.type.Date","Edm.DateTime":"sap.ui.model.odata.type.DateTime","Edm.DateTimeOffset":"sap.ui.model.odata.type.DateTimeOffset","Edm.Decimal":"sap.ui.model.odata.type.Decimal","Edm.Double":"sap.ui.model.odata.type.Double","Edm.Float":"sap.ui.model.odata.type.Single","Edm.Guid":"sap.ui.model.odata.type.Guid","Edm.Int16":"sap.ui.model.odata.type.Int16","Edm.Int32":"sap.ui.model.odata.type.Int32","Edm.Int64":"sap.ui.model.odata.type.Int64","Edm.SByte":"sap.ui.model.odata.type.SByte","Edm.Single":"sap.ui.model.odata.type.Single","Edm.String":"sap.ui.model.odata.type.String","Edm.Time":"sap.ui.model.odata.type.Time","Edm.TimeOfDay":"sap.ui.model.odata.type.TimeOfDay"};e.prototype._createDataType=function(H){var O=q.sap.getObject(H);if(!O){var N=e.mapEdmTypes[H];if(!N){q.sap.log.error("Field","dataType for "+H+" can not be created!");return null;}return this._createDataType(N);}return new O(this.getDataTypeFormatOptions(),this.getDataTypeConstraints());};e.prototype._getDataType=function(H){if(!this._oDataType){this._oDataType=this.getProperty("dataType");if(typeof this._oDataType==="string"){this._oDataType=this._createDataType(this._oDataType);}}return this._oDataType;};e.prototype.enhanceAccessibilityState=function(H,J){var P=this.getParent();if(P&&P.enhanceAccessibilityState){P.enhanceAccessibilityState(this,J);}return J;};e.prototype.onsapup=function(H){var J=this.getFieldHelp();if(J){H.preventDefault();H.stopPropagation();J.navigate(-1);}};e.prototype.onsapdown=function(H){var J=this.getFieldHelp();if(J){H.preventDefault();H.stopPropagation();J.navigate(1);}};function y(H){var J=this.getFieldHelp();if(J){J.setFilterValue("");J.toggleOpen();if(this.getDisplay()==sap.ui.mdc.FieldDisplay.Description){J.setSelectedKey(this.getValue());}}}function z(H){var V=H.getParameter("value");var J=H.getParameter("additionalValue");var K=H.getParameter("key");var N;var O;if(this.getDisplay()==sap.ui.mdc.FieldDisplay.Description){N=K;O=V;}else{N=V;O=J;}this.setProperty("value",N);this.setAdditionalValue(O);this.fireChange({value:N,valid:true});}function A(H){var V=H.getParameter("value");var K=H.getParameter("key");var N;if(this.getDisplay()==sap.ui.mdc.FieldDisplay.Description){N=K;}else{N=V;}var J=this.getAggregation("_content");if(J&&J.setDOMValue){J.setDOMValue(V);J._doSelect();}this.fireLiveChange({value:N});}function G(H){if(this.getEditMode()==E.Display){if(this.getAggregation("_content")){this.destroyAggregation("_content");}}else{_.call(this,this.getValue());}}return e;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.internal.table.Table.controller')){jQuery.sap.declare('sap.ui.mdc.internal.table.Table.controller');jQuery.sap.require('sap.ui.base.Object');jQuery.sap.require('sap.ui.model.json.JSONModel');jQuery.sap.require('sap.ui.model.Sorter');sap.ui.define("sap/ui/mdc/internal/table/Table.controller",["../../library","sap/ui/base/Object","sap/ui/mdc/experimental/Action","sap/ui/model/json/JSONModel","sap/ui/model/Sorter"],function(L,B,A,J,S){"use strict";var T=B.extend("sap.ui.mdc.internal.table.Table.controller",{constructor:function(t){B.apply(this,arguments);this.oTable=t;this.oInnerTable=t.getInnerTable();}});T.prototype.handleDataRequested=function(e){this.oInnerTable.setBusy(true);};T.prototype.handleCallAction=function(e){var a=e.getParameters();var o=e.getSource();a.mode=o.getMode();if(a.mode==='Inline'){a.contexts=[o.getBindingContext()];}else{a.contexts=this.oTable.getSelectedContexts();}a.setBusy=true;a.checkBusy=true;this.oTable.fireCallAction(a);};T.prototype.getToolbarActions=function(t){var a=[];for(var i=0;i<t.length;i++){if(t[i]instanceof A){a.push(t[i]);}}return a;};T.prototype.enableDisableActionsUtil=function(s,t){var f,a,o;if(s!=null){for(var i=0;i<t.length;i++){o=t[i];f=o.getMultiplicityFrom();a=o.getMultiplicityTo();if((!f||(s>=f)&&(!a||s<=a))){o.setEnabled(true);}else{o.setEnabled(false);}}}};T.prototype.bindTableCountUtil=function(t){if(t!=null){t.setModel(this.oInnerTable.getModel(),"headerContext");}var b=this.oTable.getListBinding();if(b){t.setBindingContext(b.getHeaderContext(),"headerContext");}};T.prototype.createAndOpenViewSettingsDialog=function(v,s,c,d){if(this.oViewSettingsPropertyModel==null&&this.oViewSettingsPropertyModel==undefined){var a=L.getText("table.VIEWSETTINGS_COLUMN_SELECTALL",[s,c]);v["selectAllText"]=a;v["sortDesecending"]=false;v["groupDescending"]=false;this.oViewSettingsPropertyModel=new J(v);}var V=new sap.ui.view("viewSettingsXMLView",{viewName:"sap.ui.mdc.internal.table.viewsettings.ViewSettings",type:"XML",async:true,preprocessors:{xml:{bindingContexts:{propertiesModel:this.oViewSettingsPropertyModel.createBindingContext("/"),dialogProperties:d.createBindingContext("/")},models:{propertiesModel:this.oViewSettingsPropertyModel,dialogProperties:d}}}});V.setModel(this.oViewSettingsPropertyModel);this.oTable.addDependent(V);V.loaded().then(function(){var b=(d.getData().InitialVisiblePanel==="columns")?"viewSettingsXMLView--columns":d.getData().InitialVisiblePanel;var C=V.getController();C.oTableController=this;V.byId("viewSettingsDialog").open(b);}.bind(this));};T.prototype.createAndOpenP13nSettingsDialog=function(p,d){if(this.oP13nSettingsPropertyModel==null&&this.oP13nSettingsPropertyModel==undefined){p["p13nSortItems"]=[];p["p13nGroupItems"]=[];this.oP13nSettingsPropertyModel=new J(p);}var P=new sap.ui.view("p13nSettingsXMLView",{viewName:"sap.ui.mdc.internal.table.p13nsettings.P13nSettings",type:"XML",async:true,preprocessors:{xml:{bindingContexts:{propertiesModel:this.oP13nSettingsPropertyModel.createBindingContext("/"),dialogProperties:d.createBindingContext("/")},models:{propertiesModel:this.oP13nSettingsPropertyModel,dialogProperties:d}}}});P.setModel(this.oP13nSettingsPropertyModel);this.oTable.addDependent(P);P.loaded().then(function(){var c=P.getController();c.oTableController=this;P.byId("p13nDialog").open();}.bind(this));};T.prototype.onStandardActionClick=function(e){var a=e.getSource().getText(),i=this.oInnerTable.getModel().getMetaModel(),E=i.getObject("/"+this.oTable.getEntitySet()+"/"),b=false,t=this.oInnerTable.getColumns(),c=t.length,C=[],s=0,d=[],g=[],f=[],h=this.oTable.getSettingsDialogType();for(var j=0;j<c;j++){var o=t[j];var k=o.getId().split("::");C.push(k[k.length-1]);}for(var p in E){if(typeof(E[p])=="object"&&E[p].$kind&&E[p].$kind==="Property"){var _=i.getObject("/"+this.oTable.getEntitySet()+"/"+p+"@com.sap.vocabularies.Common.v1.Label");s=(C.indexOf(p)>-1)?s+1:s;var I={"name":(_!=null&&_!=undefined)?_:p,"columnKey":p,"selected":false};d.push(JSON.parse(JSON.stringify(I)));g.push(JSON.parse(JSON.stringify(I)));var l=JSON.parse(JSON.stringify(I));l.selected=!!(C.indexOf(p)>-1);f.push(l);}}var P={"sortPanelItems":d,"groupPanelItems":g,"columnPanelItems":f.sort(function(x,y){if(x.selected===y.selected){return 0;}else if(x.selected){return-1;}else{return 1;}})};var D=new J({"InitialVisiblePanel":a,"showSortPanel":!!(b||a==="sort"),"showGroupPanel":!!((b||a==="group")&&(this.oInnerTable.getMetadata().getName()==="sap.m.Table")),"showColumnPanel":!!(b||a==="column")});if(h==="P13nDialog"){this.createAndOpenP13nSettingsDialog(P,D);}else{this.createAndOpenViewSettingsDialog(P,s,f.length,D);}};T.prototype.applyGroupAndSort=function(s){if(s.length>0){var b=this.getListBinding();b.sort(s);}};return T;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.internal.table.gridtable.GridTable.controller')){jQuery.sap.declare('sap.ui.mdc.internal.table.gridtable.GridTable.controller');sap.ui.define("sap/ui/mdc/internal/table/gridtable/GridTable.controller",["sap/ui/mdc/library","../Table.controller"],function(L,T){"use strict";var G=T.extend("sap.ui.mdc.internal.table.gridtable.GridTable.controller",{constructor:function(t){T.apply(this,arguments);this.oTable=t;}});G.prototype.setSelectionMode=function(){var t=this.getToolbarActions(this.oInnerTable.getExtension()[0].getContent());var m;var s='None';for(var i=0;i<t.length;i++){m=t[i].getMultiplicityTo();if(m>1||!m){s='MultiToggle';break;}else if(m===1){s='Single';}}this.oInnerTable.setSelectionMode(s);};G.prototype.enableDisableActions=function(){var t=this.getToolbarActions(this.oInnerTable.getExtension()[0].getContent());var s=this.oInnerTable.getSelectedIndices().length;this.enableDisableActionsUtil(s,t);};G.prototype.bindTableCount=function(){var t=this.oInnerTable.getExtension()[0].getContent()[0];this.bindTableCountUtil(t);};G.prototype.handleDataReceived=function(e){var E=e.getParameter("error");if(E){this.oInnerTable.setNoData(L.getText("table.TECHINCAL_ERROR"));this.oTable.fireShowError(e);}else{this.oInnerTable.setNoData(L.getText("table.NO_DATA_TEXT"));}if(this.oInnerTable.getVisibleRowCountMode()!="Auto"){this.oInnerTable.setVisibleRowCountMode("Auto");}this.oInnerTable.setBusy(false);};G.prototype.getListBinding=function(){return this.oInnerTable.getBinding("rows");};G.prototype.getListBindingInfo=function(){return this.oInnerTable.getBindingInfo("rows");};return G;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.internal.table.responsivetable.ResponsiveTable.controller')){jQuery.sap.declare('sap.ui.mdc.internal.table.responsivetable.ResponsiveTable.controller');sap.ui.define("sap/ui/mdc/internal/table/responsivetable/ResponsiveTable.controller",["sap/ui/mdc/library","../Table.controller"],function(L,T){"use strict";var R=T.extend("sap.ui.mdc.internal.table.responsivetable.ResponsiveTable.controller",{constructor:function(t){T.apply(this,arguments);this.oTable=t;}});R.prototype.setSelectionMode=function(){var t=this.getToolbarActions(this.oInnerTable.getHeaderToolbar().getContent());var m;var s='None';for(var i=0;i<t.length;i++){m=t[i].getMultiplicityTo();if(m>1||!m){s='MultiSelect';break;}else if(m===1){s='SingleSelectLeft';}}this.oInnerTable.setMode(s);};R.prototype.enableDisableActions=function(){var t=this.getToolbarActions(this.oInnerTable.getHeaderToolbar().getContent());var s=this.oInnerTable.getSelectedContexts().length;this.enableDisableActionsUtil(s,t);};R.prototype.bindTableCount=function(){var t=this.oInnerTable.getHeaderToolbar().getContent()[0];this.bindTableCountUtil(t);};R.prototype.handleDataReceived=function(e){var E=e.getParameter("error");if(E){this.oInnerTable.setNoDataText(L.getText("table.TECHINCAL_ERROR"));this.oTable.fireShowError(e);}else{this.oInnerTable.setNoDataText(L.getText("table.NO_DATA_TEXT"));}this.oInnerTable.setBusy(false);};R.prototype.getListBinding=function(){return this.oInnerTable.getBinding("items");};R.prototype.getListBindingInfo=function(){return this.oInnerTable.getBindingInfo("items");};return R;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.internal.table.viewsettings.ViewSettings.controller')){jQuery.sap.declare('sap.ui.mdc.internal.table.viewsettings.ViewSettings.controller');jQuery.sap.require('sap.ui.core.mvc.Controller');jQuery.sap.require('sap.ui.model.Sorter');jQuery.sap.require('sap.ui.model.json.JSONModel');sap.ui.define("sap/ui/mdc/internal/table/viewsettings/ViewSettings.controller",["sap/ui/mdc/library","sap/ui/core/mvc/Controller","sap/ui/model/Sorter","sap/ui/model/json/JSONModel"],function(L,C,S,J){"use strict";return C.extend("sap.ui.mdc.internal.table.viewsettings.ViewSettings",{onConfirm:function(e){var c=e.getParameters(),s=[],p,d,k,n;var g=function(o){p=(c.groupItem&&c.groupItem.getKey());k=o.getProperty(p);n=c.groupItem&&c.groupItem.getText();return{key:k,text:n+" : "+k};};if(c.groupItem){p=c.groupItem.getKey();d=!!(c.groupDescending);var G=new S(p,d,g);s.push(G);}if(c.sortItem){p=c.sortItem.getKey();d=!!(c.sortDescending);s.push(new S(p,d));}this._saveViewSettingsState(c);this.oTableController.applyGroupAndSort(s);this.getView().destroy();},_saveViewSettingsState:function(c){var v=this.oView.getModel().getData();var g=c.groupItem&&c.groupItem.getKey();v.groupDescending=!!(c.groupDescending);if(g!=null&&g!=undefined){v.groupPanelItems.map(function(a){if(a.columnKey===g){a.selected=true;return a;}else{a.selected=false;return a;}});}var s=c.sortItem&&c.sortItem.getKey();v.sortDesecending=!!(c.sortDescending);if(s!=null&&s!=undefined){v.sortPanelItems.map(function(a){if(a.columnKey===s){a.selected=true;return a;}else{a.selected=false;return a;}});}this.oTableController.oViewSettingsPropertyModel=new J(v);},onCancel:function(e){this.getView().destroy();},onColumnListSelectAll:function(e){if(e.getParameters().selected){this.getView().byId("ColumnsList").selectAll();}else{this.getView().byId("ColumnsList").removeSelections(true);}this._updateSelectAllText();},onColumnListChange:function(e){this._updateSelectAllText();},_updateSelectAllText:function(){var c=this.getView().byId("ColumnsList"),s=L.getText("table.VIEWSETTINGS_COLUMN_SELECTALL",[c.getSelectedItems().length,c.getItems().length]);this.getView().byId("selectAllCheckBox").setText(s);}});});};if(!jQuery.sap.isDeclared('sap.ui.mdc.internal.valuehelp.ValueHelpAnnotationHelper')){jQuery.sap.declare('sap.ui.mdc.internal.valuehelp.ValueHelpAnnotationHelper');sap.ui.define("sap/ui/mdc/internal/valuehelp/ValueHelpAnnotationHelper",["sap/ui/mdc/library"],function(L){"use strict";jQuery.sap.declare("sap.ui.mdc.internal.valuehelp.ValueHelpAnnotationHelper");sap.ui.mdc.internal.valuehelp.ValueHelpAnnotationHelper={getCollectionEntitySet:function(v){var V=v.getObject();return V.$model.getMetaModel().createBindingContext("/"+V.CollectionPath);},getValueListProperty:function(p){var v=p.getModel();var V=v.getObject("/");return V.$model.getMetaModel().createBindingContext('/'+V.CollectionPath+'/'+p.getObject());},formatIconTabFilterText:function(i,c){return L.getText(i);},formatSelectedItemTitle:function(s,c){if(c&&c.conditions&&c.conditions.length!==0){var C=c.conditions.filter(function(o){return o.isEmpty!==true;});return L.getText(s,[C.length]);}else{return L.getText(s,[0]);}},formatedTokenText:function(f,c){var r="";if(c){var C=this.getModel("cm");var o=C.getFilterOperatorConfig().getOperator(c.operator);r=o.format(c.values,c,f);}return r;}};});};if(!jQuery.sap.isDeclared('sap.ui.mdc.Field')){jQuery.sap.declare('sap.ui.mdc.Field');sap.ui.define("sap/ui/mdc/Field",["./library",'sap/ui/mdc/XMLComposite',"sap/ui/mdc/internal/common/Helper"],function(L,X,c){"use strict";var F=X.extend("sap.ui.mdc.Field",{metadata:{designTime:false,specialSettings:{metadataContexts:{defaultValue:"{ model: 'entitySet', path:'',  name: 'entitySet'}, { model: 'dataField', path:'',  name: 'dataField'}"}},properties:{},events:{callAction:{}},aggregations:{},publicMethods:[]},fragment:"sap.ui.mdc.internal.field.Field"});F.prototype.onDraftLinkPressed=function(e){};F.prototype.handleCallAction=function(e){};F._helper={formatDraftOwner:function(d,D,v,a,b,h){var s="";if(d&&h){var u=v||D||b||a;if(u){s=L.getText("draft.OWNER",[u]);}else{s=L.getText("draft.ANOTHER_USER");}}return s;},buildExpressionForCriticalityIcon:function(C){if(C){var e="{= (${"+C+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Negative') || (${"+C+"} === '1') || (${"+C+"} === 1) ? 'sap-icon://status-negative' : "+"(${"+C+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Critical') || (${"+C+"} === '2') || (${"+C+"} === 2) ? 'sap-icon://status-critical' : "+"(${"+C+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Positive') || (${"+C+"} === '3') || (${"+C+"} === 3) ? 'sap-icon://status-positive' : "+"'sap-icon://status-inactive' }";return e;}},buildExpressionForCriticalityColor:function(C){if(C){var e="{= (${"+C+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Negative') || (${"+C+"} === '1') || (${"+C+"} === 1) ? 'Error' : "+"(${"+C+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Critical') || (${"+C+"} === '2') || (${"+C+"} === 2) ? 'Warning' : "+"(${"+C+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Positive') || (${"+C+"} === '3') || (${"+C+"} === 3) ? 'Success' : "+"'None' }";return e;}},getFieldContext:function(C,f){return'responsiveTable';},getStableIdPartFromDataField:function(d,p){var P="",I="";if(d.$Type&&d.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){return c.replaceSpecialCharsInId(d.Action);}else if(d.$Type&&(d.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"||d.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation")){if(typeof d.SemanticObject=="string"){I=c.replaceSpecialCharsInId(d.SemanticObject);}else if(d.SemanticObject.$Path){I=c.replaceSpecialCharsInId(d.SemanticObject.$Path);}if(typeof d.Action=="string"){I=I+"::"+c.replaceSpecialCharsInId(d.Action);}else if(d.Action&&d.Action.$Path){I=I+"::"+c.replaceSpecialCharsInId(d.Action.$Path);}return I;}else if(d.$Type&&d.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){return c.replaceSpecialCharsInId(d.Target.$AnnotationPath);}else if(d.Value&&d.Value.$Path){return c.replaceSpecialCharsInId(d.Value.$Path);}else if(d.Value&&d.Value.$Apply&&d.Value.$Function==="odata.concat"){for(var i=0;i<d.Value.$Apply.length;i++){if(d.Value.$Apply[i].$Path){if(P){P=P+"::";}P=P+c.replaceSpecialCharsInId(d.Value.$Apply[i].$Path);}}return P;}else if(p&&p.context&&p.context.getObject("@sapui.name")){return c.replaceSpecialCharsInId(p.context.getObject("@sapui.name"));}else{jQuery.sap.log.error("Annotation Helper: Unable to create a stable ID. Please check the annotations.");}}};F._helper.getFieldContext.requiresIContext=true;return F;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.FilterField')){jQuery.sap.declare('sap.ui.mdc.FilterField');jQuery.sap.require('sap.ui.model.json.JSONModel');jQuery.sap.require('sap.ui.model.odata.v4.AnnotationHelper');sap.ui.define("sap/ui/mdc/FilterField",["./library",'sap/ui/mdc/XMLComposite',"sap/ui/mdc/base/ODataSuggestProvider","sap/ui/mdc/base/OperatorSuggestProvider","sap/ui/mdc/base/FixedValueListProvider","sap/ui/model/json/JSONModel","sap/ui/mdc/ValueHelpDialog","sap/ui/mdc/internal/common/Helper",'sap/ui/model/odata/v4/AnnotationHelper'],function(L,X,O,a,F,J,V,C){"use strict";var b=X.extend("sap.ui.mdc.FilterField",{metadata:{designTime:false,specialSettings:{metadataContexts:{defaultValue:"{ model: 'entitySet', path:'',  name: 'entitySet'}, { model: 'property', path:'',  name: 'property'}"}},properties:{conditionModelName:{type:"string",defaultValue:"sap.fe.cm",invalidate:false}},events:{},aggregations:{},publicMethods:[]},fragment:"sap.ui.mdc.internal.filterfield.FilterField"});b.prototype.getInnerFilterField=function(){return this.get_content().getItems()[1];};b.prototype.init=function(){X.prototype.init.call(this);var i=this.getInnerFilterField();var s=i.getCustomData()[1].getValue()==='true',f=i.getCustomData()[2].getValue()==='true';if(s){new O({control:i,enableFilterSuggest:false,suggest:this.handleSuggest.bind(this)});}else if(f){new F({control:i,enableFilterSuggest:true,suggest:this.handleSuggest.bind(this)});}};b.prototype.handleSuggest=function(p,e){var i=this.getInnerFilterField();var f=this;var I=e.getSource();var E=i.data("entitySetName");var m=f.getModel().getMetaModel();var s,B={};var c=i.getCustomData()[2].getValue()==='true';if(!c){s=m.getObject("/"+E+"@Org.OData.Capabilities.V1.SearchRestrictions");if(!s||s.Searchable||s.Searchable===undefined){B={$search:e.getParameters().suggestValue};}else{return;}}if(this.bSuggestionViewCreated){if(!c){var S=I.getBinding("suggestionRows");if(S){S.changeParameters(B);}}}else{this.bSuggestionViewCreated=true;this._requestValueListMetadata().then(function(v){v.SuggestBindingParameters=JSON.stringify(B);var o=new J(v);var d=sap.ui.view({viewName:"sap.ui.mdc.internal.filterfield.SuggestionList",type:"XML",async:true,preprocessors:{xml:{bindingContexts:{valueList:o.createBindingContext("/")},models:{valueList:o}}}});d.setModel(v.$model);return d.loaded().then(function(){p.setTable(d.getContent()[0]);if(v.__sapfe){if(v.__sapfe.keyPath){p.setKeyPath(v.__sapfe.keyPath);}if(v.__sapfe.descriptionPath){p.setDescriptionPath(v.__sapfe.descriptionPath);}}});});}};b.prototype.handleValueHelpRequest=function(){var i=this.getInnerFilterField();var e=i.data("entitySetName");var f=i.getFieldPath().replace(/\*/g,'');var v=new V({entitySet:e,fieldPath:f});v.setConditionModel(this.getModel(this.getConditionModelName()));this.addDependent(v);v.open();};b.prototype._requestValueListMetadata=function(){var f=this;var I=this.getInnerFilterField();var e=I.data("entitySetName");var s=I.getFieldPath().replace(/\*/g,'');return this.getModel().getMetaModel().requestValueListInfo('/'+e+'/'+s).then(function(v){var p;if(v[""]){p=v[""].Parameters;var m=f.getModel().getMetaModel();var l=m.getObject('/'+e+'/'+s+"@sapui.name");var c=m.getObject("/"+e+"@com.sap.vocabularies.Common.v1.FilterExpressionRestrictions");var o=c&&c.filter(function(d){return d.Property.$PropertyPath===s;});v[""].sTitle=m.getObject("/"+e+"/$Type/"+s+"@com.sap.vocabularies.Common.v1.Label");if(o&&(o.length>0)&&(o[0].AllowedExpressions.$EnumMember.indexOf("SingleValue")>-1)){v[""].sSelectionMode="SingleSelectLeft";v[""].sTitle=L.getText("valuehelp.SINGLE_ITEM_SELECT")+v[""].sTitle;}else{v[""].sSelectionMode="MultiSelect";}for(var i=0;i<p.length;i++){if(p[i].LocalDataProperty&&p[i].LocalDataProperty.$PropertyPath===l){v[""].__sapfe={keyPath:p[i].ValueListProperty,descriptionPath:v[""].$model.getMetaModel().getObject("/"+v[""].CollectionPath+"/"+p[i].ValueListProperty+"@com.sap.vocabularies.Common.v1.Text/$Path")};break;}}return v[""];}else{throw("no unqualified value list found - currently qualified value lists are not considered");}},function(E){throw(E.message);});};b._helper={getFieldPath:function(I,e,f){var m,s,p,t;m=I.getInterface(0).getModel();if(typeof f!=="string"){f=m.getObject(I.getInterface(1).getPath()+"@sapui.name");}if(f.indexOf('/')>-1){s=f.split('/');for(var i=0;i<(s.length-1);i++){p=m.getObject("/"+e+"/"+s.slice(0,(i+1)).join('/'));if(p&&p["$kind"]==="NavigationProperty"&&p["$isCollection"]){s[i]=s[i]+'*';t=true;}}if(t){f=s.join('/');}}return f;},getValueStatePath:function(i,e,f){var _=b._helper.getFieldPath(i,e,f);return"{sap.fe.cm>/fieldPath/"+_+"/valueState}";},getValueStateTextPath:function(i,e,f){var _=b._helper.getFieldPath(i,e,f);return"{sap.fe.cm>/fieldPath/"+_+"/valueStateText}";},isRequiredInFilter:function(p,d){var e,P,i=false,f,m=d.context.getModel(),s=d.context.getPath();e=C._getEntitySetPath(m,s);if(typeof p==="string"){P=p;}else{P=m.getObject(s+"@sapui.name");}f=m.getObject(e+"@Org.OData.Capabilities.V1.FilterRestrictions");if(f&&f.RequiredProperties){i=f.RequiredProperties.some(function(c){return c.$PropertyPath===P;});}return i;},typeFormatOptions:function(p,d){var f="{",s,m=d.context.getModel(),P=d.context.getPath(),t=m.getObject(P+"/$Type"),T,o;if(t==="Edm.Date"||t==="Edm.DateTimeOffset"||t==="Edm.TimeOfDay"){f+="style: 'medium'";}else if(t==="Edm.Decimal"){s=m.getObject(P+"/$Scale")||0;switch(s){case"floating":f+="decimals: "+(m.getObject(P+"/$Precision")||0);break;case"variable":break;default:f+="decimals: "+s;}}T=m.getObject(P+"@com.sap.vocabularies.Common.v1.Text");if(T){o=m.getObject(P+"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement");if(f.length>1){f+=", ";}if(o&&o.$EnumMember){switch(o.$EnumMember){case"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast":f+="displayFormat: 'ValueDescription'";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly":f+="displayFormat: 'Description'";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate":f+="displayFormat: 'Value'";break;default:f+="displayFormat: 'DescriptionValue'";}}else{f+="displayFormat: 'DescriptionValue'";}}return f+"}";},typeConstraints:function(p,d){var c="{",s,m,M=d.context.getModel(),P=d.context.getPath(),t=M.getObject(P+"/$Type");if(t==="Edm.Decimal"){s=M.getObject(P+"/$Scale")||0;switch(s){case"floating":c+="decimals: "+(M.getObject(P+"/$Precision")||0);break;case"variable":break;default:c+="decimals: "+s;}}else if(t==="Edm.String"){m=M.getObject(P+"/$MaxLength");if(m){c+="maxLength: "+m;}if(M.getObject(P+"@com.sap.vocabularies.Common.v1.IsUpperCase")){if(c.length>1){c+=", ";}c+="toUpperCase: true";}}return c+"}";},getValueListCollectionEntitySet:function(v){var m=v.getObject();return m.$model.getMetaModel().createBindingContext("/"+m.CollectionPath);},getValueListProperty:function(p){var v=p.getModel();var m=v.getObject("/");return m.$model.getMetaModel().createBindingContext('/'+m.CollectionPath+'/'+p.getObject());}};b._helper.getFieldPath.requiresIContext=true;b._helper.getValueStatePath.requiresIContext=true;b._helper.getValueStateTextPath.requiresIContext=true;return b;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.Table')){jQuery.sap.declare('sap.ui.mdc.Table');jQuery.sap.require('sap.m.ListMode');jQuery.sap.require('sap.ui.model.odata.v4.AnnotationHelper');sap.ui.define("sap/ui/mdc/Table",["./library",'sap/ui/mdc/XMLComposite','sap/ui/mdc/internal/table/gridtable/GridTable.controller','sap/ui/mdc/internal/table/responsivetable/ResponsiveTable.controller','sap/ui/mdc/internal/field/Field.controller',"sap/m/ListMode",'sap/ui/mdc/Field','sap/ui/model/odata/v4/AnnotationHelper'],function(L,X,G,R,F,a){"use strict";var b="sap.ui.table.Table",c='sap.m.Table';var T=X.extend("sap.ui.mdc.Table",{metadata:{designTime:true,specialSettings:{metadataContexts:{defaultValue:"{ model: 'entitySet', path:'',  name: 'entitySet'},{model: 'sap.fe.deviceModel', path: '/', name: 'sap.fe.deviceModel'}"}},properties:{tableBindingPath:{type:"string",invalidate:"template"},type:{type:"string",defaultValue:"ResponsiveTable",invalidate:"template"},interactionType:{type:"string",defaultValue:"Inactive",invalidate:"template"},settingsDialogType:{type:"string",defaultValue:"ViewSettings"},enabled:{type:"boolean",defaultValue:true,invalidate:false},growingThreshold:{type:"string",defaultValue:"50",invalidate:"template"},growingScrollToLoad:{type:"boolean",defaultValue:true,invalidate:false},listBindingName:{type:"string",invalidate:false},demandPopin:{type:"boolean",group:"Misc",defaultValue:false}},events:{"itemPress":{},"callAction":{},"showError":{}},publicMethods:[]},fragment:"sap.ui.mdc.internal.table.Table"});var I=function(){if(!this.bInitialized){this.oTableController.setSelectionMode();this.oTableController.enableDisableActions();this.oTableController.bindTableCount();this.bInitialized=true;this.detachModelContextChange(I);}};T.prototype.init=function(){X.prototype.init.call(this);var i=this.getInnerTable(),C=i.getMetadata().getName();if([b,c].join(" ").indexOf(C)>-1){if(C===b){this.oTableController=new G(this);}else{this.oTableController=new R(this);}this.oFieldController=new F(null,this);this.attachModelContextChange(I);}};T.prototype.getInnerTable=function(){return this.get_content();};T.prototype.handleDataRequested=function(e){this.oTableController.handleDataRequested(e);};T.prototype.handleDataReceived=function(e){this.oTableController.handleDataReceived(e);};T.prototype.handleSelectionChange=function(e){this.oTableController.enableDisableActions();};T.prototype.handleItemPress=function(e){this.fireItemPress({listItem:e.getParameter("listItem")});};T.prototype.handleCallAction=function(e){this.oTableController.handleCallAction(e);};T.prototype.getSelectedContexts=function(){var i=this.getInnerTable();var s=[];if(i.getMetadata().getName()===b){var S=i.getSelectedIndices();for(var d in S){s.push(i.getContextByIndex(d));}}else{s=i.getSelectedContexts();}return s;};T.prototype.getEntitySet=function(){var l=this.getListBinding().getPath();return l.substr(1);};T.prototype.getListBinding=function(){return this.oTableController.getListBinding();};T.prototype.getListBindingInfo=function(){return this.oTableController.getListBindingInfo();};T.prototype.setShowOverlay=function(){this.getInnerTable().setShowOverlay(true);};T.prototype.onStandardActionClick=function(e){this.oTableController.onStandardActionClick(e);};T.prototype.onContactDetails=function(e){this.oFieldController.onContactDetails(e);};T.prototype.onDraftLinkPressed=function(e){this.oFieldController.onDraftLinkPressed(e);};T.prototype.onDataFieldWithIntentBasedNavigationPressed=function(e){this.oFieldController.onDataFieldWithIntentBasedNavigationPressed(e);};T.prototype._updateColumnsPopinFeature=function(){if(!this.getDemandPopin()){return;}var C=this.getInnerTable().getColumns();if(!C){return;}C=C.filter(function(d){return d.getVisible();});C.sort(function(d,e){return d.getOrder()-e.getOrder();});var o,l=C.length;for(var i=0;i<l;i++){o=C[i];if(i<2){o.setDemandPopin(false);o.setMinScreenWidth("1px");}else{o.setDemandPopin(true);if(o.getPopinDisplay()!="WithoutHeader"){o.setPopinDisplay(sap.m.PopinDisplay.Inline);}o.setMinScreenWidth((i+1)*10+"rem");}}};T.prototype._deactivateColumnsPopinFeature=function(){var C=this._oTable.getColumns();if(!C){return;}var o,l=C.length;for(var i=0;i<l;i++){o=C[i];o.setDemandPopin(false);o.setMinScreenWidth("1px");}};T.prototype.setDemandPopin=function(d){var o=this.getDemandPopin();if(o===d){return;}this.setProperty("demandPopin",d,true);if(d){this._updateColumnsPopinFeature();}else{this._deactivateColumnsPopinFeature();}};T._helper={createAggregationBinding:function(i,e,t,l){if(t){return'{'+t+'}';}var E='',m=i.getInterface(0),M=m.getModel(),s=M.getObject(m.getPath()+"@sapui.name"),n=l?"id: '"+l+"', ":'';if(m.getModel().getObject(m.getPath()+"@com.sap.vocabularies.Common.v1.DraftRoot")){E="$expand : 'DraftAdministrativeData'";}return"{ path : '/"+s+"', parameters : { "+n+" $count : true "+(E?',':'')+E+"}, events : {dataRequested : '.handleDataRequested', dataReceived : '.handleDataReceived'} }";},getSelectionMode:function(C,e,w){C=C.getInterface(0);var l=w['@com.sap.vocabularies.UI.v1.LineItem'];for(var i=0;i<l.length;i++){if(l[i].$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&!l[i].Inline){return sap.m.ListMode.MultiSelect;}}return a.None;},formatDraftLockText:function(d,H,e){if(!d){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("draft.DRAFT_OBJECT");}else if(H){if(e){return L.getText("draft.LOCKED_OBJECT");}else{return L.getText("draft.UNSAVED_CHANGES");}}else{return"";}}};T._helper.createAggregationBinding.requiresIContext=true;T._helper.getSelectionMode.requiresIContext=true;return T;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.FilterBar')){jQuery.sap.declare('sap.ui.mdc.FilterBar');jQuery.sap.require('sap.ui.base.ManagedObject');jQuery.sap.require('sap.ui.Device');jQuery.sap.require('sap.m.SearchField');sap.ui.define("sap/ui/mdc/FilterBar",["./library",'sap/ui/mdc/XMLComposite','sap/ui/base/ManagedObject','sap/ui/Device',"sap/ui/mdc/internal/common/Helper","sap/ui/mdc/FilterField","sap/m/SearchField",'sap/ui/mdc/base/ConditionModel'],function(L,X,M,D,C,F,S,a){"use strict";var b=X.extend("sap.ui.mdc.FilterBar",{metadata:{designTime:true,specialSettings:{metadataContexts:{defaultValue:"{ model: 'entitySet', path:'',  name: 'entitySet'},{model: 'sap.fe.deviceModel', path: '/', name: 'sap.fe.deviceModel'}"}},properties:{liveUpdate:{type:"boolean",defaultValue:!D.system.phone,invalidate:"template"},searchOnStart:{type:"boolean",defaultValue:true,invalidate:"template"},filterSummary:{type:"string",defaultValue:"",invalidate:false},enabled:{type:"boolean",defaultValue:true,invalidate:false},conditionModelName:{type:"string",defaultValue:"sap.fe.cm",invalidate:false},listBindingNames:{type:"string[]",invalidate:false}},events:{search:{},change:{}},aggregations:{},publicMethods:[]},fragment:"sap.ui.mdc.internal.filterbar.FilterBar"});var s=function(e){var c=this._getConditionModel(),m=this.getModel(),l,d,f;f=c.applyFilters();if(f&&m.getBindingForReference){var o=this._getSearchControl();if(o){d=o.getValue()||undefined;l=this.getListBindingNames();l.forEach(function(g){m.getBindingForReference(g).then(function(h){h.changeParameters({$search:d});});});}}};b.prototype.init=function(){X.prototype.init.call(this);var t=this;this._bIsReady=false;this.attachSearch(s);this._requestConditionModel().then(function(c){if(!t.bInitialized){t.bInitialized=true;var o=c.bindProperty("/",c.getContext("/"));o.attachChange(t.handleChange.bind(t));if(t.getSearchOnStart()&&t.getEnabled()){t._bIsReady=true;t.fireSearch();}if(!t.getEnabled()){t._getInnerFilterBar().setBusy(true);}}});};b.prototype.onBeforeRendering=function(){this._setFilterSummary();};b.prototype.setEnabled=function(e){this._getInnerFilterBar().setBusy(!e);this.setProperty("enabled",e);if(e){if(this.bInitialized&&this.getSearchOnStart()){this._bIsReady=true;this.fireSearch();}}};b.prototype.isReady=function(){return this._bIsReady;};b.prototype.getAppState=function(){var c=this._getConditionModel(),d=this._getDraftEditStateControl(),o=this._getSearchControl(),A={};if(c){A.conditionModel=c.serialize();}if(d){A.draftEditState=d.getSelectedKey();}if(o){A.search=o.getValue();}return A;};b.prototype.setAppState=function(A){var t=this;return this._requestConditionModel().then(function(c){var d=t._getDraftEditStateControl(),o=t._getSearchControl();if(A.conditionModel){if(c){c.parse(A.conditionModel);}else{throw("app state contains condition model state but condition model not yet set");}}if(A.draftEditState&&d){d.setSelectedKey(A.draftEditState);}if(A.search&&o){o.setValue(A.search);}if(!t.getLiveUpdate()){t.handleGo();}});};b.prototype.handleChange=function(){if(this.getLiveUpdate()&&this.getEnabled()){this.fireSearch();this._setFilterSummary();this.fireChange();}else{this._bIsReady=false;this.fireChange();}};b.prototype.handleSearch=function(e){this.fireSearch();this._setFilterSummary();this.fireChange();};b.prototype.handleSearchChange=function(e){var t=this,i;if(t._iSearchCounter){t._iSearchCounter++;}else{t._iSearchCounter=1;}i=t._iSearchCounter;if(this.getLiveUpdate()){setTimeout(function(){if(i===t._iSearchCounter){t.fireSearch();t._setFilterSummary();t.fireChange();delete t._iSearchCounter;}},400);}else{this._bIsReady=false;this.fireChange();}};b.prototype.handleGo=function(){this._bIsReady=true;this.fireSearch();this._setFilterSummary();this.fireChange();};b.prototype._getInnerFilterBar=function(){return this.get_content();};b.prototype._setFilterSummary=function(){var o=this._getSearchControl(),d=this._getDraftEditStateControl(),c,f="",e=[],i;if(o){c=o.getValue();}if(c){f=L.getText("filterbar.SEARCHBY")+": "+c+((e.length>0)?" | ":"");}if(d&&d.getSelectedKey()!=='0'){e.push(L.getText("filterbar.EDITING_STATUS"));}var g=this._getFilterFieldControls();for(i=0;i<g.length;i++){if(g[i].getConditions().length>0){e.push(g[i].getCustomData()[0].getValue());}}if(e.length>0){f+=L.getText("filterbar.FILTERBY")+" ("+e.length+"): ";for(i=0;i<e.length;i++){f+=((i>0)?', ':'')+e[i];}}if(!f){f=L.getText("filterbar.FILTERBYNONE");}this.setFilterSummary(f);};b.prototype._requestConditionModel=function(){var c=this._getConditionModel(),t=this;if(c){return Promise.resolve(c);}else{return new Promise(function(r){var m=t.getModel();var f=function(){var m,c,n;t.detachModelContextChange(f);c=t.getModel(t.getConditionModelName());if(c){return Promise.resolve(c);}else{m=m||t.getModel();n=t.getListBindingNames();if(n&&m.getBindingForReference){n.forEach(function(N){m.getBindingForReference(N).then(function(l){c=a.getFor(l);this.setModel(c,this.getConditionModelName());r(c);}.bind(this));}.bind(t));}}};if(m){f();}else{t.attachModelContextChange(f);}});}};b.prototype._getConditionModel=function(){return this.getModel(this.getConditionModelName());};b.prototype._getDraftEditStateControl=function(){var c=this._getInnerFilterBar().getContent();var f;for(var i=0;i<c.length;i++){if(!(c[i]instanceof F)&&c[i].getItems){f=c[i].getItems()[1];if(f.getBinding("items")&&f.getBinding("items").getPath()==="/editStates"&&f.getBinding("items").getModel()===f.getModel("$draft")){return f;}}}};b.prototype._getSearchControl=function(){var c=this._getInnerFilterBar().getContent();var f;for(var i=0;i<c.length;i++){f=c[i].getItems()[1];if(f instanceof S){return f;}}};b.prototype._getFilterFieldControls=function(){var c=this._getInnerFilterBar().getContent();var f,d=[];for(var i=0;i<c.length;i++){f=c[i];if(f instanceof F){d.push(f.get_content().getItems()[1]);}}return d;};b._helper={isPropertyFilterable:function(c,p){var e,P,i=false,m=c.getModel(),d=c.getPath();if(m.getObject(d+"@com.sap.vocabularies.UI.v1.Hidden")){return false;}if(m.getObject(d+"@com.sap.vocabularies.UI.v1.HiddenFilter")){return false;}e=C._getEntitySetPath(m,d);if(typeof(p)==="string"){P=p;}else{P=m.getObject(d+"@sapui.name");}if(P.indexOf("/")<0){i=b._helper._isInNonFilterableProperties(m,e,P);}else{i=b._helper._isContextPathFilterable(m,e,P);}return!i;},isNavPropertyFilterable:function(c,n){var e,d,i=false,p=c.getPath(),m=c.getModel();e=C._getEntitySetPath(m,p);d=p.slice(e.length+1);if(d.indexOf("/")<0){i=b._helper._isInNonFilterableProperties(m,e,d);}else{i=b._helper._isContextPathFilterable(m,e,d);}return!i;},_isInNonFilterableProperties:function(m,e,c){var i=false;var A=m.getObject(e+"@Org.OData.Capabilities.V1.FilterRestrictions");if(A&&A.NonFilterableProperties){i=A.NonFilterableProperties.some(function(p){return p.$NavigationPropertyPath===c||p.$PropertyPath===c;});}return i;},_isContextPathFilterable:function(m,e,c){var d=c.split("/"),i=false,f="";d.some(function(g,h,j){if(f.length>0){f+="/"+g;}else{f=g;}if(h===j.length-1){i=b._helper._isInNonFilterableProperties(m,e,f);}else if(m.getObject(e+"/$NavigationPropertyBinding/"+g)){i=b._helper._isInNonFilterableProperties(m,e,f);f="";e="/"+m.getObject(e+"/$NavigationPropertyBinding/"+g);}return i===true;});return i;},replaceSpecialCharsInId:function(i){return C.replaceSpecialCharsInId(i);}};b._helper.isNavPropertyFilterable.requiresIContext=true;b._helper.isPropertyFilterable.requiresIContext=true;return b;},true);};
